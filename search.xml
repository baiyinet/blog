<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>FusionApp 原生+本地网页：混合交互开发全攻略</title>
    <url>/posts/359321d3.html</url>
    <content><![CDATA[<h2 id="一-前言"><a href="#一-前言" class="headerlink" title="一.前言"></a>一.前言</h2><p>值得一提的是，FA2.0 版本相较于之前的 1.1.3 版本，在<strong>本地交互和兼容性</strong>方面实现了极为显著的提升。在旧版本中，交互时存在一个明显的问题，即需要借助网页加载过渡。这一情况导致我们无法将 H5 加载页面跳转设置在本地。虽然 H5 布局能够放在本地，但在交互跳转过程中，页面会出现闪烁现象。为了应对这个问题，开发人员只能无奈地新建多个相同的 H5 加载动画，以此来监听跳转。</p>
<p>好在2.0版本成功解决了这一问题，极大地降低了混合开发的成本，<strong>无需服务器部署</strong>，仅在<strong>本地环境</strong>下就能实现流畅丝滑的交互体验。不仅如此，FA2.0还<strong>内置网页夜间渲染</strong>功能，不用耗费精力去适配网页夜间模式。</p>
<h2 id="一-加载本地H5"><a href="#一-加载本地H5" class="headerlink" title="一.加载本地H5"></a>一.加载本地H5</h2><h4 id="1-单个浏览页加载"><a href="#1-单个浏览页加载" class="headerlink" title="1.单个浏览页加载"></a>1.单个浏览页加载</h4><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> uiManager=this.uiManager</span><br><span class="line"><span class="comment">--第1个浏览页加载本地网页，并且添加一个浏览页，地址填about:empty</span></span><br><span class="line">activity.uiManager.currentPage.webView.loadUrl(<span class="string">&quot;file://&quot;</span>..activity.getLuaDir()..<span class="string">&quot;/index.html&quot;</span>)<span class="comment">--加载本地网页</span></span><br></pre></td></tr></table></figure>
<h4 id="2-多个浏览页加载"><a href="#2-多个浏览页加载" class="headerlink" title="2.多个浏览页加载"></a>2.多个浏览页加载</h4><p>如果只有一个页面，可以用<strong>currentPage</strong>，也可以用<strong>getFragment(0)</strong>。多个浏览页都加载本地网页，就是下面这种：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--第1个浏览页加载本地网页</span></span><br><span class="line">activity.uiManager.getFragment(<span class="number">0</span>).webView.loadUrl(<span class="string">&quot;file://&quot;</span>..activity.getLuaDir()..<span class="string">&quot;/index2.html&quot;</span>)</span><br><span class="line"><span class="comment">--第2个浏览页加载本地网页</span></span><br><span class="line">activity.uiManager.getFragment(<span class="number">1</span>).webView.loadUrl(<span class="string">&quot;file://&quot;</span>..activity.getLuaDir()..<span class="string">&quot;/index2.html&quot;</span>)</span><br><span class="line"><span class="comment">--第3个浏览页加载本地网页</span></span><br><span class="line">activity.uiManager.getFragment(<span class="number">2</span>).webView.loadUrl(<span class="string">&quot;file://&quot;</span>..activity.getLuaDir()..<span class="string">&quot;/index3.html&quot;</span>)</span><br><span class="line"><span class="comment">--第4个浏览页加载本地网页</span></span><br><span class="line">activity.uiManager.getFragment(<span class="number">3</span>).webView.loadUrl(<span class="string">&quot;file://&quot;</span>..activity.getLuaDir()..<span class="string">&quot;/index4.html&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>这里<strong>0</strong>就是第一个浏览页，以此类推即可，需要<strong>全部开启离屏预加载</strong>，关于路径问题，默认是页面文件夹下的html文件，这里写了个表格，便于理解：</p>
<table>
<thead>
<tr>
<th>路径描述</th>
<th>路径表示</th>
</tr>
</thead>
<tbody><tr>
<td>页面文件夹下的html文件（默认情况）</td>
<td>直接文件名（如index.html）</td>
</tr>
<tr>
<td>上一级文件夹下的文件</td>
<td>..&#x2F;文件名（如..&#x2F;index.html）</td>
</tr>
<tr>
<td>上两级文件夹下的文件</td>
<td>..&#x2F;..&#x2F;文件名（如..&#x2F;..&#x2F;index.html）</td>
</tr>
<tr>
<td>上一级的另一个文件夹下的文件</td>
<td>..&#x2F;other&#x2F;index.html（other为文件夹名，index.html为文件名）</td>
</tr>
</tbody></table>
<h4 id="3-local解析加载"><a href="#3-local解析加载" class="headerlink" title="3.local解析加载"></a>3.local解析加载</h4><p>这个方式可以实现不需要引入html文件，将html，css甚至js全部封装进lua进行解析，<strong>适用于代码简短、结构简单</strong>的html</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> html = <span class="string">[[</span></span><br><span class="line"><span class="string">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">&lt;html lang=&quot;zh-CN&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;style&gt;</span></span><br><span class="line"><span class="string">        .highlight-text &#123;</span></span><br><span class="line"><span class="string">            color: #C0341D;</span></span><br><span class="line"><span class="string">            background-color: #FBE5E1;</span></span><br><span class="line"><span class="string">            padding: 4px;</span></span><br><span class="line"><span class="string">            border-radius: 4px;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &lt;/style&gt;</span></span><br><span class="line"><span class="string">    &lt;title&gt;高亮文本示例&lt;/title&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;&lt;br&gt;这是一个示例文本，&lt;code class=&quot;highlight-text&quot;&gt;高亮的文字在这里&lt;/code&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">]]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> webView = LuaWebView(this)</span><br><span class="line">webView.getSettings().setLoadWithOverviewMode(<span class="literal">true</span>)</span><br><span class="line">webView.getSettings().setUseWideViewPort(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> FrameLayout = luajava.bindClass <span class="string">&quot;android.widget.FrameLayout&quot;</span></span><br><span class="line"><span class="keyword">local</span> Gravity = luajava.bindClass <span class="string">&quot;android.view.Gravity&quot;</span></span><br><span class="line"><span class="keyword">local</span> lp = FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT, FrameLayout.LayoutParams.FILL_PARENT)</span><br><span class="line">activity.addContentView(webView,lp)</span><br><span class="line"><span class="comment">--add是添加，set是覆盖</span></span><br><span class="line">webView.loadDataWithBaseURL(<span class="literal">nil</span>, html, <span class="literal">nil</span>, <span class="literal">nil</span>,<span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>
<h4 id="4-LuaWebView加载"><a href="#4-LuaWebView加载" class="headerlink" title="4.LuaWebView加载"></a>4.LuaWebView加载</h4><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">layout=<span class="comment">--全屏框架</span></span><br><span class="line">&#123;</span><br><span class="line">  LinearLayout;<span class="comment">--线性控件</span></span><br><span class="line">  orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">  layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">  &#123;</span><br><span class="line">    LuaWebView;<span class="comment">--浏览器控件</span></span><br><span class="line">    layout_marginTop=状态栏高度(),</span><br><span class="line">    layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--浏览器宽度</span></span><br><span class="line">    layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--浏览器高度</span></span><br><span class="line">    id=<span class="string">&#x27;webView&#x27;</span>;<span class="comment">--控件ID</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line"></span><br><span class="line">webView.loadUrl(<span class="string">&quot;file://&quot;</span>..activity.getLuaDir()..<span class="string">&quot;/index2.html&quot;</span>)<span class="comment">--加载本地文件</span></span><br></pre></td></tr></table></figure>
<h2 id="二-核心监听拦截"><a href="#二-核心监听拦截" class="headerlink" title="二.核心监听拦截"></a>二.核心监听拦截</h2><p>往往来讲，我们既然用H5，基本都是当布局使用的，所以，点击H5布局能实现与原生的交互，这是最核心的问题，我的思路就是通过网页监听事件，拦截H5的超链接，实现跳转子页面以及与其他原生功能交互。</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--核心网页判断</span></span><br><span class="line">import <span class="string">&quot;net.fusionapp.core.ui.fragment.WebInterface&quot;</span></span><br><span class="line">import <span class="string">&quot;androidx.viewpager.widget.ViewPager$OnPageChangeListener&quot;</span></span><br><span class="line"><span class="keyword">local</span> uiManager=this.uiManager</span><br><span class="line"><span class="keyword">local</span> viewPager=uiManager.viewPager</span><br><span class="line"><span class="keyword">local</span> pagerAdapter=uiManager.pagerAdapter</span><br><span class="line"><span class="keyword">local</span> pagerCount=pagerAdapter.getCount()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">webInterface</span><span class="params">()</span></span></span><br><span class="line">  <span class="keyword">for</span> i = <span class="number">0</span>,pagerCount<span class="number">-1</span>,<span class="number">1</span> <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> fragment=uiManager.getFragment(i)</span><br><span class="line">    <span class="keyword">if</span> fragment <span class="keyword">then</span></span><br><span class="line">      fragment.setWebInterface(WebInterface&#123;onPageFinished=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line">          <span class="comment">--页面加载结束事件，这个后退不能去掉，一直带着就可以</span></span><br><span class="line">          网页后退()</span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">        onPageStarted=<span class="function"><span class="keyword">function</span><span class="params">(view,url,favicon)</span></span></span><br><span class="line">          <span class="comment">--页面开始加载事件，思路就是你点击后可以拦截，直接进入你想要的子页面</span></span><br><span class="line">          <span class="comment">--也可以进行其他事件，不一定是进入子页面，自由发挥即可</span></span><br><span class="line">          <span class="keyword">if</span> url:<span class="built_in">find</span>(<span class="string">&quot;这里填写你的h5布局元素的超链接&quot;</span>) <span class="keyword">then</span></span><br><span class="line">            网页后退()</span><br><span class="line">            进入子页面(<span class="string">&quot;start&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> url:<span class="built_in">find</span>(<span class="string">&quot;这里填写超链接&quot;</span>) <span class="keyword">then</span></span><br><span class="line">            网页后退()</span><br><span class="line">            进入子页面(<span class="string">&quot;login&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">        onReceivedTitle=<span class="function"><span class="keyword">function</span><span class="params">(view,title)</span></span></span><br><span class="line">          <span class="comment">--获取到网页标题时加载的事件</span></span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">        onLoadResource=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line">          <span class="comment">--页面资源加载监听</span></span><br><span class="line">          <span class="comment">--可通过该方法获取网页上的资源</span></span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">        onUrlLoad=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line"></span><br><span class="line">          <span class="comment">--即将开始加载事件，url参数是即将加载的url</span></span><br><span class="line">          <span class="comment">--该函数返回一个布尔值</span></span><br><span class="line">          <span class="comment">--返回true则拦截本次加载</span></span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">        onReceivedSslError=<span class="function"><span class="keyword">function</span><span class="params">(view, sslErrorHandler, sslError)</span></span></span><br><span class="line">          <span class="comment">--ssl证书错误处理事件</span></span><br><span class="line">          <span class="comment">--需自行处理，请返回true拦截原事件</span></span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      &#125;)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">webInterface()</span><br><span class="line">viewPager.setOnPageChangeListener(OnPageChangeListener&#123;</span><br><span class="line">  onPageSelected=<span class="function"><span class="keyword">function</span><span class="params">(n)</span></span></span><br><span class="line">    webInterface()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>注意，超链接拦截方法是目前来讲最简单且最实用的方法，超链接要满足以下需求：</p>
<ul>
<li><strong>链接可以打开</strong></li>
<li><strong>打开速度得慢一点，前期加载空白</strong></li>
<li><strong>链接地址前缀统一，方便管理</strong></li>
</ul>
<p>那满足以上需求的最完美的地址是什么呢？我苦思冥想，百般尝试，终于找到了一个完美方案：<br><strong>直接使用</strong><a href="https://github用户名.github.io/%E5%90%8E%E8%BE%B9%E4%BD%A0%E9%9A%8F%E4%BE%BF%E5%86%99.html">https://github用户名.github.io/后边你随便写.html</a></p>
<p>这样写的好处是GitHub本就是国外网站，加载自然慢一些，而且我们的<strong>超链接要求一定是能打开的</strong>，如果打不开，拦截就会闪烁网页加载失败的页面。虽然GitHub的后边名称不存在，但是Github默认不存在的都会定向到一个提示页面，由此我们<strong>可以随便填写以满足不同点击事件的拦截</strong>。效果搭配以上代码就是完美衔接跳转，根本看不到中间加载过渡。</p>
<p>这里是监听所有浏览页的，不论你用了几个本地H5浏览页，都可以在上边这些代码中监听，**网页后退()**不要随意删除。通过上述方法我们已经实现了网页点击与原生层的交互功能。</p>
<h2 id="三-模拟用户点击"><a href="#三-模拟用户点击" class="headerlink" title="三.模拟用户点击"></a>三.模拟用户点击</h2><p>上面讲了H5去定向到原生，也就是说我们已经实现了以H5当布局时，点击布局元素实现原生的功能。</p>
<p>那么原生如何定向到H5呢?在一些引入外部网站时可能会用到，假设我们引入了一个我们的博客网站，但是我想让顶栏用原生框架，那么我们可以删除掉网站的原有头部顶栏元素(或者利用JS屏蔽元素)这里屏蔽要屏蔽最大的父元素。然后我们找到网站的侧滑栏按钮元素，用<strong>JS的模拟点击</strong>该元素。</p>
<p>可通过 document.querySelector 获取网页元素，再调用 click 方法来模拟点击。在原生Lua布局框架中调用网页，可将JavaScript代码注入到网页中执行。假设侧滑栏元素的CSS选择器为 <code>.sidebar-toggle </code>：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取要点击的元素</span></span><br><span class="line"><span class="keyword">var</span> element = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.sidebar-toggle&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> (element) &#123;</span><br><span class="line">    <span class="comment">// 模拟点击事件</span></span><br><span class="line">    element.<span class="title function_">click</span>();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;未找到对应的元素&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再举个简单的例子，比如APP我们设置了一个悬浮球，让他实现<strong>返回网页顶部</strong>。Fa中文函数模块配置了返回顶部功能，直接使用即可。</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--悬浮按钮点击事件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onFloatingActionButtonClick</span><span class="params">(v)</span></span></span><br><span class="line">  <span class="comment">--TODO：onFloatingActionButtonClick</span></span><br><span class="line">  返回网页顶部()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[这里的Js应该是这个:</span></span><br><span class="line"><span class="comment">// 页面加载完成后执行滚动到顶部操作</span></span><br><span class="line"><span class="comment">window.onload = function() &#123;</span></span><br><span class="line"><span class="comment">    window.scrollTo(0, 0);</span></span><br><span class="line"><span class="comment">&#125;;</span></span><br><span class="line"><span class="comment">]]</span></span><br></pre></td></tr></table></figure>
<p>不过这个中文函数自带的返回顶部是直接跳到顶部，<strong>并不是平滑动画返回顶部</strong>，要实现平滑返回，可以这样写JS:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> duration = <span class="number">500</span>; <span class="comment">// 滚动动画持续时间，单位毫秒</span></span><br><span class="line">    <span class="keyword">const</span> start = <span class="variable language_">window</span>.<span class="property">pageYOffset</span>;</span><br><span class="line">    <span class="keyword">const</span> startTime = performance.<span class="title function_">now</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">easeInOutQuad</span>(<span class="params">t</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> t &lt; <span class="number">0.5</span>? <span class="number">2</span> * t * t : -<span class="number">1</span> + (<span class="number">4</span> - <span class="number">2</span> * t) * t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">animateScroll</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> currentTime = performance.<span class="title function_">now</span>();</span><br><span class="line">        <span class="keyword">const</span> timeElapsed = currentTime - startTime;</span><br><span class="line">        <span class="keyword">const</span> scrollAmount = start * <span class="title function_">easeInOutQuad</span>(timeElapsed / duration);</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">scrollBy</span>(<span class="number">0</span>, -scrollAmount);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (timeElapsed &lt; duration) &#123;</span><br><span class="line">            <span class="title function_">requestAnimationFrame</span>(animateScroll);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">requestAnimationFrame</span>(animateScroll);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>总之，就是利用<strong>JS模拟用户点击</strong>，点击html中指定元素,并将这个<strong>加载JS代码写进你的原生点击事件</strong>即可。</p>
<h2 id="四-伪原生的实现"><a href="#四-伪原生的实现" class="headerlink" title="四.伪原生的实现"></a>四.伪原生的实现</h2><h4 id="1-隐藏网页滑动条"><a href="#1-隐藏网页滑动条" class="headerlink" title="1.隐藏网页滑动条"></a>1.隐藏网页滑动条</h4><p>我们还可以把本地网页的上下滑动条给隐藏起来，把下面CSS代码放入本地html文件的head标签内</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">html</span>,</span></span><br><span class="line"><span class="language-css"><span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">overflow-y</span>: hidden;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-tag">html</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">scroll-behavior</span>: smooth;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果上述CSS不生效，那就需要<strong>webView</strong>进行控制了：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">webView.getSettings().setSupportZoom(<span class="literal">false</span>); <span class="comment">--禁止网页缩放</span></span><br><span class="line">webView.getSettings().setBuiltInZoomControls(<span class="literal">false</span>); <span class="comment">--禁止缩放</span></span><br><span class="line">webView.getSettings().setDisplayZoomControls(<span class="literal">false</span>); <span class="comment">--隐藏自带的右下角缩放控件</span></span><br><span class="line">webView.setVerticalScrollBarEnabled(<span class="literal">false</span>)<span class="comment">--隐藏垂直滚动条</span></span><br></pre></td></tr></table></figure>
<p>注意，上述代码如果是在<strong>自带的浏览页</strong>进行，直接添加会报错，需要先获取：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> WebChromeClient = luajava.bindClass <span class="string">&quot;android.webkit.WebChromeClient&quot;</span></span><br><span class="line"><span class="keyword">local</span> WebViewClient = luajava.bindClass <span class="string">&quot;android.webkit.WebViewClient&quot;</span></span><br><span class="line"><span class="keyword">local</span> uiManager=activity.getUiManager()</span><br><span class="line"><span class="keyword">local</span> webView=uiManager.getCurrentFragment().getWebView()</span><br></pre></td></tr></table></figure>
<h4 id="2-禁用浏览页长按菜单"><a href="#2-禁用浏览页长按菜单" class="headerlink" title="2.禁用浏览页长按菜单"></a>2.禁用浏览页长按菜单</h4><p>我们可以<strong>禁止本地浏览页的长按</strong>功能，无法复制和出现菜单，从而实现伪原生，你可以用lua，也可以用js实现。先来说lua代码:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--第一个浏览页禁止长按</span></span><br><span class="line"><span class="keyword">local</span> fragment=uiManager.currentFragment</span><br><span class="line">fragment.setMenuInterface(luajava.bindClass<span class="string">&quot;net.fusionapp.core.ui.fragment.WebViewMenuSupport&quot;</span>.Interface&#123;</span><br><span class="line">  <span class="comment">--显示浏览器菜单时，会经过这个方法</span></span><br><span class="line">  <span class="comment">--你可以通过这个方法自定义浏览器菜单</span></span><br><span class="line">  <span class="comment">--或者禁用浏览器菜单事件</span></span><br><span class="line">  onMenuItemCreate=<span class="function"><span class="keyword">function</span><span class="params">(list)</span></span></span><br><span class="line">    <span class="comment">--添加一项</span></span><br><span class="line">    list.add(<span class="string">&quot;白衣&quot;</span>)</span><br><span class="line">    <span class="comment">--删除一项</span></span><br><span class="line">    <span class="comment">--list.remove(&quot;复制链接&quot;)</span></span><br><span class="line">    <span class="comment">--如果删除下面的return语句，则浏览器没有长按菜单</span></span><br><span class="line">    <span class="comment">-- return list</span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">--第二个浏览页禁止长按</span></span><br><span class="line"><span class="keyword">local</span> fragment=uiManager.getFragment(<span class="number">1</span>)</span><br><span class="line">fragment.setMenuInterface(luajava.bindClass<span class="string">&quot;net.fusionapp.core.ui.fragment.WebViewMenuSupport&quot;</span>.Interface&#123;</span><br><span class="line">  onMenuItemCreate=<span class="function"><span class="keyword">function</span><span class="params">(list)</span></span></span><br><span class="line">    <span class="comment">--添加一项</span></span><br><span class="line">    list.add(<span class="string">&quot;白衣&quot;</span>)</span><br><span class="line">    <span class="comment">--删除一项</span></span><br><span class="line">    <span class="comment">--list.remove(&quot;复制链接&quot;)</span></span><br><span class="line">    <span class="comment">--如果删除下面的return语句，则浏览器没有长按菜单</span></span><br><span class="line">    <span class="comment">-- return list</span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>另一种方法是使用CSS禁止长按选中文本，使用JavaScript禁止长按弹出菜单：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    -webkit-touch-callout: none;</span><br><span class="line">    -webkit-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -khtml-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -moz-<span class="attribute">user-select</span>: none;</span><br><span class="line">    -ms-<span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;contextmenu&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchstart&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">&#125;, &#123; <span class="attr">passive</span>: <span class="literal">false</span> &#125;);</span><br></pre></td></tr></table></figure>
<h4 id="3-隐藏加载进度条"><a href="#3-隐藏加载进度条" class="headerlink" title="3.隐藏加载进度条"></a>3.隐藏加载进度条</h4><p>隐藏加载进度条，你可以将进度条颜色设置为透明色，也可以直接用下面代码移除，这种仅适用于FA2</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--去除加载进度条</span></span><br><span class="line">activity.uiManager.getFragment(<span class="number">0</span>).webView.parent.removeViewAt(<span class="number">2</span>)</span><br><span class="line"><span class="comment">--去头部留白--document.body.style.paddingTop=0--此处用的是JS</span></span><br></pre></td></tr></table></figure>
<p>自定义浏览器布局的需要使用以下代码：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> webSettings = mLuaWebView.getSettings();</span><br><span class="line">webSettings.setUseWideViewPort(<span class="literal">true</span>);</span><br><span class="line">webSettings.setLoadWithOverviewMode(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--// 开启js支持</span></span><br><span class="line">webSettings.setJavaScriptEnabled(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加以下设置 WebChromeClient 的代码</span></span><br><span class="line"><span class="keyword">local</span> WebChromeClient = luajava.bindClass <span class="string">&quot;android.webkit.WebChromeClient&quot;</span></span><br><span class="line">mLuaWebView.setWebChromeClient(luajava.override(WebChromeClient, &#123;</span><br><span class="line">    onProgressChanged = <span class="function"><span class="keyword">function</span><span class="params">(view, newProgress)</span></span></span><br><span class="line">        <span class="comment">-- 不做任何与进度条相关的操作，从而不显示默认进度条</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>
<h4 id="4-移除默认点击框"><a href="#4-移除默认点击框" class="headerlink" title="4.移除默认点击框"></a>4.移除默认点击框</h4><p>有些网页会有默认的点击反馈色块，我们需要删除它：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">*<span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#e0e0e0</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  -webkit-tap-highlight-<span class="attribute">color</span>: transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-强制删除状态栏"><a href="#5-强制删除状态栏" class="headerlink" title="5.强制删除状态栏"></a>5.强制删除状态栏</h4><p>这个是强制删除状态栏，有些沉浸和隐藏仍然还是会有小黑条的，如果需要删除，我们使用以下代码：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> window=activity.getWindow()</span><br><span class="line">       <span class="comment">--适配屏幕</span></span><br><span class="line">       window.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION)</span><br><span class="line">       window.addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS).addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION)</span><br><span class="line">       <span class="comment">--去除空白 (删除状态栏后 Android11+)</span></span><br><span class="line">       window.getAttributes().layoutInDisplayCutoutMode=<span class="number">1</span></span><br><span class="line">       <span class="comment">--删除状态栏</span></span><br><span class="line">       window.setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);</span><br></pre></td></tr></table></figure>
<h4 id="6-遮罩动画函数"><a href="#6-遮罩动画函数" class="headerlink" title="6.遮罩动画函数"></a>6.遮罩动画函数</h4><p>我们可以插入一个遮罩动画，再配合离屏预加载，就可以完美无延迟载入</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">本模板由 壹影(JsHD调试器开发者)制作</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">在Fa2里面设置状态栏+顶栏渐变比较奇怪</span></span><br><span class="line"><span class="comment">特别注意：需要打开侧边栏才可以设置渐变哦~</span></span><br><span class="line"><span class="comment">建议关闭原有的悬浮球</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"><span class="comment">-- ****默认导入包****</span></span><br><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line"><span class="comment">-- ****不需要请删除****</span></span><br><span class="line"><span class="comment">--遮罩需要引入</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Color&quot;</span></span><br><span class="line"><span class="keyword">local</span> uiManager=this.uiManager</span><br><span class="line"><span class="keyword">local</span> appBar=uiManager.appBarLayout<span class="comment">--状态栏部分</span></span><br><span class="line"><span class="keyword">local</span> appfab=uiManager.FloatingActionButton</span><br><span class="line"><span class="comment">--侧滑=activity.findViewById(0x7f0900de)</span></span><br><span class="line"><span class="keyword">local</span> appdrv=uiManager.getDrawerRecyclerView()</span><br><span class="line"><span class="keyword">local</span> viewPager=uiManager.viewPager<span class="comment">--主题部分viewPager(0)</span></span><br><span class="line"><span class="comment">--local webView=uiManager.getCurrentFragment().getWebView()</span></span><br><span class="line"><span class="keyword">local</span> toolbar=uiManager.toolbar<span class="comment">--顶栏</span></span><br><span class="line">import <span class="string">&quot;android.graphics.drawable.GradientDrawable&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 渐变<span class="params">(left_jb,right_jb,id)</span></span></span><br><span class="line">  drawable = GradientDrawable(GradientDrawable.Orientation.TR_BL,&#123;</span><br><span class="line">    right_jb,<span class="comment">--右色</span></span><br><span class="line">    left_jb,<span class="comment">--左色</span></span><br><span class="line">  &#125;);</span><br><span class="line">  id.setBackgroundDrawable(drawable)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">渐变(<span class="number">0xFFFF6845</span>,<span class="number">0xFFFF2317</span>,appBar)<span class="comment">--渐变</span></span><br><span class="line"><span class="comment">--调用渐变函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-------遮罩动画---------</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 遮罩函数<span class="params">()</span></span></span><br><span class="line">    <span class="built_in">require</span><span class="string">&quot;import&quot;</span></span><br><span class="line">    import <span class="string">&quot;net.fusionapp.core.ui.fragment.WebInterface&quot;</span></span><br><span class="line">    <span class="keyword">local</span> uimanager=activity.uiManager</span><br><span class="line">    <span class="keyword">local</span> fragment=uimanager.currentFragment</span><br><span class="line">    layout=&#123;</span><br><span class="line">      FrameLayout,</span><br><span class="line">      layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">      layout_height=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">      <span class="comment">--你的界面布局</span></span><br><span class="line">      <span class="comment">--帧动画布局1</span></span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout,</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>,</span><br><span class="line">        layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">        layout_height=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">        background=<span class="string">&quot;#ff1d8ae7&quot;</span>;</span><br><span class="line">        id=<span class="string">&quot;qdy&quot;</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout,</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>,</span><br><span class="line">        layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">        layout_height=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">        background=<span class="string">&quot;#ff1d8ae7&quot;</span>,</span><br><span class="line">        gravity=<span class="string">&quot;center&quot;</span>,</span><br><span class="line">        id=<span class="string">&quot;qdt&quot;</span>,</span><br><span class="line">              &#123;</span><br><span class="line">                LinearLayout;</span><br><span class="line">                orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--重力属性</span></span><br><span class="line">                layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">                layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">                gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--默认居中</span></span><br><span class="line">                id=<span class="string">&quot;进度条布局&quot;</span>;</span><br><span class="line">                &#123;</span><br><span class="line">                  ProgressBar;<span class="comment">--默认圆圈</span></span><br><span class="line">                  id=<span class="string">&quot;进度条&quot;</span>;</span><br><span class="line">                &#125;;</span><br><span class="line">                &#123;</span><br><span class="line">                  TextView;<span class="comment">--文本控件</span></span><br><span class="line">                  layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--文本宽度</span></span><br><span class="line">                  layout_height=<span class="string">&#x27;50dp&#x27;</span>;<span class="comment">--文本高度</span></span><br><span class="line">                  id=<span class="string">&quot;qdwb&quot;</span>;</span><br><span class="line">                  gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--重力属性</span></span><br><span class="line">                  textColor=<span class="string">&#x27;#ffffff&#x27;</span>;<span class="comment">--文字颜色</span></span><br><span class="line">                  text=<span class="string">&quot;JsHD调试器&quot;</span>;<span class="comment">--显示的文字</span></span><br><span class="line">                  textSize=<span class="string">&#x27;18sp&#x27;</span>;<span class="comment">--文字大小</span></span><br><span class="line">                &#125;;</span><br><span class="line"></span><br><span class="line">               &#123;</span><br><span class="line">                  TextView;<span class="comment">--文本控件</span></span><br><span class="line">                  layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--文本宽度</span></span><br><span class="line">                  id=<span class="string">&quot;qdwb_1&quot;</span>;</span><br><span class="line">                  gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--重力属性</span></span><br><span class="line">                  textColor=<span class="string">&#x27;#ffffff&#x27;</span>;<span class="comment">--文字颜色</span></span><br><span class="line">                  text=<span class="string">&quot;JavaScript HTML DOM手机可视化调试器&quot;</span>;<span class="comment">--显示的文字</span></span><br><span class="line">                  textSize=<span class="string">&#x27;9sp&#x27;</span>;<span class="comment">--文字大小</span></span><br><span class="line">                &#125;;</span><br><span class="line">              &#125;;</span><br><span class="line">     </span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">        FrameLayout,<span class="comment">--帧布局</span></span><br><span class="line">        layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">        layout_height=<span class="string">&quot;fill&quot;</span>,       </span><br><span class="line">          &#123;</span><br><span class="line">          TextView;<span class="comment">--文本控件</span></span><br><span class="line">          layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--文本宽度</span></span><br><span class="line">          layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--文本高度</span></span><br><span class="line">          layout_marginBottom=<span class="string">&quot;15dp&quot;</span>;</span><br><span class="line">          gravity=<span class="string">&quot;center|bottom&quot;</span>;<span class="comment">--重力属性</span></span><br><span class="line">          textColor=<span class="string">&#x27;#ffffff&#x27;</span>;<span class="comment">--文字颜色</span></span><br><span class="line">          id=<span class="string">&quot;版权&quot;</span>;</span><br><span class="line">          text=<span class="string">&#x27;Copyright©Yyge.AllRights Reserved&#x27;</span>;<span class="comment">--显示的文字</span></span><br><span class="line">          textSize=<span class="string">&#x27;10sp&#x27;</span>;<span class="comment">--文字大小</span></span><br><span class="line">          </span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;<span class="comment">--帧布局</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">--activity.setContentView(loadlayout(layout))--存到破服务器一并搜索</span></span><br><span class="line">       viewPager.getParent().getParent().addView(loadlayout(layout))</span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">CircleButton</span><span class="params">(view,InsideColor,radiu)</span></span></span><br><span class="line">        drawable = GradientDrawable() </span><br><span class="line">        drawable.setShape(GradientDrawable.RECTANGLE) </span><br><span class="line">        drawable.setColor(InsideColor)</span><br><span class="line">        drawable.setCornerRadii(&#123;radiu,radiu,radiu,radiu,radiu,radiu,radiu,radiu&#125;);</span><br><span class="line">        view.setBackgroundDrawable(drawable)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">--状态栏,导航栏背景</span></span><br><span class="line">      activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS).setStatusBarColor(<span class="number">0xff1d8ae7</span>);</span><br><span class="line">      activity.getWindow().setNavigationBarColor(Color.parseColor(<span class="string">&quot;#ff1d8ae7&quot;</span>));</span><br><span class="line"></span><br><span class="line">          <span class="comment">--dialog1.getWindow().setBackgroundDrawable(ColorDrawable(0x00000000));</span></span><br><span class="line">          import <span class="string">&quot;android.graphics.PorterDuffColorFilter&quot;</span></span><br><span class="line">          import <span class="string">&quot;android.graphics.PorterDuff&quot;</span></span><br><span class="line">          进度条.IndeterminateDrawable.setColorFilter(PorterDuffColorFilter(<span class="number">0xffffffff</span>,PorterDuff.Mode.SRC_ATOP))</span><br><span class="line">        </span><br><span class="line">      <span class="function"><span class="keyword">function</span> 退出动画<span class="params">()</span></span></span><br><span class="line">          import <span class="string">&quot;android.view.animation.*&quot;</span><span class="comment">--animation动画</span></span><br><span class="line">          import <span class="string">&quot;android.view.animation.AccelerateInterpolator&quot;</span></span><br><span class="line">          import <span class="string">&quot;android.view.animation.RotateAnimation&quot;</span><span class="comment">--插值器</span></span><br><span class="line">          import <span class="string">&quot;android.view.animation.Animation&quot;</span></span><br><span class="line">          import <span class="string">&quot;android.view.animation.Animation$AnimationListener&quot;</span><span class="comment">--动画监听</span></span><br><span class="line">        <span class="comment">-- AccelerateInterpolator  先减速后加速</span></span><br><span class="line">        <span class="comment">-- AnticipateInterpolator  动画开始之前有回弹效果</span></span><br><span class="line">        <span class="comment">-- BounceInterpolator  结束回弹效果</span></span><br><span class="line">        <span class="comment">-- CycleInterpolator 跳一跳效果</span></span><br><span class="line">        <span class="comment">-- OvershootInterpolator 动画结束时向前弹一定距离再回到原来位置</span></span><br><span class="line">        <span class="comment">-- AccelerateDecelerateInterpolator  系统默认的动画效果，先加速后减速</span></span><br><span class="line">        <span class="comment">-- AnticipateOvershootInterpolator 开始之前向前甩，结束的时候向后甩</span></span><br><span class="line">        <span class="comment">-- DecelerateInterpolator  开始加速再减速</span></span><br><span class="line"></span><br><span class="line">        task(<span class="number">1000</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">          揭露动画一 = ViewAnimationUtils.createCircularReveal(qdt,activity.getWidth(),<span class="number">0</span>,Math.hypot(activity.getWidth(),activity.getHeight())/<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">          揭露动画一.setDuration(<span class="number">1000</span>)<span class="comment">--设置动画时间</span></span><br><span class="line">          揭露动画一.start()<span class="comment">--开始动画</span></span><br><span class="line">          揭露动画二 = ViewAnimationUtils.createCircularReveal(qdy,<span class="number">0</span>,activity.getHeight(),Math.hypot(activity.getWidth(),activity.getHeight())/<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">          揭露动画二.setDuration(<span class="number">1000</span>)<span class="comment">--设置动画时间</span></span><br><span class="line">          揭露动画二.start()<span class="comment">--开始动画</span></span><br><span class="line">          <span class="comment">--动画参考.setVisibility(8)</span></span><br><span class="line">          版权.setVisibility(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">          <span class="comment">--参考动画</span></span><br><span class="line">          animationSet = AnimationSet(<span class="literal">true</span>)<span class="comment">--定义动画变量,使用AnimationSet类，使该动画可加载多种动画</span></span><br><span class="line">          leave_dh1= AlphaAnimation(<span class="number">1</span>,<span class="number">0</span>);<span class="comment">--渐变动画</span></span><br><span class="line">          leave_dh1.setDuration(<span class="number">1000</span>);<span class="comment">--动画时长</span></span><br><span class="line">          leave_dh1.setFillAfter(<span class="literal">true</span>);<span class="comment">--动画终止时停留在最后一帧</span></span><br><span class="line">          animationSet.addAnimation(leave_dh1);<span class="comment">--添加动画</span></span><br><span class="line"></span><br><span class="line">          版权.clearAnimation();<span class="comment">--这个不可以删 用于整合两个动画二次播放动画</span></span><br><span class="line">          版权.setAnimation(animationSet);<span class="comment">--id控件加载动画</span></span><br><span class="line"></span><br><span class="line">          animationSet.setAnimationListener(AnimationListener&#123;<span class="comment">--动画监听</span></span><br><span class="line">            onAnimationStart=<span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="comment">--animationSet动画开始时执行</span></span><br><span class="line">            <span class="keyword">end</span>,</span><br><span class="line">            onAnimationEnd=<span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="comment">--animationSet动画结束时执行</span></span><br><span class="line">              qdt.setVisibility(<span class="number">8</span>)</span><br><span class="line">              qdy.setVisibility(<span class="number">8</span>)</span><br><span class="line">              版权.setVisibility(<span class="number">8</span>)</span><br><span class="line">              <span class="comment">--q.setVisibility(8)</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">          &#125;)</span><br><span class="line">        <span class="keyword">end</span>)</span><br><span class="line">      <span class="keyword">end</span><span class="comment">--揭露动画--退出动画结束</span></span><br><span class="line">      </span><br><span class="line">      渐变(<span class="number">0xFFFF6845</span>,<span class="number">0xFFFF2317</span>,qdy) </span><br><span class="line">      渐变(<span class="number">0xFFFF6845</span>,<span class="number">0xFFFF2317</span>,qdt) </span><br><span class="line"></span><br><span class="line">      进度条布局.setVisibility(View.VISIBLE)<span class="comment">--显示控件</span></span><br><span class="line">     <span class="comment">-- 进度条.IndeterminateDrawable.setColorFilter(PorterDuffColorFilter(0xffffff,PorterDuff.Mode.SRC_ATOP))</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span> 强制输入框<span class="params">(标题,消息,积极按钮名称)</span></span></span><br><span class="line">        对话框()</span><br><span class="line">        .设置标题(标题)</span><br><span class="line">        .设置消息(消息)</span><br><span class="line">        .设置积极按钮(积极按钮名称,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">           <span class="built_in">loadstring</span>(<span class="string">[[return (canoffline or 退出程序())]]</span>)()</span><br><span class="line">        <span class="keyword">end</span>)</span><br><span class="line">        .setCancelable(<span class="literal">false</span>)<span class="comment">--禁用返回键</span></span><br><span class="line">        .显示()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">退出动画()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-------遮罩动画---------</span></span><br><span class="line">遮罩函数()</span><br></pre></td></tr></table></figure>
<h2 id="五-本地更改网页字体"><a href="#五-本地更改网页字体" class="headerlink" title="五.本地更改网页字体"></a>五.本地更改网页字体</h2><p>更改网页字体的目的是如果你的APP设置了自定义字体，那么你的网页尽可能的也需要使用相应的字体。字体不需要外链，<strong>直接读取APP内本地的字体文件</strong>即可，如果你的H5页面比较多，如果按照传统路径会增加大量的空间和重复字体文件，通过<strong>相对路径</strong>，实现所有本地网页加载同一个目录下的文件。</p>
<table style="width:100%;margin:0 auto;border-collapse:collapse;">
        <thead>
            <tr>
                <th style="border:1px solid #ccc;padding:8px;text-align:center;">路径写法</th>
                <th style="border:1px solid #ccc;padding:8px;text-align:center;">含义说明</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="border:1px solid #ccc;padding:8px;text-align:center;">test.html</td>
                <td style="border:1px solid #ccc;padding:8px;text-align:center;">此页面在当前页面所在目录下</td>
            </tr>
            <tr>
                <td style="border:1px solid #ccc;padding:8px;text-align:center;">./test.html</td>
                <td style="border:1px solid #ccc;padding:8px;text-align:center;">此页面在当前页面所在目录下，与直接写文件名含义相同</td>
            </tr>
            <tr>
                <td style="border:1px solid #ccc;padding:8px;text-align:center;">/test.html</td>
                <td style="border:1px solid #ccc;padding:8px;text-align:center;">此页面在网站根目录下</td>
            </tr>
            <tr>
                <td style="border:1px solid #ccc;padding:8px;text-align:center;">../test.html</td>
                <td style="border:1px solid #ccc;padding:8px;text-align:center;">此页面在当前页面的上一级目录下</td>
            </tr>
            <tr>
                <td style="border:1px solid #ccc;padding:8px;text-align:center;">../../test.html</td>
                <td style="border:1px solid #ccc;padding:8px;text-align:center;">此页面在当前页面的上一级的上一级目录下（即上两级目录下），每增加一级上级目录，就增加一个../</td>
            </tr>
            <tr>
                <td style="border:1px solid #ccc;padding:8px;text-align:center;">../web/test.html</td>
                <td style="border:1px solid #ccc;padding:8px;text-align:center;">此页面在当前页面上一级目录的web子目录下</td>
            </tr>
        </tbody>
    </table>

<p>下面css代码放进html即可，这个实例的路径说明一下，字体font.ttf放在了<strong>工程根目录</strong>，这个css代码对应的html路径在<strong>子页面目录</strong>，即需要<strong>往上两级</strong>去加载文件，也就是..&#x2F;..&#x2F;</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;ziti&#x27;</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;../../font.ttf&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;truetype&#x27;</span>);</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;ziti&#x27;</span>, sans-serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="六-浏览页自定义布局"><a href="#六-浏览页自定义布局" class="headerlink" title="六.浏览页自定义布局"></a>六.浏览页自定义布局</h2><h4 id="1-第一种"><a href="#1-第一种" class="headerlink" title="1.第一种"></a>1.第一种</h4><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setContentView</span><span class="params">(h)</span></span></span><br><span class="line">  <span class="keyword">local</span> args=&#123;h&#125;</span><br><span class="line">  <span class="keyword">local</span> list=<span class="built_in">table</span>.clone(args)</span><br><span class="line">  <span class="built_in">table</span>.<span class="built_in">foreach</span>(list,<span class="function"><span class="keyword">function</span><span class="params">(k,v)</span></span></span><br><span class="line">    list[k]=luajava.instanceof(v,View)<span class="keyword">and</span> v <span class="keyword">or</span> loadlayout(v)<span class="comment">--加载布局</span></span><br><span class="line">    <span class="keyword">local</span> webView=this.uiManager.getFragment(k<span class="number">-1</span>).webView<span class="comment">--获取浏览器控件( k-1 是网页的页面，可以自己改，注意不能没有浏览页)</span></span><br><span class="line">    webView.setVisibility(<span class="number">8</span>)<span class="comment">--隐藏浏览器控件</span></span><br><span class="line">    webView.parent.addView(list[k])<span class="comment">--设置布局</span></span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">layout=&#123;</span><br><span class="line">  LinearLayout,</span><br><span class="line">  layout_width=<span class="number">-1</span>,</span><br><span class="line">  layout_height=<span class="number">-1</span>,</span><br><span class="line">  gravity=<span class="string">&quot;center&quot;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    Button,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">setContentView(layout)<span class="comment">--调用方法</span></span><br></pre></td></tr></table></figure>

<h4 id="2-第二种"><a href="#2-第二种" class="headerlink" title="2.第二种"></a>2.第二种</h4><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> layout=<span class="comment">--这里写布局，有几个页面就需要添加几个空白浏览页(about:blank)</span></span><br><span class="line">activity.uiManager.getFragment(<span class="number">0</span>).view.removeAllViews().addView(loadlayout(layout))</span><br><span class="line"><span class="comment">--lua布局对应fa自带浏览页 0就是第一个浏览页(需要开启全部离屏预加载)</span></span><br></pre></td></tr></table></figure>

<h4 id="3-第三种"><a href="#3-第三种" class="headerlink" title="3.第三种"></a>3.第三种</h4><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> layout=<span class="comment">--这里写布局，有几个页面就需要添加几个空白浏览页(about:none)</span></span><br><span class="line"><span class="comment">--上面的layout和下面括号里的layout对应,添加多个请有相应的修改。</span></span><br><span class="line">this.uiManager.getFragment(<span class="number">0</span>).view.addView(loadlayout(layout))</span><br><span class="line"><span class="comment">--lua布局对应fa自带浏览页 0就是第一个浏览页</span></span><br></pre></td></tr></table></figure>
<p>补充这个自定义布局是为了应对有多个浏览页时，例如第一个浏览页用原生布局，第二个浏览页用HTML布局等等</p>
]]></content>
      <categories>
        <category>软件开发</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>软件</tag>
        <tag>Android</tag>
        <tag>FusionApp</tag>
      </tags>
  </entry>
  <entry>
    <title>Vercel部署Twikoo评论系统保姆级教程</title>
    <url>/posts/29ab0692.html</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Hexo作为静态博客，访客无法直接评论，为解决这一问题，添加一个合适的评论系统很有必要。我推荐使用<strong>twikoo</strong>，它部署方式多样，官方文档也极为详尽，便于操作。</p>
<p>我之前写过一篇通过 docker 部署 Twikoo 评论系统的文章，不过那种方式需要用到自己的服务器。这里考虑到没有服务器的朋友，<b>利用 Vercel 来免费部署Twikoo</b></p>
<div class="tab-item-content active" id="link-3">
    <a class="tag-link" href="https://twikoo.js.org/backend.html#vercel-%E9%83%A8%E7%BD%B2" target="_blank">
        <div class="tag-link-tips">
            引用站外链接
        </div>
        <div class="tag-link-bottom">
            <div class="tag-link-left">
                <i class="solitude fas fa-link"></i>
            </div>
            <div class="tag-link-right">
                <div class="tag-link-title">
                    Twikoo 文档
                </div>
                <div class="tag-link-sitename">
                    Vercel 部署 | Twikoo 文档
                </div>
            </div>
            <i class="solitude fas fa-chevron-right"></i>
        </div>
    </a>
</div>

<h2 id="一-创建MongoDB数据库"><a href="#一-创建MongoDB数据库" class="headerlink" title="一.创建MongoDB数据库"></a>一.创建MongoDB数据库</h2><p>MongoDB Atlas是MongoDB Inc.推出的一项便捷的MongoDB数据库托管服务。其免费套餐能够让用户<strong>永久享有512MB的数据库</strong>空间，对于存储Twikoo评论数据而言，这个容量完全足够。</p>
<h4 id="1-注册MongDB账号"><a href="#1-注册MongDB账号" class="headerlink" title="1.注册MongDB账号"></a>1.注册MongDB账号</h4><p>接下来在MongoDB Atlas注册账号：</p>
<div class="tab-item-content active" id="link-3">
    <a class="tag-link" href="https://www.mongodb.com/cloud/atlas/register" target="_blank">
        <div class="tag-link-tips">
            引用站外链接
        </div>
        <div class="tag-link-bottom">
            <div class="tag-link-left">
                <i class="solitude fas fa-link"></i>
            </div>
            <div class="tag-link-right">
                <div class="tag-link-title">
                    MongoDB
                </div>
                <div class="tag-link-sitename">
                     MongoDB AtLas账号注册页面
                </div>
            </div>
            <i class="solitude fas fa-chevron-right"></i>
        </div>
    </a>
</div>

<h4 id="2-购买免费Free套餐"><a href="#2-购买免费Free套餐" class="headerlink" title="2.购买免费Free套餐"></a>2.购买免费Free套餐</h4><p>选择<b>香港（Hong Kong）</b>就可以了，运营商<strong>AWS</strong>、Azure、Google随便，香港能选择就行，然后创建即可。<br><img src="/img/vercel/db1.png" alt="购买免费Free套餐"></p>
<h4 id="3-创建数据库用户"><a href="#3-创建数据库用户" class="headerlink" title="3.创建数据库用户"></a>3.创建数据库用户</h4><p>接下来我们创建数据库用户，在<b>Database Access</b>页面点击<strong>Add New Database User</strong>（create database user）创建数据库用户。<br><img src="/img/vercel/db2.png" alt="创建数据库用户"></p>
<h4 id="4-添加Network-Access"><a href="#4-添加Network-Access" class="headerlink" title="4.添加Network Access"></a>4.添加Network Access</h4><p>紧接着，进入<b>Network Access</b> 页面，点击<strong>Add IP Address</strong>来添加网络白名单。由于 Vercel 的出口地址并非固定不变，为确保能够正常连接，我们需要在<strong>Access List Entry</strong>中输入<code>0.0.0.0/0</code>，以此来允许所有 IP 地址进行连接。<br><img src="/img/vercel/db3.png" alt="添加Network Access"></p>
<h4 id="5-获取数据库连接字符串"><a href="#5-获取数据库连接字符串" class="headerlink" title="5.获取数据库连接字符串"></a>5.获取数据库连接字符串</h4><p>点击Connect，连接方式选择Drivers<br><img src="/img/vercel/db4.png" alt="Drivers"></p>
<p>然后你就得到了一串字符串，复制这个字符串<br><img src="/img/vercel/db5.png" alt="复制字符串"></p>
<p>连接字符串至关重要，它囊括了连接至MongoDB数据库的全部必要信息。一旦该字符串不慎泄露，后果将十分严重。因此，<b>务必妥善保管</b>好这一连接字符串，在后续对Twikoo进行部署时，还需要将其准确填入到相应的部署平台中。  </p>
<p>下面只是例子，必须复制你平台获取的，这个例子无效。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mongodb+srv://....:你的数据库密码@cluster0.zzsmj.mongodb.net/?retryWrites=true&amp;w=majority&amp;appName=Cluster0</span><br></pre></td></tr></table></figure>
<p>复制数据库连接字符串之后，将连接字符串中的<code>&lt;password&gt;</code>修改为你创建的数据库密码，修改后的就是之后要用到的。到这里MongDB的就完成了。</p>
<h2 id="二-Vercel部署Twikoo"><a href="#二-Vercel部署Twikoo" class="headerlink" title="二.Vercel部署Twikoo"></a>二.Vercel部署Twikoo</h2><h4 id="1-注册Vercel账号"><a href="#1-注册Vercel账号" class="headerlink" title="1.注册Vercel账号"></a>1.注册Vercel账号</h4><p>注意，这里注册非常严苛，你可以选择Github注册，也可以邮箱注册，如果注册失败那就是你的邮箱不符合要求，<b>国内邮箱比如qq.com是不行的</b>，解决办法是更改Github的邮箱为国际邮箱。也可以直接用国际邮箱注册，推荐用<b>@outlook.com</b>，按要求注册就行了。</p>
<div class="tab-item-content active" id="link-3">
    <a class="tag-link" href="https://vercel.com/" target="_blank">
        <div class="tag-link-tips">
            引用站外链接
        </div>
        <div class="tag-link-bottom">
            <div class="tag-link-left">
                <i class="solitude fas fa-link"></i>
            </div>
            <div class="tag-link-right">
                <div class="tag-link-title">
                    Vercel
                </div>
                <div class="tag-link-sitename">
                     Vercel官网注册
                </div>
            </div>
            <i class="solitude fas fa-chevron-right"></i>
        </div>
    </a>
</div>

<h4 id="2-一键部署"><a href="#2-一键部署" class="headerlink" title="2.一键部署"></a>2.一键部署</h4><p>前提是你注册成功了，并且成功登录了，然后点击下面链接，进行一键部署。<b>这里仓库不用提前准备，必须是不存在的仓库名才行</b></p>
<div class="tab-item-content active" id="link-3">
    <a class="tag-link" href="https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Ftwikoojs%2Ftwikoo%2Ftree%2Fmain%2Fsrc%2Fserver%2Fvercel-min" target="_blank">
        <div class="tag-link-tips">
            引用站外链接
        </div>
        <div class="tag-link-bottom">
            <div class="tag-link-left">
                <i class="solitude fas fa-link"></i>
            </div>
            <div class="tag-link-right">
                <div class="tag-link-title">
                    Vercel
                </div>
                <div class="tag-link-sitename">
                     Twikoo一键部署
                </div>
            </div>
            <i class="solitude fas fa-chevron-right"></i>
        </div>
    </a>
</div>
<img src="/img/vercel/vc1.png" alt="Twikoo一键部署">

<h4 id="3-配置环境变量"><a href="#3-配置环境变量" class="headerlink" title="3.配置环境变量"></a>3.配置环境变量</h4><p>选择新建的Twikoo项目，进入<code>Settings -&gt; Environment Variables</code>，添加环境变量<code>MONGODB_URI</code>，值为前面的MongoDB数据库连接字符串（注意替换<code>&lt;Password&gt;</code>）。<br><img src="/img/vercel/vc2.png" alt="配置环境变量"></p>
<h4 id="4-Redeploy"><a href="#4-Redeploy" class="headerlink" title="4.Redeploy"></a>4.Redeploy</h4><p>进入Deployments，进行Redeploy，等待重新部署完毕。<br><img src="/img/vercel/vc3.png" alt="Redeploy"></p>
<p>等待重新部署完成后，进入Project，查看Overview或者点击visit，看见<strong>Twikoo云函数运行正常</strong>的提示，说明部署成功<br><img src="/img/vercel/vc5.png" alt="Redeploy"></p>
<p>Vercel Domains（包含 https:&#x2F;&#x2F; 前缀，例如 <a href="https://xxx.vercel.app)即为环境id,也就是envid/">https://xxx.vercel.app）即为环境ID，也就是envId</a></p>
<h4 id="5-绑定自定义域名"><a href="#5-绑定自定义域名" class="headerlink" title="5.绑定自定义域名"></a>5.绑定自定义域名</h4><ul>
<li><p>在自有域名添加解析，选择 CNAME 类型转发，记录值填写为：<code>cname.vercel-dns.com</code></p>
</li>
<li><p>然后在第四步的云函数运行正常页面中点击右侧的Domains菜单项，输入你自己定义的域名点击<strong>Add</strong>按钮即可。</p>
</li>
</ul>
<img src="/img/vercel/vc6.png" alt="自定义Domains">

<p>这一步一定要做，Vercel默认的你拿来直接用，那就太慢了，绑定成功后，访问自定义Domains，看到如下代码，说明成功</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="number">100</span><span class="punctuation">,</span><span class="attr">&quot;message&quot;</span><span class="punctuation">:</span><span class="string">&quot;Twikoo 云函数运行正常，请参考 https://twikoo.js.org/frontend.html 完成前端的配置&quot;</span><span class="punctuation">,</span><span class="attr">&quot;version&quot;</span><span class="punctuation">:</span><span class="string">&quot;1.6.41&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="三-解决邮箱推送异常"><a href="#三-解决邮箱推送异常" class="headerlink" title="三.解决邮箱推送异常"></a>三.解决邮箱推送异常</h2><p>在vercel部署twikoo后收不到评论邮件通知问题，这个我也遇到过，原因在于新部署的Vercel环境默认启用了<strong>Vercel Authentication</strong>，该功能会导致 Twikoo 邮件通知失败。<br>解决办法就是进入<code>Settings-Deployment Protection</code>，设置<code>Vercel Authentication</code>为<strong>Disabled</strong>，并 Save。<br><img src="/img/vercel/vc4.png" alt="关闭按钮并保存"></p>
<h2 id="四-Hexo配置"><a href="#四-Hexo配置" class="headerlink" title="四.Hexo配置"></a>四.Hexo配置</h2><p>这里，每个主题都不一样，但也都大差不差，评论类型选择twikoo，然后true开启，配置你的<strong>envId</strong>就可以了，具体怎么弄结合实际情况吧。</p>
<figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># Twikoo</span></span><br><span class="line"><span class="attr">twikoo:</span></span><br><span class="line">  <span class="attr">envId:</span>  <span class="comment"># 填入你绑定的自定义域名就可以了</span></span><br><span class="line">  <span class="attr">region:</span> </span><br><span class="line">  <span class="attr">path:</span> </span><br></pre></td></tr></table></figure>

<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>经过上面的一顿折腾，我们终于完成了借助 Vercel 部署 Twikoo 评论系统以及在 MongoDB Atlas 搭建数据库的流程。这一系列步骤虽然有些繁琐，但当你看到评论系统能够顺利运行时，我们的一切努力便有了意义。</p>
]]></content>
      <categories>
        <category>技术教程</category>
      </categories>
      <tags>
        <tag>Vercel</tag>
        <tag>Twikoo</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo博客与主题部署记录，以备日后迁移</title>
    <url>/posts/7b5e.html</url>
    <content><![CDATA[<h2 id="小插曲"><a href="#小插曲" class="headerlink" title="小插曲"></a>小插曲</h2><p>在今天重装博客的时候，遇到了Hexo 部署时 Git 权限识别的问题，核心原因是 Git 检测到 .deploy_git 目录的文件所有者和当前运行命令的用户不一致，Git 出于安全考虑拒绝了操作。<br><img src="/img/peitu/Git-error.jpg" alt="报错详情"><br>在当前的 PowerShell 终端里，执行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global --add safe.directory E:/baiyiblog/.deploy_git</span><br></pre></td></tr></table></figure>
<p>这个命令的作用是告诉 Git：把E:&#x2F;baiyiblog&#x2F;.deploy_git这个目录加入全局的 “安全目录” 列表，允许当前用户操作它，解决权限识别的问题。</p>
<h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init</span><br><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure>
<h2 id="安装部署插件"><a href="#安装部署插件" class="headerlink" title="安装部署插件"></a>安装部署插件</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>配置部署信息</strong></li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/yourusername/yourusername.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure>

<h2 id="安装主题"><a href="#安装主题" class="headerlink" title="安装主题"></a>安装主题</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b main https://github.com/everfu/hexo-theme-solitude.git themes/solitude</span><br></pre></td></tr></table></figure>
<h2 id="永久链接简短格式"><a href="#永久链接简短格式" class="headerlink" title="永久链接简短格式"></a>永久链接简短格式</h2><ul>
<li><strong>安装插件</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>_config.yml更改与添加</strong></li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 更改permalink:</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">posts/:abbrlink.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加以下内容</span></span><br><span class="line"><span class="comment"># 文章链接转数字或字母：https://github.com/rozbo/hexo-abbrlink</span></span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line">    <span class="attr">alg:</span> <span class="string">crc16</span>   <span class="comment">#算法： crc16(default) and crc32</span></span><br><span class="line">    <span class="attr">rep:</span> <span class="string">hex</span>     <span class="comment">#进制： dec(default) and hex: dec #输出进制：十进制和十六进制，默认为10进制。丨dec为十进制，hex为十六进制</span></span><br></pre></td></tr></table></figure>

<h2 id="local本地搜索"><a href="#local本地搜索" class="headerlink" title="local本地搜索"></a>local本地搜索</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>
<h2 id="字数统计"><a href="#字数统计" class="headerlink" title="字数统计"></a>字数统计</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-wordcount --save</span><br></pre></td></tr></table></figure>

<h2 id="Post-Front-matter"><a href="#Post-Front-matter" class="headerlink" title="Post Front-matter"></a>Post Front-matter</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span>       <span class="comment">#文章标题</span></span><br><span class="line"><span class="attr">date:</span>        <span class="comment">#创建日期</span></span><br><span class="line"><span class="attr">updated:</span>     <span class="comment">#更新日期</span></span><br><span class="line"><span class="attr">tags:</span>        <span class="comment">#标签</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">标签名称</span></span><br><span class="line"><span class="attr">categories:</span>  <span class="comment">#分类</span></span><br><span class="line"><span class="attr">description:</span> <span class="comment">#文章描述</span></span><br><span class="line"><span class="attr">comment:</span>     <span class="comment">#显示文章评论，默认开启</span></span><br><span class="line"><span class="attr">cover:</span>       <span class="comment">#文章封面，某些特殊文章必须</span></span><br><span class="line"><span class="attr">avatar:</span>      <span class="comment">#作者头像</span></span><br><span class="line"><span class="attr">author:</span>      <span class="comment">#作者名称</span></span><br><span class="line"><span class="attr">reprint:</span>     <span class="comment">#是否为转载，默认为 false</span></span><br><span class="line"><span class="attr">desc:</span>        <span class="comment">#转载说明</span></span><br><span class="line"><span class="attr">katex:</span>       <span class="comment">#启用 katex</span></span><br><span class="line"><span class="attr">aside:</span>       <span class="comment">#侧边栏</span></span><br><span class="line"><span class="attr">ai_text:</span>     <span class="comment">#本地AI摘要</span></span><br><span class="line"><span class="attr">recommend:</span> <span class="literal">true</span> <span class="comment">#首页轮播推荐</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>

<h2 id="根目录的-config-yml"><a href="#根目录的-config-yml" class="headerlink" title="根目录的 _config.yml"></a>根目录的 _config.yml</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment">## Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">白衣INK</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;不尚虚华，自成万壑千峰&#x27;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&#x27;这里是白衣INK的个人博客，分享技术、生活感悟与创作灵感，探索不尚虚华却自成万壑千峰的精彩世界。&#x27;</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">&#x27;技术分享,软件开发,创作灵感,白衣INK&#x27;</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">白衣</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh</span> <span class="comment"># 这里应该是 &#x27;zh&#x27; 代表中文，而不是 &#x27;zn&#x27;</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">Asia/Shanghai</span> <span class="comment"># 设置时区为上海，根据实际情况修改</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://baiyi.ink</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">posts/:abbrlink.html</span></span><br><span class="line"><span class="comment">#permalink: :year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"><span class="attr">pretty_urls:</span></span><br><span class="line">  <span class="attr">trailing_index:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span></span><br><span class="line">  <span class="attr">trailing_html:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="attr">source_dir:</span> <span class="string">source</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public</span></span><br><span class="line"><span class="attr">tag_dir:</span> <span class="string">tags</span></span><br><span class="line"><span class="attr">archive_dir:</span> <span class="string">archives</span></span><br><span class="line"><span class="attr">category_dir:</span> <span class="string">categories</span></span><br><span class="line"><span class="attr">code_dir:</span> <span class="string">downloads/code</span></span><br><span class="line"><span class="attr">i18n_dir:</span> <span class="string">:lang</span></span><br><span class="line"><span class="attr">skip_render:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing</span></span><br><span class="line"><span class="attr">new_post_name:</span> <span class="string">:title.md</span> <span class="comment"># File name of new posts</span></span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span></span><br><span class="line"><span class="attr">titlecase:</span> <span class="literal">false</span> <span class="comment"># Transform title into titlecase</span></span><br><span class="line"><span class="attr">external_link:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># Open external links in new tab</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span> <span class="comment"># Apply to the whole site</span></span><br><span class="line">  <span class="attr">exclude:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="attr">filename_case:</span> <span class="number">0</span></span><br><span class="line"><span class="attr">render_drafts:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">syntax_highlighter:</span> <span class="string">highlight.js</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">true</span>    <span class="comment">#false</span></span><br><span class="line">  <span class="attr">hljs:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">prismjs:</span></span><br><span class="line">  <span class="attr">preprocess:</span> <span class="literal">true</span>     <span class="comment">#false</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span>    <span class="comment">#false</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Home page setting</span></span><br><span class="line"><span class="comment"># path: Root path for your blogs index page. (default = &#x27;&#x27;)</span></span><br><span class="line"><span class="comment"># per_page: Posts displayed per page. (0 = disable pagination)</span></span><br><span class="line"><span class="comment"># order_by: Posts order. (Order by date descending by default)</span></span><br><span class="line"><span class="attr">index_generator:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line"><span class="attr">default_category:</span> <span class="string">uncategorized</span></span><br><span class="line"><span class="attr">category_map:</span></span><br><span class="line"><span class="attr">tag_map:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Metadata elements</span></span><br><span class="line"><span class="comment">## https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta</span></span><br><span class="line"><span class="attr">meta_generator:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Date / Time format</span></span><br><span class="line"><span class="comment">## Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="comment">## You can customize the date format as defined in</span></span><br><span class="line"><span class="comment">## http://momentjs.com/docs/#/displaying/format/</span></span><br><span class="line"><span class="attr">date_format:</span> <span class="string">YYYY-MM-DD</span></span><br><span class="line"><span class="attr">time_format:</span> <span class="string">HH:mm:ss</span></span><br><span class="line"><span class="comment">## updated_option supports &#x27;mtime&#x27;, &#x27;date&#x27;, &#x27;empty&#x27;</span></span><br><span class="line"><span class="attr">updated_option:</span> <span class="string">&#x27;mtime&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment">## Set per_page to 0 to disable pagination</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">pagination_dir:</span> <span class="string">page</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Include / Exclude file(s)</span></span><br><span class="line"><span class="comment">## include:/exclude: options only apply to the &#x27;source/&#x27; folder</span></span><br><span class="line"><span class="attr">include:</span></span><br><span class="line"><span class="attr">exclude:</span></span><br><span class="line"><span class="attr">ignore:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="comment">#theme: solitude</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">solitude</span></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:baiyinet/blog.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 文章链接转数字或字母：https://github.com/rozbo/hexo-abbrlink</span></span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line">  <span class="attr">alg:</span> <span class="string">crc16</span>   <span class="comment">#算法： crc16(default) and crc32</span></span><br><span class="line">  <span class="attr">rep:</span> <span class="string">hex</span>     <span class="comment">#进制： dec(default) and hex: dec #输出进制：十进制和十六进制，默认为10进制。丨dec为十进制，hex为十六进制</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="主题的-config-yml"><a href="#主题的-config-yml" class="headerlink" title="主题的 _config.yml"></a>主题的 _config.yml</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ---------------------------</span></span><br><span class="line"><span class="comment"># Hexo Theme Solitude</span></span><br><span class="line"><span class="comment"># Github: https://github.com/everfu/hexo-theme-solitude</span></span><br><span class="line"><span class="comment"># Guide: https://solitude.js.org</span></span><br><span class="line"><span class="comment">### Basic configuration</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Site information</span></span><br><span class="line"><span class="comment"># 网站信息</span></span><br><span class="line"><span class="attr">site:</span></span><br><span class="line">  <span class="attr">name:</span></span><br><span class="line">    <span class="attr">class:</span> <span class="string">text</span> <span class="comment"># text / i_class / img</span></span><br><span class="line">    <span class="attr">custom:</span> <span class="string">白衣INK</span> <span class="comment"># Solitude / fas fa-ghost / /img/pwa/favicon.ico</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">/img/pwa/favicon.png</span> <span class="comment"># Site icon / 网站图标</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Navigation bar</span></span><br><span class="line"><span class="comment"># 导航栏</span></span><br><span class="line"><span class="attr">nav:</span></span><br><span class="line">  <span class="comment"># Left Box</span></span><br><span class="line">  <span class="comment"># 左侧盒子</span></span><br><span class="line">  <span class="attr">group:</span></span><br><span class="line">     <span class="string">网站:</span> <span class="comment"># name</span></span><br><span class="line">       <span class="string">主页:</span> <span class="string">https://www.deepsea.xin/</span> <span class="string">||</span> <span class="string">https://www.deepsea.xin/img/logo.png</span> <span class="comment"># name: url || icon</span></span><br><span class="line">       <span class="string">博客:</span> <span class="string">http://blog.deepsea.xin/</span> <span class="string">||</span> <span class="string">https://www.deepsea.xin/img/logo.png</span> <span class="comment"># name: url || icon</span></span><br><span class="line">  <span class="comment"># Menu</span></span><br><span class="line">  <span class="comment"># 菜单</span></span><br><span class="line">  <span class="attr">menu:</span></span><br><span class="line">    <span class="comment"># 首页: / # name: link</span></span><br><span class="line">     <span class="string">文库:</span> <span class="comment"># name</span></span><br><span class="line">       <span class="string">全部文章:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-folder-closed</span> <span class="comment"># item name: link || icon</span></span><br><span class="line">       <span class="string">全部分类:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-clone</span></span><br><span class="line">       <span class="string">全部标签:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line">     <span class="string">友链:</span></span><br><span class="line">       <span class="string">朋友圈:</span> <span class="string">/moments/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-wifi</span></span><br><span class="line">       <span class="string">友情链接:</span> <span class="string">/links/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-user-group</span></span><br><span class="line">       <span class="string">宝藏博主:</span> <span class="string">javascript:travelling()</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-gift</span></span><br><span class="line">     <span class="string">关于:</span></span><br><span class="line">       <span class="string">我的装备:</span> <span class="string">/equipment/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-laptop</span></span><br><span class="line">       <span class="string">在线工具:</span> <span class="string">/tlink/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-toolbox</span></span><br><span class="line">       <span class="string">音乐馆:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Right button</span></span><br><span class="line">  <span class="comment"># 右侧按钮</span></span><br><span class="line">  <span class="attr">right:</span></span><br><span class="line">    <span class="attr">random:</span> <span class="literal">true</span> <span class="comment"># Random article / 随机文章按钮</span></span><br><span class="line">    <span class="attr">custom:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">开往随机一个博客</span> <span class="comment"># 名字</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">https://www.travellings.cn/go.html</span> <span class="comment"># 跳转链接</span></span><br><span class="line">        <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-train</span> <span class="comment"># 图标</span></span><br><span class="line">        <span class="attr">onclick:</span> <span class="comment"># 点击事件</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">travellings_button</span> <span class="comment"># id</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Home Top Banner</span></span><br><span class="line"><span class="comment"># 首页顶部</span></span><br><span class="line"><span class="attr">hometop:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">banner:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">不尚虚华，&lt;br&gt;自成万壑千峰。</span> <span class="comment"># 大字</span></span><br><span class="line">    <span class="attr">desc:</span></span><br><span class="line">       <span class="bullet">-</span> <span class="string">保持十年磨一剑的初心，</span></span><br><span class="line">       <span class="bullet">-</span> <span class="string">秉持简约不简单的设计理念，</span></span><br><span class="line">       <span class="bullet">-</span> <span class="string">致力于产品设计与交互体验。</span></span><br><span class="line">    <span class="attr">icon:</span></span><br><span class="line">       <span class="attr">HTML:</span> <span class="comment"># name</span></span><br><span class="line">         <span class="attr">img:</span> <span class="string">https://i.postimg.cc/vBWVnY8q/html.png</span> <span class="comment"># url</span></span><br><span class="line">         <span class="attr">color:</span> <span class="string">&quot;#e9572b&quot;</span> <span class="comment"># color</span></span><br><span class="line">       <span class="attr">JS:</span></span><br><span class="line">         <span class="attr">img:</span> <span class="string">https://i.postimg.cc/3N10Ltv2/js.png</span></span><br><span class="line">         <span class="attr">color:</span> <span class="string">&quot;#f7cb4f&quot;</span></span><br><span class="line">       <span class="attr">Docker:</span></span><br><span class="line">         <span class="attr">img:</span> <span class="string">https://i.postimg.cc/8Pk6Fg24/docker.png</span></span><br><span class="line">         <span class="attr">color:</span> <span class="string">&quot;#57b6e6&quot;</span></span><br><span class="line">       <span class="attr">Flutter:</span></span><br><span class="line">         <span class="attr">img:</span> <span class="string">https://i.postimg.cc/hPC7T3gB/flutter.png</span></span><br><span class="line">         <span class="attr">color:</span> <span class="string">&quot;#ffffff&quot;</span></span><br><span class="line">       <span class="attr">WebPack:</span></span><br><span class="line">         <span class="attr">img:</span> <span class="string">https://i.postimg.cc/dVLZBmtT/webpack.png</span></span><br><span class="line">         <span class="attr">color:</span> <span class="string">&quot;#2e3a41&quot;</span></span><br><span class="line">       <span class="attr">Git:</span></span><br><span class="line">         <span class="attr">img:</span> <span class="string">https://i.postimg.cc/nhgjwjCS/git.png</span></span><br><span class="line">         <span class="attr">color:</span> <span class="string">&quot;#df5b40&quot;</span></span><br><span class="line">  <span class="attr">group:</span></span><br><span class="line">     <span class="string">热门:</span> <span class="string">/tags/Fire/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-fire</span> <span class="string">||</span> <span class="string">linear-gradient(to</span> <span class="string">right,#f65,#ffbf37)</span></span><br><span class="line">     </span><br><span class="line">  <span class="attr">recommendList:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">sup:</span> <span class="string">置顶</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">白衣项目主页</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://www.deepsea.xin</span></span><br><span class="line">    <span class="attr">img:</span> <span class="string">https://baiyinet.oss-cn-beijing.aliyuncs.com/%E5%9B%BE%E7%89%87/%E4%B8%BB%E9%A1%B5.png?x-oss-process=style/baiyi</span></span><br><span class="line">    <span class="attr">color:</span> <span class="string">&quot;#abbafe&quot;</span></span><br><span class="line"><span class="comment"># Article Top Banner</span></span><br><span class="line"><span class="comment"># 文章推荐轮播图</span></span><br><span class="line"><span class="attr">carousel:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Aside</span></span><br><span class="line"><span class="comment"># 侧边栏</span></span><br><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="comment"># Values: about (info card), newestPost (latest article), allInfo (website information), newest_comment (latest comment)</span></span><br><span class="line">  <span class="comment"># 值: about(信息卡), newestPost(最新文章), allInfo(网站信息), newest_comment(最新评论)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Sticky: Fixed position / noSticky: Not fixed position</span></span><br><span class="line">  <span class="comment"># Sticky: 固定位置 / noSticky: 不固定位置</span></span><br><span class="line">  <span class="attr">home:</span> <span class="comment"># on the homepage</span></span><br><span class="line">    <span class="attr">noSticky:</span> <span class="string">&quot;about&quot;</span></span><br><span class="line">    <span class="attr">Sticky:</span> <span class="string">&quot;allInfo&quot;</span></span><br><span class="line">  <span class="attr">post:</span> <span class="comment"># on the article page</span></span><br><span class="line">    <span class="attr">noSticky:</span> <span class="string">&quot;about&quot;</span></span><br><span class="line">    <span class="attr">Sticky:</span> <span class="string">&quot;newestPost&quot;</span></span><br><span class="line">  <span class="attr">page:</span> <span class="comment"># on the page</span></span><br><span class="line">    <span class="attr">noSticky:</span> <span class="string">&quot;about&quot;</span></span><br><span class="line">    <span class="attr">Sticky:</span> <span class="string">&quot;newestPost,allInfo&quot;</span></span><br><span class="line">  <span class="comment"># 菜单栏位置(0: 左 1: 右)</span></span><br><span class="line">  <span class="attr">position:</span> <span class="number">1</span> <span class="comment"># Sidebar positioning(0: left 1: right)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line">  <span class="comment"># Information card</span></span><br><span class="line">  <span class="comment"># 信息卡</span></span><br><span class="line">  <span class="attr">my_card:</span></span><br><span class="line">    <span class="attr">author:</span></span><br><span class="line">      <span class="attr">img:</span> <span class="string">https://thirdqq.qlogo.cn/g?b=qq&amp;nk=2766521276&amp;s=640</span> <span class="comment"># url</span></span><br><span class="line">      <span class="attr">sticker:</span> <span class="comment"># url, 24x24 size</span></span><br><span class="line">    <span class="comment"># 介绍 / Introduction</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">不尚虚华，&lt;br&gt;自成万壑千峰。</span></span><br><span class="line">    <span class="comment"># 内容 / Content</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">欢迎来到白衣博客，秉持简约不简单的设计理念，致力于产品设计与交互体验。&lt;br&gt;&lt;br&gt;相信你一定可以在这里找到你想要的东西</span> </span><br><span class="line">    <span class="attr">state:</span></span><br><span class="line">      <span class="attr">morning:</span> <span class="string">早上好，新的一天开始了</span></span><br><span class="line">      <span class="attr">noon:</span> <span class="string">午餐时间</span></span><br><span class="line">      <span class="attr">afternoon:</span> <span class="string">下午好</span></span><br><span class="line">      <span class="attr">night:</span> <span class="string">早点休息</span></span><br><span class="line">      <span class="attr">goodnight:</span> <span class="string">晚安</span></span><br><span class="line">    <span class="attr">witty_words:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">🤖️</span> <span class="string">数码科技爱好者</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">🔍</span> <span class="string">分享与热心帮助</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">🏠</span> <span class="string">智能家居小能手</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">🔨</span> <span class="string">设计开发一条龙</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">🤝</span> <span class="string">专修交互与设计</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">🏃</span> <span class="string">脚踏实地行动派</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">🧱</span> <span class="string">团队小组发动机</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">💢</span> <span class="string">壮汉人狠话不多</span></span><br><span class="line">    <span class="comment"># social</span></span><br><span class="line">    <span class="comment"># 社交信息图标</span></span><br><span class="line">    <span class="attr">information:</span></span><br><span class="line">      <span class="attr">Github:</span> <span class="string">https://github.com/baiyinet</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-github</span> <span class="comment"># Name: link || icon</span></span><br><span class="line">      <span class="attr">QQ:</span> <span class="string">http://wpa.qq.com/msgrd?v=3&amp;uin=2766521276&amp;site=qq&amp;menu=yes</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-qq</span></span><br><span class="line">  <span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line">  <span class="comment"># article table of contents</span></span><br><span class="line">  <span class="comment"># 文章目录</span></span><br><span class="line">  <span class="attr">toc:</span></span><br><span class="line">    <span class="attr">post:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">page:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">vague:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line">  <span class="comment"># Tags</span></span><br><span class="line">  <span class="comment"># 标签</span></span><br><span class="line">  <span class="attr">tags:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">20</span> <span class="comment"># Number of tags displayed</span></span><br><span class="line">    <span class="comment"># Highlighted tags</span></span><br><span class="line">    <span class="attr">highlight_list:</span></span><br><span class="line">       <span class="bullet">-</span> <span class="string">Hexo</span></span><br><span class="line">  <span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line">  <span class="comment"># Site Info</span></span><br><span class="line">  <span class="comment"># 网站信息</span></span><br><span class="line">  <span class="attr">siteinfo:</span></span><br><span class="line">    <span class="comment"># Number of articles</span></span><br><span class="line">    <span class="comment"># 文章数量</span></span><br><span class="line">    <span class="attr">postcount:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Total number of words</span></span><br><span class="line">    <span class="comment"># 总字数</span></span><br><span class="line">    <span class="attr">wordcount:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># PV</span></span><br><span class="line">    <span class="attr">pv:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># UV</span></span><br><span class="line">   <span class="comment"># uv: true</span></span><br><span class="line">    <span class="comment"># Last update date</span></span><br><span class="line">    <span class="comment"># 最后更新日期</span></span><br><span class="line">    <span class="attr">updatetime:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Website creation time</span></span><br><span class="line">    <span class="comment"># 网站创建时间</span></span><br><span class="line">    <span class="attr">runtimeenable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Format: yyyy-MM-dd hh-mm-ss</span></span><br><span class="line">    <span class="comment"># 格式: yyyy-MM-dd hh-mm-ss</span></span><br><span class="line">    <span class="attr">runtime:</span> <span class="string">&quot;2025-01-15 00:00:00&quot;</span></span><br><span class="line">  <span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Page default settings</span></span><br><span class="line"><span class="comment"># 页面默认设置</span></span><br><span class="line"><span class="attr">page:</span></span><br><span class="line">  <span class="comment"># 404 page</span></span><br><span class="line">  <span class="comment"># 404 页面</span></span><br><span class="line">  <span class="attr">error:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Tags page</span></span><br><span class="line">  <span class="comment"># 标签页面</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Categories page</span></span><br><span class="line">  <span class="comment"># 分类页面</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># list: Sort List / 1: Follow HomeList</span></span><br><span class="line">  <span class="comment"># list: 排序列表 / 1: 跟随首页列表</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="number">0</span></span><br><span class="line">  <span class="comment"># Default value</span></span><br><span class="line">  <span class="comment"># 默认值</span></span><br><span class="line">  <span class="attr">default:</span></span><br><span class="line">    <span class="comment"># Default image when no cover is set</span></span><br><span class="line">    <span class="comment"># 未设置封面时的默认图片</span></span><br><span class="line">    <span class="attr">cover:</span></span><br><span class="line">      <span class="comment"># - /img/default.png # 默认图片 / default cover   不开</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Post default settings</span></span><br><span class="line"><span class="comment"># 文章默认设置</span></span><br><span class="line"><span class="attr">post:</span></span><br><span class="line">  <span class="attr">default:</span></span><br><span class="line">    <span class="comment"># Default image when no cover is set</span></span><br><span class="line">    <span class="comment"># 未设置封面时的默认图片</span></span><br><span class="line">    <span class="attr">cover:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/img/default.jpg</span></span><br><span class="line">      <span class="comment"># -  # 默认图片 / default cover</span></span><br><span class="line">    <span class="comment"># Location</span></span><br><span class="line">    <span class="comment"># 位置</span></span><br><span class="line">    <span class="attr">locate:</span> <span class="string">山东·泰安</span></span><br><span class="line">    <span class="comment"># Copyright</span></span><br><span class="line">    <span class="comment"># 版权</span></span><br><span class="line">    <span class="attr">copyright:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">author:</span> <span class="string">https://thirdqq.qlogo.cn/g?b=qq&amp;nk=2766521276&amp;s=640</span> <span class="comment"># url</span></span><br><span class="line">      <span class="comment"># License</span></span><br><span class="line">      <span class="comment"># 许可证</span></span><br><span class="line">      <span class="attr">license:</span> <span class="string">CC</span> <span class="string">BY-NC-SA</span> <span class="number">4.0</span></span><br><span class="line">      <span class="comment"># License link</span></span><br><span class="line">      <span class="comment"># 许可证链接</span></span><br><span class="line">      <span class="attr">licenurl:</span> <span class="string">https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans</span></span><br><span class="line">  <span class="comment"># Article Local AI</span></span><br><span class="line">  <span class="comment"># 文章本地AI</span></span><br><span class="line">  <span class="attr">ai:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">modelName:</span> <span class="string">白衣</span> <span class="string">GPT</span></span><br><span class="line">  <span class="comment"># Article meta information</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 其他可能的配置项</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 文章元信息</span></span><br><span class="line">  <span class="attr">meta:</span></span><br><span class="line">    <span class="comment"># Release date</span></span><br><span class="line">    <span class="comment"># 发布日期</span></span><br><span class="line">    <span class="attr">date:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Update date</span></span><br><span class="line">    <span class="comment"># 更新日期</span></span><br><span class="line">    <span class="attr">updated:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Location</span></span><br><span class="line">    <span class="comment"># 位置</span></span><br><span class="line">    <span class="attr">locate:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Number of words</span></span><br><span class="line">    <span class="comment"># 字数</span></span><br><span class="line">    <span class="attr">wordcount:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># uv</span></span><br><span class="line">    <span class="attr">readtime:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># pv</span></span><br><span class="line">    <span class="attr">pv:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Comment count</span></span><br><span class="line">    <span class="comment"># 评论数</span></span><br><span class="line">    <span class="attr">comment:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Reward</span></span><br><span class="line">  <span class="comment"># 打赏</span></span><br><span class="line">  <span class="attr">award:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">appreciators:</span> <span class="string">/about/</span> <span class="comment"># Reward page</span></span><br><span class="line">    <span class="comment"># Reward Title</span></span><br><span class="line">    <span class="comment"># 打赏标题</span></span><br><span class="line">    <span class="comment">#title: 感谢您的赞赏 # Thanks for your appreciation. / 感谢您的赞赏</span></span><br><span class="line">    <span class="comment">#desc: 由于您的支持，我才能够实现写作的价值。 # Because of your support, I realize the value of writing articles. / 由于您的支持，我才能够实现写作的价值。</span></span><br><span class="line">    <span class="comment"># Reward list</span></span><br><span class="line">    <span class="comment"># 打赏列表</span></span><br><span class="line">    <span class="comment">#list:</span></span><br><span class="line">       <span class="comment">#- name: Github Sponsor</span></span><br><span class="line">       <span class="comment">#  qcode: https://s3.qjqq.cn/47/661ba900c4bc1.webp!color</span></span><br><span class="line">        <span class="comment"># url: https://github.com/sponsors/everfu</span></span><br><span class="line">        <span class="comment"># color: var(--efu-black)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Share icon</span></span><br><span class="line">  <span class="comment"># 分享图标</span></span><br><span class="line">  <span class="attr">share:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">list:</span></span><br><span class="line">      <span class="comment"># - qq</span></span><br><span class="line">      <span class="comment"># - weibo</span></span><br><span class="line">      <span class="comment"># - twitter</span></span><br><span class="line">      <span class="comment"># - facebook</span></span><br><span class="line">      <span class="comment"># - telegram</span></span><br><span class="line">      <span class="comment"># - whatsapp</span></span><br><span class="line">      <span class="comment"># - linkedin</span></span><br><span class="line">      <span class="comment"># - link</span></span><br><span class="line">      <span class="comment"># - qrcode</span></span><br><span class="line">  <span class="attr">rss:</span> <span class="comment"># /atom.xml</span></span><br><span class="line">  <span class="comment"># Article reading progress</span></span><br><span class="line">  <span class="comment"># 文章封面取色</span></span><br><span class="line">  <span class="attr">covercolor:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># local: local color / api: api color / ave: oss average color</span></span><br><span class="line">    <span class="attr">mode:</span> <span class="string">api</span></span><br><span class="line">    <span class="comment"># api address / api 地址</span></span><br><span class="line">    <span class="attr">api:</span> <span class="string">https://api.qjqq.cn/api/Imgcolor?img=</span></span><br><span class="line">    <span class="comment"># Storage / 缓存时间</span></span><br><span class="line">    <span class="attr">time:</span> <span class="number">43200000</span></span><br><span class="line">  <span class="attr">footer:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">desc:</span> <span class="string">来自</span> <span class="string">白衣INK</span> <span class="string">最新设计与技术的文章</span> <span class="comment"># Articles from Ever Fu. / 文章来自 Ever Fu # description</span></span><br><span class="line">    <span class="attr">button:</span> <span class="comment"># Button</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">了解更多</span> <span class="comment"># Learn more / 了解更多</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">/about/</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Custom Theme Color</span></span><br><span class="line"><span class="attr">theme_color:</span></span><br><span class="line">  <span class="attr">dark:</span> <span class="string">&quot;#ffc848&quot;</span> <span class="comment"># dark</span></span><br><span class="line">  <span class="attr">light:</span> <span class="string">&quot;#425AEF&quot;</span> <span class="comment"># light</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># display mode</span></span><br><span class="line"><span class="comment"># 显示模式</span></span><br><span class="line"><span class="attr">display_mode:</span></span><br><span class="line">  <span class="comment"># auto: automatic switching(Recognize the current theme mode of the device) / dark: dark mode / light: light mode</span></span><br><span class="line">  <span class="comment"># auto: 自动切换（识别设备当前主题模式） / dark: 深色模式 / light: 浅色模式</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">auto</span></span><br><span class="line">  <span class="comment"># After opening, the dark mode will display the starry sky background</span></span><br><span class="line">  <span class="comment"># 开启后深色模式会显示星空背景</span></span><br><span class="line">  <span class="attr">universe:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Font</span></span><br><span class="line"><span class="comment"># 字体</span></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">font-size:</span> <span class="string">16px</span></span><br><span class="line">  <span class="attr">code-font-size:</span> <span class="string">15px</span></span><br><span class="line">  <span class="comment"># Global font</span></span><br><span class="line">  <span class="comment"># 全局字体</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">&quot;PingFang SC, Hiragino Sans GB, Microsoft YaHei, sans-serif&quot;</span></span><br><span class="line">  <span class="comment"># Code font</span></span><br><span class="line">  <span class="comment"># 代码字体</span></span><br><span class="line">  <span class="attr">code-font-family:</span> <span class="string">&#x27;&quot;monospace&quot;, monospace&#x27;</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Background</span></span><br><span class="line"><span class="comment"># 背景图片</span></span><br><span class="line"><span class="attr">background:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">.2</span></span><br><span class="line">  <span class="attr">dark:</span> <span class="string">https://i.pinimg.com/originals/d8/b3/9d/d8b39d12b653810db452c437211aeb2e.png</span></span><br><span class="line">  <span class="attr">light:</span> <span class="string">https://i.pinimg.com/originals/93/57/38/935738ed9657b296c2ef0ebd2151eb66.jpg</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Lure</span></span><br><span class="line"><span class="comment"># When the user exits the page, modify the title</span></span><br><span class="line"><span class="comment"># 当用户退出页面时，修改标题</span></span><br><span class="line"><span class="attr">lure:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">jump:</span> <span class="number">404</span> <span class="string">Not</span> <span class="string">Found</span></span><br><span class="line">  <span class="attr">back:</span> <span class="string">ヾ(≧∇≦*)ゝHey,</span> <span class="string">hey,</span> <span class="string">you</span> <span class="string">fell</span> <span class="string">for</span> <span class="string">it.</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Article expiration</span></span><br><span class="line"><span class="comment"># 文章过期</span></span><br><span class="line"><span class="attr">expire:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">time:</span> <span class="number">30</span> <span class="comment"># days</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">top</span> <span class="comment"># top / bottom</span></span><br><span class="line">  <span class="attr">text_prev:</span> <span class="string">&quot;This article expired &quot;</span></span><br><span class="line">  <span class="attr">text_next:</span> <span class="string">&quot; day ago, if the content does not match, please contact the webmaster to update it.&quot;</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Home page article configuration information</span></span><br><span class="line"><span class="comment"># 首页文章配置信息</span></span><br><span class="line"><span class="attr">index_post_list:</span></span><br><span class="line">  <span class="attr">direction:</span> <span class="string">column</span> <span class="comment"># row / column</span></span><br><span class="line">  <span class="attr">column:</span> <span class="number">2</span> <span class="comment"># 2: 2 columns 3: 3 columns</span></span><br><span class="line">  <span class="attr">cover:</span> <span class="string">both</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Related articles</span></span><br><span class="line"><span class="comment"># 相关文章</span></span><br><span class="line"><span class="attr">related_post:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">2</span></span><br><span class="line">  <span class="comment"># created: release date / updated: update date</span></span><br><span class="line">  <span class="comment"># created: 发布日期 / updated: 更新日期</span></span><br><span class="line">  <span class="attr">date_type:</span> <span class="string">created</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Custom right menu</span></span><br><span class="line"><span class="comment"># 自定义右键菜单</span></span><br><span class="line"><span class="attr">right_menu:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Whether to display the hot comment switch.</span></span><br><span class="line">  <span class="comment"># 是否显示热门评论开关</span></span><br><span class="line">  <span class="attr">commentBarrage:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Whether to display the browser&#x27;s context menu when hold Ctrl key.</span></span><br><span class="line">  <span class="comment"># 是否在按住 Ctrl 键时显示浏览器右键菜单</span></span><br><span class="line">  <span class="attr">ctrlOriginalMenu:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Simplified and Traditional Chinese translation.</span></span><br><span class="line">  <span class="comment"># 简繁体转换</span></span><br><span class="line">  <span class="attr">translate:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Custom list</span></span><br><span class="line">  <span class="comment"># 自定义列表</span></span><br><span class="line">  <span class="attr">custom_list:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">随机文章</span></span><br><span class="line">       <span class="attr">click:</span> <span class="string">toRandomPost()</span></span><br><span class="line">       <span class="attr">id:</span> <span class="string">menu-randomPost</span></span><br><span class="line">       <span class="attr">class:</span></span><br><span class="line">       <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-tower-broadcast</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">全部分类</span></span><br><span class="line">       <span class="attr">click:</span> <span class="string">pjax.loadUrl(&#x27;/categories/&#x27;)</span> <span class="comment"># External links with window.open, pjax can not request cross-domain content.</span></span><br><span class="line">       <span class="attr">id:</span></span><br><span class="line">       <span class="attr">class:</span></span><br><span class="line">       <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-clone</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">全部标签</span></span><br><span class="line">       <span class="attr">click:</span> <span class="string">pjax.loadUrl(&#x27;/tags/&#x27;)</span></span><br><span class="line">       <span class="attr">id:</span></span><br><span class="line">       <span class="attr">class:</span></span><br><span class="line">       <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line"><span class="comment"># --------------------------- end -----------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Copy</span></span><br><span class="line"><span class="comment">#  information</span></span><br><span class="line"><span class="comment"># 复制信息</span></span><br><span class="line"><span class="attr">copy:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Turn on Link copyright information after copying.</span></span><br><span class="line">  <span class="comment"># 复制后链接版权信息</span></span><br><span class="line">  <span class="attr">copyright:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Display when the number of words copied exceeds</span></span><br><span class="line">    <span class="comment"># 复制文字时超过多少字数显示</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">50</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Mermaid</span></span><br><span class="line"><span class="attr">mermaid:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Chart.js</span></span><br><span class="line"><span class="attr">chart:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># typeit</span></span><br><span class="line"><span class="attr">typeit:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### Extended configuration</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Console</span></span><br><span class="line"><span class="comment"># 控制台</span></span><br><span class="line"><span class="attr">console:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Recent comments</span></span><br><span class="line">  <span class="comment"># 最新评论</span></span><br><span class="line">  <span class="attr">recentComment:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Cache time 1: 1 day / .5 : half a day</span></span><br><span class="line">    <span class="comment"># 缓存时间 1: 1天 / .5 : 半天</span></span><br><span class="line">    <span class="attr">storage:</span> <span class="number">.2</span></span><br><span class="line">  <span class="attr">card:</span></span><br><span class="line">    <span class="comment"># Tags</span></span><br><span class="line">    <span class="comment"># 标签</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Archives</span></span><br><span class="line">    <span class="comment"># 归档</span></span><br><span class="line">    <span class="attr">archive:</span> <span class="string">&quot;month&quot;</span> <span class="comment"># month: by month / year: by year</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="attr">translate:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">defaultEncoding:</span> <span class="number">2</span> <span class="comment"># 1: 默认繁体 2: 默认简体</span></span><br><span class="line">  <span class="attr">translateDelay:</span> <span class="number">0</span> <span class="comment"># 首次加载翻译迟疑时间</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Right-Sidebar</span></span><br><span class="line"><span class="comment"># 右下角悬停导航栏</span></span><br><span class="line"><span class="attr">rightside:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#移动端 也有目录了开启</span></span><br><span class="line">  <span class="attr">percent:</span> <span class="literal">true</span> <span class="comment">#开启后顶栏的返回没了，关闭了之后，顶栏返回 异常</span></span><br><span class="line">  <span class="attr">hide:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">translate:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">mode:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">aside:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Footer</span></span><br><span class="line"><span class="comment"># 页脚</span></span><br><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="comment"># 社交图标</span></span><br><span class="line">  <span class="attr">information:</span></span><br><span class="line">    <span class="attr">author:</span> <span class="string">https://thirdqq.qlogo.cn/g?b=qq&amp;nk=2766521276&amp;s=640</span> <span class="comment">#true # img url / false</span></span><br><span class="line">    <span class="attr">left:</span></span><br><span class="line">       <span class="attr">Github:</span> <span class="string">https://github.com/everfu</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-github</span> <span class="comment"># 名称: 链接 || 图标</span></span><br><span class="line">       <span class="attr">Mail:</span> <span class="string">mailto:o@everfu.org</span> <span class="string">||</span> <span class="string">far</span> <span class="string">fa-envelope</span></span><br><span class="line">    <span class="attr">right:</span></span><br><span class="line">       <span class="attr">Bilibili:</span> <span class="string">https://space.bilibili.com/1329819902</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-bilibili</span></span><br><span class="line">       <span class="attr">Douyin:</span> <span class="string">https://v.douyin.com/iJsLc8jt/</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-tiktok</span></span><br><span class="line">  <span class="comment"># 友情链接</span></span><br><span class="line">  <span class="attr">group:</span></span><br><span class="line">     <span class="string">导航:</span></span><br><span class="line">       <span class="attr">Archives:</span> <span class="string">/archives/</span></span><br><span class="line">       <span class="attr">Categories:</span> <span class="string">/categories/</span></span><br><span class="line">       <span class="attr">Tags:</span> <span class="string">/tags/</span></span><br><span class="line">     <span class="string">排列:</span></span><br><span class="line">       <span class="attr">Cookies:</span> <span class="string">/cookies/</span></span><br><span class="line">       <span class="attr">Privacy:</span> <span class="string">/privacy/</span></span><br><span class="line">       <span class="attr">Copyright:</span> <span class="string">/copyright/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 随机友链</span></span><br><span class="line">  <span class="attr">randomlink:</span> <span class="literal">false</span> <span class="comment"># 随机友链</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 备案</span></span><br><span class="line">  <span class="attr">beian:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">湘公网安备43048102000175号</span></span><br><span class="line">       <span class="attr">icon:</span> <span class="string">https://beian.mps.gov.cn/img/logo01.dd7ff50e.png</span></span><br><span class="line">       <span class="attr">url:</span> <span class="string">https://beian.mps.gov.cn/#/query/webSearch</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">湘ICP备2024080357号-1</span></span><br><span class="line">       <span class="attr">url:</span> <span class="string">https://beian.miit.gov.cn/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 页脚信息文字</span></span><br><span class="line">  <span class="attr">links:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">RSS</span></span><br><span class="line">       <span class="attr">url:</span> <span class="string">/atom.xml</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">License</span></span><br><span class="line">       <span class="attr">url:</span> <span class="string">https://github.com/everfu/hexo-theme-solitude/blob/main/LICENSE</span></span><br><span class="line">       <span class="attr">icon:</span></span><br><span class="line">         <span class="bullet">-</span> <span class="string">fas</span> <span class="string">fa-copyright</span></span><br><span class="line">         <span class="bullet">-</span> <span class="string">fab</span> <span class="string">fa-creative-commons-by</span></span><br><span class="line">         <span class="bullet">-</span> <span class="string">fab</span> <span class="string">fa-creative-commons-nc</span></span><br><span class="line">         <span class="bullet">-</span> <span class="string">fab</span> <span class="string">fa-creative-commons-nd</span></span><br><span class="line">     <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">白衣主页</span></span><br><span class="line">       <span class="attr">url:</span> <span class="string">https://www.deepsea.xin/</span></span><br><span class="line">       <span class="comment">#img: https://boringbay.com/api/badge/www.efu.me</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># 404 page</span></span><br><span class="line"><span class="comment"># 404 页面</span></span><br><span class="line"><span class="attr">errorpage:</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">/img/404.avif</span></span><br><span class="line">  <span class="attr">text:</span> <span class="string">=awa=</span> <span class="string">Page</span> <span class="string">Not</span> <span class="string">Found</span> <span class="comment"># Text</span></span><br><span class="line">  <span class="attr">recommendList:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Meting API</span></span><br><span class="line"><span class="comment"># This part of the content uses metingjs,</span></span><br><span class="line"><span class="comment"># can only use NetEase Cloud Music, QQ Music and other music platforms supported by the mainland China region,</span></span><br><span class="line"><span class="comment"># the subsequent consideration of the use of JSON files to store music information and customize the implementation of the third-party API does not depend on the page.</span></span><br><span class="line"><span class="comment"># Music Page</span></span><br><span class="line"><span class="attr">meting_api:</span> <span class="string">&quot;https://meting.qjqq.cn/?server=:server&amp;type=:type&amp;id=:id&amp;auth=:auth&amp;r=:r&quot;</span> <span class="comment"># Custom API</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Capsule music</span></span><br><span class="line"><span class="comment"># 音乐胶囊</span></span><br><span class="line"><span class="attr">capsule:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># 歌单 ID / 单曲 ID</span></span><br><span class="line">  <span class="attr">id:</span> <span class="number">5144842535</span></span><br><span class="line">  <span class="comment"># 服务商：netease / qq / xiami / kugou / baidu</span></span><br><span class="line">  <span class="attr">server:</span> <span class="string">netease</span></span><br><span class="line">  <span class="comment"># 类型：playlist / song</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">playlist</span></span><br><span class="line">  <span class="attr">volume:</span> <span class="number">0.8</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Quick Menu</span></span><br><span class="line"><span class="comment"># Open with shift + ?</span></span><br><span class="line"><span class="comment"># 快捷菜单</span></span><br><span class="line"><span class="comment"># 使用 shift + ? 打开</span></span><br><span class="line"><span class="attr">keyboard:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">list:</span></span><br><span class="line">    <span class="comment"># - name: 关闭快捷菜单</span></span><br><span class="line">    <span class="comment">#   key: K</span></span><br><span class="line">    <span class="comment">#   func: keyboard</span></span><br><span class="line">    <span class="comment"># - name: 打开控制台</span></span><br><span class="line">    <span class="comment">#   key: A</span></span><br><span class="line">    <span class="comment">#   sco: showConsole</span></span><br><span class="line">    <span class="comment"># - name: 播放/暂停音乐</span></span><br><span class="line">    <span class="comment">#   key: M</span></span><br><span class="line">    <span class="comment">#   sco: musicToggle</span></span><br><span class="line">    <span class="comment"># - name: 打开友链</span></span><br><span class="line">    <span class="comment">#   key: L</span></span><br><span class="line">    <span class="comment">#   url: /links/</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Lazyload</span></span><br><span class="line"><span class="comment"># 图片懒加载</span></span><br><span class="line"><span class="attr">lazyload:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># post, site</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span></span><br><span class="line">  <span class="comment"># 加载时替换图</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="comment"># 加载失败替换图</span></span><br><span class="line">  <span class="attr">errorimg:</span> <span class="string">/img/error_load.avif</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Loading</span></span><br><span class="line"><span class="comment"># 加载</span></span><br><span class="line"><span class="attr">loading:</span></span><br><span class="line">  <span class="comment"># Full screen loading</span></span><br><span class="line">  <span class="comment"># 全屏加载</span></span><br><span class="line">  <span class="attr">fullpage:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Loading icon, default is siteicon</span></span><br><span class="line">  <span class="comment"># 加载图标，不写默认siteicon</span></span><br><span class="line">  <span class="attr">favicon:</span> <span class="string">/img/favicon.png</span></span><br><span class="line">  <span class="comment"># Pace loading</span></span><br><span class="line">  <span class="comment"># Pace 加载</span></span><br><span class="line">  <span class="attr">pace:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Highlight</span></span><br><span class="line"><span class="comment"># 代码块高亮</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Display the fold button when the number of words exceeds</span></span><br><span class="line">  <span class="comment"># 当超过多少字时显示折叠按钮</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">350</span></span><br><span class="line">  <span class="comment"># Whether to enable the copy button</span></span><br><span class="line">  <span class="comment"># 是否启用复制按钮</span></span><br><span class="line">  <span class="attr">copy:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Whether to expand by default</span></span><br><span class="line">  <span class="comment"># 是否默认展开</span></span><br><span class="line">  <span class="attr">expand:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># default: default / mac : apple terminal</span></span><br><span class="line">  <span class="comment"># default: 默认 / mac : 苹果终端</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">mac</span></span><br><span class="line">  <span class="comment"># default / solidity / dracula</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">dracula</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Lightbox</span></span><br><span class="line"><span class="comment"># 图片灯箱</span></span><br><span class="line"><span class="attr">lightbox:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># warning: Please select any one, but cannot be turned on at the same time.</span></span><br><span class="line"><span class="comment"># 警告: 请任选其一，但不能同时开启。</span></span><br><span class="line"><span class="attr">fancybox:</span> <span class="literal">true</span> <span class="comment"># fancybox</span></span><br><span class="line"><span class="attr">mediumZoom:</span> <span class="literal">false</span> <span class="comment"># mediumZoom</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Memorial</span></span><br><span class="line"><span class="comment"># Turn the entire site gray on memorable days.</span></span><br><span class="line"><span class="comment"># 在纪念日整个网站变灰</span></span><br><span class="line"><span class="attr">memorial:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">date:</span></span><br><span class="line">  <span class="comment">#  - 7-7</span></span><br><span class="line">  <span class="comment">#  - 9-18</span></span><br><span class="line">  <span class="comment">#  - 12-13</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># OpenGraph</span></span><br><span class="line"><span class="attr">OpenGraph:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">options:</span></span><br><span class="line">    <span class="comment"># twitter_card:</span></span><br><span class="line">    <span class="comment"># twitter_image:</span></span><br><span class="line">    <span class="comment"># twitter_id:</span></span><br><span class="line">    <span class="comment"># twitter_site:</span></span><br><span class="line">    <span class="comment"># google_plus:</span></span><br><span class="line">    <span class="comment"># fb_admins:</span></span><br><span class="line">    <span class="comment"># fb_app_id:</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Word count</span></span><br><span class="line"><span class="comment"># 字数统计</span></span><br><span class="line"><span class="comment"># warning: Please install the hexo-wordcount plugin first.</span></span><br><span class="line"><span class="comment"># 警告: 请先安装 hexo-wordcount 插件。</span></span><br><span class="line"><span class="attr">wordcount:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Katex</span></span><br><span class="line"><span class="comment"># Latex formula support</span></span><br><span class="line"><span class="comment"># Latex 公式支持</span></span><br><span class="line"><span class="attr">katex:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Whether to load on each page</span></span><br><span class="line">  <span class="comment"># 是否在每个页面加载</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Whether to enable copy formula</span></span><br><span class="line">  <span class="comment"># 是否启用复制公式</span></span><br><span class="line">  <span class="attr">copytex:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># verification</span></span><br><span class="line"><span class="comment"># 验证</span></span><br><span class="line"><span class="attr">verify_site:</span></span><br><span class="line">  <span class="comment"># - name: google-site-verification</span></span><br><span class="line">  <span class="comment">#   content: xxxxxx</span></span><br><span class="line">  <span class="comment"># - name: baidu-site-verification</span></span><br><span class="line">  <span class="comment">#   content: xxxxxxx</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># CSS Prefix</span></span><br><span class="line"><span class="comment"># CSS 前缀</span></span><br><span class="line"><span class="comment"># When turned on, it will automatically prefix the CSS (to get better browser support), but this will increase the size of the CSS file.</span></span><br><span class="line"><span class="comment"># 开启后会自动给 CSS 加前缀（以获得更好的浏览器支持），但这会增加 CSS 文件的大小。</span></span><br><span class="line"><span class="attr">css_prefix:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Extend</span></span><br><span class="line"><span class="comment"># 扩展</span></span><br><span class="line"><span class="attr">extends:</span></span><br><span class="line">  <span class="comment"># Insert in head</span></span><br><span class="line">  <span class="comment"># 插入到 head</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">  <span class="comment"># 自定义css</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/baiyi.css&quot;&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Insert in body</span></span><br><span class="line">  <span class="comment"># 插入到 body</span></span><br><span class="line">  <span class="attr">body:</span></span><br><span class="line">  <span class="comment">#  - &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/pace/1.2.4/pace.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># PWA</span></span><br><span class="line"><span class="comment"># Progressive Web App</span></span><br><span class="line"><span class="attr">pwa:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">manifest:</span> <span class="string">/manifest.json</span> <span class="comment"># manifest.json</span></span><br><span class="line">  <span class="attr">theme_color:</span> <span class="string">&quot;#006a73&quot;</span> <span class="comment"># Theme color</span></span><br><span class="line">  <span class="attr">mask_icon:</span> <span class="string">/img/pwa/favicon.png</span> <span class="comment"># Mask icon</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/img/pwa/favicon.png</span> <span class="comment"># Apple touch icon</span></span><br><span class="line">  <span class="attr">bookmark_icon:</span> <span class="string">/img/pwa/favicon.png</span> <span class="comment"># Bookmark icon</span></span><br><span class="line">  <span class="attr">favicon_32_32:</span> <span class="string">/img/pwa/favicon_32.png</span> <span class="comment"># 32x32 icon</span></span><br><span class="line">  <span class="attr">favicon_16_16:</span> <span class="string">/img/pwa/favicon_16.png</span> <span class="comment"># 16x16 icon</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Comment</span></span><br><span class="line"><span class="comment"># 评论</span></span><br><span class="line"><span class="attr">comment:</span></span><br><span class="line">  <span class="comment"># Which commenting system to use(e.g. waline or waline,twikoo)</span></span><br><span class="line">  <span class="comment"># 使用哪个评论系统（例如： waline or waline,twikoo）</span></span><br><span class="line">  <span class="attr">use:</span> <span class="comment"># waline, twikoo, valine, artalk, giscus # Up to two comment systems can be turned on at the same time</span></span><br><span class="line">  <span class="comment"># Whether to display the hot comment switch.</span></span><br><span class="line">  <span class="comment"># 是否显示热门评论开关</span></span><br><span class="line">  <span class="attr">commentBarrage:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Lazy load</span></span><br><span class="line">  <span class="comment"># 懒加载评论区</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Whether to display the comment count</span></span><br><span class="line">  <span class="comment"># 显示评论数</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Sidebar displays the total number of comments</span></span><br><span class="line">  <span class="comment"># Sidebar 显示总评论数</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># PV</span></span><br><span class="line">  <span class="attr">pv:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Avatar</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">https://gravatar.com/avatar</span></span><br><span class="line">  <span class="comment"># Hot comment tips</span></span><br><span class="line">  <span class="comment"># 热评提示</span></span><br><span class="line">  <span class="attr">hot_tip:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Number of hot comments</span></span><br><span class="line">    <span class="attr">count:</span> <span class="number">3</span></span><br><span class="line">  <span class="comment"># recent comments(⚠️ Comments need to be configured first.)</span></span><br><span class="line">  <span class="comment"># 最新评论(⚠️ 需要先配置评论)</span></span><br><span class="line">  <span class="attr">newest_comment:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">storage:</span> <span class="number">.5</span> <span class="comment"># 缓存时间 1: 1天 / .5 : 半天 / Cache time 1: 1 day .5 : half a day</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">5</span> <span class="comment"># 评论数 / Number of comments</span></span><br><span class="line"><span class="comment"># Twikoo: https://solitude.js.org/comment/twikoo</span></span><br><span class="line"><span class="attr">twikoo:</span> <span class="comment"># https://twikoo.js.org/</span></span><br><span class="line">  <span class="attr">envId:</span> <span class="comment"># url: https://twikoo.sondy.top/</span></span><br><span class="line">  <span class="attr">region:</span> <span class="comment"># Environment locale, default is ap-shanghai, Tencent cloud environment fill ap-shanghai or ap-guangzhou; Vercel environment do not fill the.</span></span><br><span class="line">  <span class="attr">style:</span> <span class="literal">true</span> <span class="comment"># Use custom styles when turned on</span></span><br><span class="line">  <span class="attr">accessToken:</span> <span class="comment"># AccessToken</span></span><br><span class="line">  <span class="attr">option:</span> <span class="comment"># twikoo option</span></span><br><span class="line"><span class="comment"># Waline: https://solitude.js.org/comment/waline</span></span><br><span class="line"><span class="attr">waline:</span> <span class="comment"># https://waline.js.org/</span></span><br><span class="line">  <span class="attr">envId:</span> <span class="comment"># url: https://waline.wzsco.top</span></span><br><span class="line">  <span class="attr">pageview:</span> <span class="literal">false</span> <span class="comment"># Whether to enable page access statistics</span></span><br><span class="line">  <span class="attr">option:</span> <span class="comment"># waline configuration item</span></span><br><span class="line"><span class="comment"># Valine: https://solitude.js.org/comment/valine</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">appId:</span> <span class="comment"># leancloud application app id</span></span><br><span class="line">  <span class="attr">appKey:</span> <span class="comment"># leancloud application app key</span></span><br><span class="line">  <span class="attr">serverURLs:</span> <span class="comment"># This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="comment"># https://valine.js.org/avatar.html</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">style:</span> <span class="literal">true</span> <span class="comment"># Use custom styles when turned on</span></span><br><span class="line">  <span class="attr">option:</span> <span class="comment"># options list</span></span><br><span class="line"><span class="comment"># Artalk: https://solitude.js.org/comment/artalk</span></span><br><span class="line"><span class="comment"># Artalk: https://solitude.js.org/zh/comment/artalk</span></span><br><span class="line"><span class="attr">artalk:</span></span><br><span class="line">  <span class="attr">server:</span> <span class="comment"># server url</span></span><br><span class="line">  <span class="attr">site:</span> <span class="comment"># site name</span></span><br><span class="line">  <span class="attr">option:</span> <span class="comment"># options</span></span><br><span class="line"><span class="comment"># Giscus: https://solitude.js.org/comment/giscus</span></span><br><span class="line"><span class="attr">giscus:</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="comment"># GitHub repository name</span></span><br><span class="line">  <span class="attr">repo_id:</span> <span class="comment"># GitHub repository ID</span></span><br><span class="line">  <span class="attr">category_id:</span> <span class="comment"># GitHub repository category ID</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">light</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">dark</span></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Search</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">local</span> <span class="comment"># local / algolia / docsearch</span></span><br><span class="line">  <span class="attr">tags:</span></span><br><span class="line">    <span class="comment"># - Solitude</span></span><br><span class="line">    <span class="comment"># - Hexo</span></span><br><span class="line">  <span class="comment"># Algolia</span></span><br><span class="line">  <span class="attr">algolia:</span></span><br><span class="line">    <span class="comment"># hits:</span></span><br><span class="line">    <span class="comment">#   per_page: 6</span></span><br><span class="line">  <span class="comment"># Local search</span></span><br><span class="line">  <span class="attr">local:</span></span><br><span class="line">    <span class="attr">preload:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">CDN:</span> <span class="comment"># url: search.xml</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># DocSearch</span></span><br><span class="line">  <span class="comment"># https://docsearch.algolia.com/</span></span><br><span class="line">  <span class="attr">docsearch:</span></span><br><span class="line">    <span class="attr">appId:</span></span><br><span class="line">    <span class="attr">apiKey:</span></span><br><span class="line">    <span class="attr">indexName:</span></span><br><span class="line">    <span class="attr">option:</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Music Page</span></span><br><span class="line"><span class="comment"># 音乐馆</span></span><br><span class="line"><span class="attr">music:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># 歌单 ID / 单曲 ID</span></span><br><span class="line">  <span class="attr">id:</span> <span class="number">5144842535</span></span><br><span class="line">  <span class="comment"># 服务商：netease / qq / xiami / kugou / baidu</span></span><br><span class="line">  <span class="attr">server:</span> <span class="string">netease</span></span><br><span class="line">  <span class="comment"># 类型：playlist / song</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">playlist</span></span><br><span class="line">  <span class="comment"># 默认音量</span></span><br><span class="line">  <span class="attr">volume:</span> <span class="number">0.8</span></span><br><span class="line">  <span class="comment"># 是否自动播放</span></span><br><span class="line">  <span class="attr">mutex:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 播放方式：list / random</span></span><br><span class="line">  <span class="attr">order:</span> <span class="string">list</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Danmaku Page</span></span><br><span class="line"><span class="comment"># 弹幕留言页面</span></span><br><span class="line"><span class="attr">envelope:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">line:</span> <span class="number">10</span> <span class="comment"># 显示行数</span></span><br><span class="line">  <span class="attr">speed:</span> <span class="number">20</span> <span class="comment"># 播放速度</span></span><br><span class="line">  <span class="attr">hover:</span> <span class="literal">true</span> <span class="comment"># 鼠标悬停暂停</span></span><br><span class="line">  <span class="attr">loop:</span> <span class="literal">true</span> <span class="comment"># 循环播放</span></span><br><span class="line">  <span class="attr">page:</span> <span class="string">/message/</span> <span class="comment"># 留言板页面 / message board page</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Brevity Page</span></span><br><span class="line"><span class="comment"># 即可短文</span></span><br><span class="line"><span class="attr">brevity:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">home_mini:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">music:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">page:</span> <span class="string">/essay/</span></span><br><span class="line">  <span class="attr">style:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">strip:</span> <span class="number">30</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Recent comments Page</span></span><br><span class="line"><span class="comment"># 最近评论页面</span></span><br><span class="line"><span class="attr">recent_comments:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">50</span> <span class="comment"># ⚠️waline 仅支持最大50条评论 / ⚠️waline only supports a maximum of 50 comments</span></span><br><span class="line">  <span class="attr">cache:</span> <span class="number">0.2</span> <span class="comment"># 1 = 1天 / 1 = 1 day</span></span><br><span class="line">  <span class="attr">page:</span> <span class="string">/recentcomments/</span> <span class="comment"># 最近评论页面 / recent comments page</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Busuanzi</span></span><br><span class="line"><span class="attr">busuanzi:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 0: Original / 1: Custom</span></span><br><span class="line"><span class="comment"># 0: 原版 / 1: 自定义版</span></span><br><span class="line"><span class="attr">busuanzi_use:</span> <span class="number">0</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Google Adsense</span></span><br><span class="line"><span class="comment"># 谷歌广告</span></span><br><span class="line"><span class="attr">google_adsense:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Auto ads</span></span><br><span class="line">  <span class="comment"># 自动广告</span></span><br><span class="line">  <span class="attr">auto_ads:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Page-level ads</span></span><br><span class="line">  <span class="comment"># 页面级广告</span></span><br><span class="line">  <span class="attr">enable_page_level_ads:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Sidebar card ads</span></span><br><span class="line">  <span class="comment"># 侧边栏卡片广告</span></span><br><span class="line">  <span class="attr">aside_card:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Post card ads</span></span><br><span class="line">  <span class="comment"># 文章卡片广告</span></span><br><span class="line">  <span class="attr">post_card:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Post content ads</span></span><br><span class="line">  <span class="comment"># 文章内容广告</span></span><br><span class="line">  <span class="attr">post_content:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Google Adsense js</span></span><br><span class="line">  <span class="comment"># 谷歌广告 js</span></span><br><span class="line">  <span class="attr">js:</span> <span class="string">https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js</span></span><br><span class="line">  <span class="attr">client:</span> <span class="comment"># ca-pub-XXXXXXXXXXXXXX</span></span><br><span class="line">  <span class="attr">slot:</span> <span class="comment"># 4236388782</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># 非必要请勿修改</span></span><br><span class="line"><span class="attr">CDN:</span></span><br><span class="line">  <span class="attr">internal:</span> <span class="string">local</span> <span class="comment"># local / cdnjs / jsdelivr / unpkg / custom</span></span><br><span class="line">  <span class="attr">third_party:</span> <span class="string">custom</span> <span class="comment"># cdnjs / jsdelivr / unpkg / custom</span></span><br><span class="line">  <span class="attr">version:</span> <span class="literal">true</span> <span class="comment"># 是否使用版本号</span></span><br><span class="line">  <span class="attr">custom_format:</span> <span class="string">https://fastly.jsdelivr.net/npm/$&#123;name&#125;@$&#123;version&#125;/$&#123;min_file&#125;</span> <span class="comment"># 自定义格式</span></span><br><span class="line">  <span class="comment"># 直接覆盖默认 CDN 链接（优先级最高）</span></span><br><span class="line">  <span class="attr">options:</span></span><br><span class="line">    <span class="comment"># algolia_search:</span></span><br><span class="line">    <span class="comment"># aplayer_css:</span></span><br><span class="line">    <span class="comment"># aplayer_js:</span></span><br><span class="line">    <span class="comment"># artalk_css:</span></span><br><span class="line">    <span class="comment"># artalk_js:</span></span><br><span class="line">    <span class="comment"># blueimp_md5:</span></span><br><span class="line">    <span class="comment"># busuanzi_js:</span></span><br><span class="line">    <span class="comment"># chart_js:</span></span><br><span class="line">    <span class="comment"># color_thief:</span></span><br><span class="line">    <span class="comment"># fancyapps_css:</span></span><br><span class="line">    <span class="comment"># fancyapps_ui:</span></span><br><span class="line">    <span class="comment"># fontawesome:</span></span><br><span class="line">    <span class="comment"># instantsearch:</span></span><br><span class="line">    <span class="comment"># katex:</span></span><br><span class="line">    <span class="comment"># katex_copytex:</span></span><br><span class="line">    <span class="comment"># lazyload:</span></span><br><span class="line">    <span class="comment"># medium_zoom:</span></span><br><span class="line">    <span class="comment"># mermaid_js:</span></span><br><span class="line">    <span class="comment"># meting_js:</span></span><br><span class="line">    <span class="comment"># pace_js:</span></span><br><span class="line">    <span class="comment"># pjax:</span></span><br><span class="line">    <span class="comment"># qrcode:</span></span><br><span class="line">    <span class="comment"># snackbar:</span></span><br><span class="line">    <span class="comment"># swiper_css:</span></span><br><span class="line">    <span class="comment"># swiper_js:</span></span><br><span class="line">    <span class="comment"># twikoo:</span></span><br><span class="line">    <span class="comment"># typeit_js:</span></span><br><span class="line">    <span class="comment"># valine:</span></span><br><span class="line">    <span class="comment"># waline_css:</span></span><br><span class="line">    <span class="comment"># waline_js:</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="修复开往图标消失"><a href="#修复开往图标消失" class="headerlink" title="修复开往图标消失"></a>修复开往图标消失</h2><figure class="highlight plaintext"><figcaption><span>路径</span></figcaption><table><tr><td class="code"><pre><span class="line">solitude</span><br><span class="line">└── source</span><br><span class="line">    └── css</span><br><span class="line">        └── _layout</span><br><span class="line">            └── header.styl</span><br></pre></td></tr></table></figure>
<p>删除以下代码（272-274行）</p>
<figure class="highlight styl"><figcaption><span>header.styl</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#travellings_button</span></span><br><span class="line">  +<span class="built_in">maxWidth768</span>()</span><br><span class="line">    <span class="attribute">opacity</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>主题美化</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>备份</tag>
        <tag>博客</tag>
      </tags>
  </entry>
  <entry>
    <title>一文带你详细了解网站字体优化加载方案</title>
    <url>/posts/43f60d5d.html</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>网上很多文章有写这些的，但写的过于笼统，大多只是流于表面，并没有告诉大家该怎么去实际优化，下面我将给大家说一下我的思路和具体该怎么去做。</p>
<h2 id="一-CSS代码"><a href="#一-CSS代码" class="headerlink" title="一.CSS代码"></a>一.CSS代码</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@font-face</span>&#123;</span><br><span class="line">    <span class="comment">/* 定义字体名称为baiyi*/</span></span><br><span class="line">    <span class="attribute">font-family</span>:<span class="string">&#x27;baiyi&#x27;</span>;</span><br><span class="line">    <span class="comment">/* 优先使用本地已缓存的名为baiyi的字体，若不存在则依次尝试加载woff2、woff和truetype格式字体 */</span></span><br><span class="line">    <span class="attribute">src</span>:<span class="built_in">local</span>(<span class="string">&#x27;baiyi&#x27;</span>),<span class="built_in">url</span>(<span class="string">&#x27;font.woff2&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff2&#x27;</span>),<span class="built_in">url</span>(<span class="string">&#x27;font.woff&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff&#x27;</span>),<span class="built_in">url</span>(<span class="string">&#x27;font.ttf&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;truetype&#x27;</span>);</span><br><span class="line">    <span class="comment">/* 设置字体粗细为正常 */</span></span><br><span class="line">    <span class="attribute">font-weight</span>:normal;</span><br><span class="line">    <span class="comment">/* 设置字体样式为正常 */</span></span><br><span class="line">    <span class="attribute">font-style</span>:normal;</span><br><span class="line">    <span class="comment">/* 采用swap加载策略，先以系统默认字体显示，字体加载完成后替换 */</span></span><br><span class="line">    <span class="attribute">font-display</span>:swap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="comment">/* 使用baiyi字体，若加载失败则使用sans-serif系统字体 */</span></span><br><span class="line">    <span class="attribute">font-family</span>:<span class="string">&#x27;baiyi&#x27;</span>,sans-serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这是我经过多次完善总结出来的网站字体CSS代码。下面我将介绍为什么这样写：</p>
<h4 id="1-字体格式"><a href="#1-字体格式" class="headerlink" title="1.字体格式"></a>1.字体格式</h4><p>网站字体应当<strong>优先使用woff2</strong>，同时提供woff与<strong>ttf作为备用</strong>，以便应对不支持woff2的浏览器。在@font-face规则中按顺序列出字体格式，浏览器会按顺序查找支持的格式加载。</p>
<p>字体格式转换我提供两个网站，你可以更换自己想要的文件格式，来转换成woff2或者woff文件：</p>
<div class="tab-item-content active" id="link-3">
    <a class="tag-link" href="https://convertio.co/zh/" target="_blank">
        <div class="tag-link-tips">
            引用站外链接
        </div>
        <div class="tag-link-bottom">
            <div class="tag-link-left">
                <i class="solitude fas fa-link"></i>
            </div>
            <div class="tag-link-right">
                <div class="tag-link-title">
                    文件转换器
                </div>
                <div class="tag-link-sitename">
                    将你的文件转换成任意格式
                </div>
            </div>
            <i class="solitude fas fa-chevron-right"></i>
        </div>
    </a>
</div>

<div class="tab-item-content active" id="link-3">
    <a class="tag-link" href="https://cloudconvert.com/ttf-to-woff2" target="_blank">
        <div class="tag-link-tips">
            引用站外链接
        </div>
        <div class="tag-link-bottom">
            <div class="tag-link-left">
                <i class="solitude fas fa-link"></i>
            </div>
            <div class="tag-link-right">
                <div class="tag-link-title">
                    CloudConvert
                </div>
                <div class="tag-link-sitename">
                    TTF到WOFF2转换器
                </div>
            </div>
            <i class="solitude fas fa-chevron-right"></i>
        </div>
    </a>
</div>

<h4 id="2-swap加载"><a href="#2-swap加载" class="headerlink" title="2.swap加载"></a>2.swap加载</h4><p>CSS3引入了<strong>font-display</strong>属性，允许开发者控制字体不可用时的行为。它有以下几个取值：</p>
<table>
<thead>
<tr>
<th>属性值</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>block</td>
<td>字体加载前，短暂隐藏文本</td>
</tr>
<tr>
<td>swap</td>
<td>先以默认字体显示，加载后替换</td>
</tr>
<tr>
<td>fallback</td>
<td>短时间用默认字体，随后切换</td>
</tr>
<tr>
<td>optional</td>
<td>网络良好时才加载字体</td>
</tr>
</tbody></table>
<p>一般我们选用<strong>swap</strong>，它允许浏览器在自定义字体加载期间先使用系统默认字体进行文本渲染，等自定义字体加载完成后再替换为自定义字体。这样用户能快速看到页面文本内容，不会因字体加载而出现长时间空白。</p>
<h4 id="3-local缓存"><a href="#3-local缓存" class="headerlink" title="3.local缓存"></a>3.local缓存</h4><p>local()函数在@font-face规则中，优先检查本地是否已缓存了指定字体。如果有，则<strong>直接使用本地缓存</strong>，避免重复下载。</p>
<h2 id="二-异步加载"><a href="#二-异步加载" class="headerlink" title="二.异步加载"></a>二.异步加载</h2><p>默认情况下，字体加载会阻塞页面渲染，导致页面显示延迟。通过<strong>异步加载</strong>，字体加载过程不会影响页面的初始渲染，提高用户体验。FontFaceObserver库提供了一种方便的方式来监听字体加载状态，确保在字体加载完成后再应用字体。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/fontfaceobserver@2.1.0/fontfaceobserver.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 定义默认字体样式 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: sans-serif;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 当字体加载完成后应用的样式 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span><span class="selector-class">.fonts-loaded</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: <span class="string">&#x27;baiyi&#x27;</span>, sans-serif;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//创建FontFaceObserver实例</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> baiyi = <span class="keyword">new</span> <span class="title class_">FontFaceObserver</span>(<span class="string">&#x27;baiyi&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">weight</span>: <span class="string">&#x27;normal&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">style</span>: <span class="string">&#x27;normal&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        baiyi.<span class="title function_">load</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//字体加载成功，给body添加fonts-loaded类</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;fonts-loaded&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;字体加载失败&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="keyword">@font-face</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-family</span>:<span class="string">&#x27;baiyi&#x27;</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">src</span>:<span class="built_in">local</span>(<span class="string">&#x27;baiyi&#x27;</span>),<span class="built_in">url</span>(<span class="string">&#x27;font.woff2&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff2&#x27;</span>),<span class="built_in">url</span>(<span class="string">&#x27;font.woff&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff&#x27;</span>),<span class="built_in">url</span>(<span class="string">&#x27;font.ttf&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;truetype&#x27;</span>);</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-weight</span>: normal;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-style</span>: normal;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-display</span>: swap;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="三-字体处理"><a href="#三-字体处理" class="headerlink" title="三.字体处理"></a>三.字体处理</h2><h4 id="1-字体体积小"><a href="#1-字体体积小" class="headerlink" title="1.字体体积小"></a>1.字体体积小</h4><p>有一些字体优化处理的比较好，包也就1M多一点，但是对于那种手写体，往往处理优化并没有很好，达到了10MB甚至更大，过大的字体文件肯定是不可取的。<strong>优先使用2M以内的字体</strong>，过大的自行优化压缩或者字体子集化。</p>
<h4 id="2-字体子集化"><a href="#2-字体子集化" class="headerlink" title="2.字体子集化"></a>2.字体子集化</h4><p>提取网页实际使用的字符子集，去除多余字符，<strong>减小字体文件体积</strong>。如只展示中文的网页，可剔除字体中的英文字符等。这里你需要自行搜索相关工具，诸如<strong>字体裁剪、子集化处理</strong>。</p>
<div class="tab-item-content active" id="link-3">
    <a class="tag-link" href="https://font-subset.disidu.com/" target="_blank">
        <div class="tag-link-tips">
            引用站外链接
        </div>
        <div class="tag-link-bottom">
            <div class="tag-link-left">
                <i class="solitude fas fa-link"></i>
            </div>
            <div class="tag-link-right">
                <div class="tag-link-title">
                    字体裁剪
                </div>
                <div class="tag-link-sitename">
                    在线的字体一键裁剪工具
                </div>
            </div>
            <i class="solitude fas fa-chevron-right"></i>
        </div>
    </a>
</div>

<p>你还可以针对某种特殊领域，比如APP字体、固定页面的字体，在<strong>文字确定的情况下</strong>，比如一共就20个字，我们就不需要完整的字体文件，而是把这20个字对应的字体<strong>摘取</strong>出来。</p>
<h4 id="四-CDN加速与缓存"><a href="#四-CDN加速与缓存" class="headerlink" title="四.CDN加速与缓存"></a>四.CDN加速与缓存</h4><p>这里就简单说一下吧，不再过多赘述了，就是你可以把你的字体文件以CDN形式引入，此外服务器都是有缓存规则的，自己配置缓存规则即可</p>
]]></content>
      <categories>
        <category>技术教程</category>
      </categories>
      <tags>
        <tag>字体</tag>
        <tag>CSS</tag>
        <tag>优化</tag>
      </tags>
  </entry>
  <entry>
    <title>WebView 开发指南：从基础到高级应用</title>
    <url>/posts/5d9798a2.html</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在移动应用开发中，WebView 是一个强大的工具，它允许我们在应用内展示网页内容，实现与网页的交互。本文将深入探讨 WebView 的各种功能和应用场景，并提供详细的代码示例，帮助开发者全面掌握 WebView 的使用。</p>
<h2 id="一-获取WebView"><a href="#一-获取WebView" class="headerlink" title="一.获取WebView"></a>一.获取WebView</h2><p>不同的平台或布局，获取 WebView 的<strong>方式有所不同</strong>。<br>先说LuaWebView，在自行设置控件时，假设是这样的：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--省略框架</span></span><br><span class="line">    &#123;</span><br><span class="line">      LuaWebView,</span><br><span class="line">      id=<span class="string">&quot;LuaWebView&quot;</span>,</span><br><span class="line">      layout_width=<span class="string">&#x27;wrap&#x27;</span>,</span><br><span class="line">      layout_height=<span class="string">&#x27;350dp&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="comment">--省略框架</span></span><br><span class="line">LuaWebView.loadUrl(<span class="string">&quot;https://baiyi.ink&quot;</span>)<span class="comment">--加载网页</span></span><br></pre></td></tr></table></figure>
<p>那此时我们的WebView应该这样获取并进行设置：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> webSettings = LuaWebView.getSettings();</span><br><span class="line">webSettings.setUseWideViewPort(<span class="literal">true</span>);</span><br><span class="line">webSettings.setLoadWithOverviewMode(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">--// 禁用缓存</span></span><br><span class="line"><span class="keyword">local</span> WebSettings = luajava.bindClass <span class="string">&quot;android.webkit.WebSettings&quot;</span></span><br><span class="line">webSettings.setCacheMode(WebSettings.LOAD_NO_CACHE);</span><br><span class="line"><span class="comment">--// 开启js支持</span></span><br><span class="line">webSettings.setJavaScriptEnabled(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> WebViewClient = luajava.bindClass <span class="string">&quot;android.webkit.WebViewClient&quot;</span></span><br><span class="line"></span><br><span class="line">LuaWebView.setWebViewClient(luajava.override(WebViewClient,&#123;</span><br><span class="line">  shouldOverrideUrlLoading=<span class="function"><span class="keyword">function</span><span class="params">(superCall,view,webResourceRequest)</span></span></span><br><span class="line">    <span class="comment">--即将开始加载事件</span></span><br><span class="line">    <span class="comment">--返回true则拦截本次加载</span></span><br><span class="line">    <span class="comment">--拦截加载建议在这里操作</span></span><br><span class="line">    <span class="comment">--判断加载的链接</span></span><br><span class="line">    <span class="keyword">if</span> webResourceRequest.getUrl().toSafeString():<span class="built_in">find</span>(<span class="string">&quot;&quot;</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  onReceivedSslError=<span class="function"><span class="keyword">function</span><span class="params">(superCall, view, sslErrorHandler, sslError)</span></span></span><br><span class="line">    <span class="comment">--ssl证书错误处理事件</span></span><br><span class="line">    <span class="comment">--需自行处理，否则在FA2中会导致卡死</span></span><br><span class="line">    <span class="comment">--返回true拦截原事件</span></span><br><span class="line">    <span class="keyword">local</span> sslErr = &#123;</span><br><span class="line">      [<span class="number">4</span>] = <span class="string">&quot;SSL_DATE_INVALID\n证书的日期无效&quot;</span>,</span><br><span class="line">      [<span class="number">1</span>] = <span class="string">&quot;SSL_EXPIRED\n证书已过期&quot;</span>,</span><br><span class="line">      [<span class="number">2</span>] = <span class="string">&quot;SSL_IDMISMATCH\n主机名称不匹配&quot;</span>,</span><br><span class="line">      [<span class="number">5</span>] = <span class="string">&quot;SSL_INVALID\n发生一般性错误&quot;</span>,</span><br><span class="line">      [<span class="number">6</span>] = <span class="string">&quot;SSL_MAX_ERROR\n此常量在API级别14中已弃用。此常数对于使用SslError API不是必需的，并且可以从发行版更改为发行版。&quot;</span>,</span><br><span class="line">      [<span class="number">0</span>] = <span class="string">&quot;SSL_NOTYETVALID\n证书尚未生效&quot;</span>,</span><br><span class="line">      [<span class="number">3</span>] = <span class="string">&quot;SSL_UNTRUSTED\n证书颁发机构不受信任&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">print</span>(sslError.getUrl()..<span class="string">&quot;遇到了SSL证书错误，错误类型:&quot;</span>..sslError.getPrimaryError()..<span class="string">&quot;\n&quot;</span>..sslErr[sslError.getPrimaryError()])</span><br><span class="line">    <span class="comment">--忽略错误</span></span><br><span class="line">    sslErrorHandler.proceed()</span><br><span class="line">    <span class="comment">--取消加载(这是默认行为)</span></span><br><span class="line">    <span class="comment">--sslErrorHandler.cancel()</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>
<p>再以 FA2 自带 WebView 为例，监听所有浏览页：</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--监听全部浏览器的事件</span></span><br><span class="line"><span class="comment">--由于fa2手册自带的浏览器状态监听智能监听第一个浏览页</span></span><br><span class="line"><span class="comment">--Adam·Eva重新写了个监听所有浏览页的</span></span><br><span class="line">import <span class="string">&quot;net.fusionapp.core.ui.fragment.WebInterface&quot;</span></span><br><span class="line">import <span class="string">&quot;androidx.viewpager.widget.ViewPager$OnPageChangeListener&quot;</span></span><br><span class="line"><span class="keyword">local</span> uiManager=this.uiManager</span><br><span class="line"><span class="keyword">local</span> viewPager=uiManager.viewPager</span><br><span class="line"><span class="keyword">local</span> pagerAdapter=uiManager.pagerAdapter</span><br><span class="line"><span class="keyword">local</span> pagerCount=pagerAdapter.getCount()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">webInterface</span><span class="params">()</span></span></span><br><span class="line">  <span class="keyword">for</span> i = <span class="number">0</span>,pagerCount<span class="number">-1</span>,<span class="number">1</span> <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> fragment=uiManager.getFragment(i)</span><br><span class="line">    <span class="keyword">if</span> fragment <span class="keyword">then</span></span><br><span class="line">      fragment.setWebInterface(WebInterface&#123;onPageFinished=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line">          <span class="comment">--页面加载结束事件</span></span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">        onPageStarted=<span class="function"><span class="keyword">function</span><span class="params">(view,url,favicon)</span></span></span><br><span class="line">          <span class="comment">--页面开始加载事件</span></span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">        onReceivedTitle=<span class="function"><span class="keyword">function</span><span class="params">(view,title)</span></span></span><br><span class="line">          <span class="comment">--获取到网页标题时加载的事件</span></span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">        onLoadResource=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line">          <span class="comment">--页面资源加载监听</span></span><br><span class="line">          <span class="comment">--可通过该方法获取网页上的资源</span></span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">        onUrlLoad=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line">          <span class="comment">--即将开始加载事件，url参数是即将加载的url</span></span><br><span class="line">          <span class="comment">--该函数返回一个布尔值</span></span><br><span class="line">          <span class="comment">--返回true则拦截本次加载</span></span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">end</span>,</span><br><span class="line">        onReceivedSslError=<span class="function"><span class="keyword">function</span><span class="params">(view, sslErrorHandler, sslError)</span></span></span><br><span class="line">          <span class="comment">--ssl证书错误处理事件</span></span><br><span class="line">          <span class="comment">--需自行处理，请返回true拦截原事件</span></span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      &#125;)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">webInterface()</span><br><span class="line">viewPager.setOnPageChangeListener(OnPageChangeListener&#123;</span><br><span class="line">  onPageSelected=<span class="function"><span class="keyword">function</span><span class="params">(n)</span></span></span><br><span class="line">    webInterface()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="二-浏览器控件API"><a href="#二-浏览器控件API" class="headerlink" title="二.浏览器控件API"></a>二.浏览器控件API</h2><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.View&quot;</span></span><br><span class="line">import <span class="string">&quot;android.webkit.WebSettings&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.LinearLayout&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.Toast&quot;</span></span><br><span class="line">import <span class="string">&quot;com.androlua.LuaWebView&quot;</span></span><br><span class="line">import <span class="string">&quot;android.webkit.WebViewClient&quot;</span></span><br><span class="line"><span class="comment">--浏览器控件讲解</span></span><br><span class="line">layout=<span class="comment">--全屏框架</span></span><br><span class="line">&#123;</span><br><span class="line">  LinearLayout;<span class="comment">--线性控件</span></span><br><span class="line">  orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">  layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">  background=<span class="string">&#x27;#ffeeeeee&#x27;</span>;<span class="comment">--布局背景</span></span><br><span class="line">  &#123;</span><br><span class="line">    LuaWebView;<span class="comment">--浏览器控件</span></span><br><span class="line">    layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--浏览器宽度</span></span><br><span class="line">    layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--浏览器高度</span></span><br><span class="line">    id=<span class="string">&#x27;webView&#x27;</span>;<span class="comment">--控件ID</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;android.webkit.WebView&quot;</span></span><br><span class="line">webView.addJavascriptInterface(&#123;&#125;,<span class="string">&quot;JsInterface&quot;</span>)<span class="comment">--漏洞封堵代码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--现代 Web 特性支持：</span></span><br><span class="line"><span class="comment">-- 启用现代Web API</span></span><br><span class="line">webView.getSettings().setDomStorageEnabled(<span class="literal">true</span>)</span><br><span class="line">webView.getSettings().setDatabaseEnabled(<span class="literal">true</span>)</span><br><span class="line">webView.getSettings().setGeolocationEnabled(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- PWA 支持</span></span><br><span class="line">webView.getSettings().setAppCacheEnabled(<span class="literal">true</span>)</span><br><span class="line">webView.getSettings().setAppCachePath(activity.getCacheDir().toString())</span><br><span class="line"></span><br><span class="line"><span class="comment">--导航控制增强：</span></span><br><span class="line">webView.setWebViewClient(luajava.override(WebViewClient, &#123;</span><br><span class="line">    shouldOverrideUrlLoading = <span class="function"><span class="keyword">function</span><span class="params">(view, request)</span></span></span><br><span class="line">        <span class="comment">-- 深度链接处理示例</span></span><br><span class="line">        <span class="keyword">if</span> request.url:<span class="built_in">find</span>(<span class="string">&quot;tel:&quot;</span>) <span class="keyword">then</span></span><br><span class="line">            activity.startActivity(Intent(Intent.ACTION_DIAL, Uri.parse(request.url)))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">    onReceivedHttpError = <span class="function"><span class="keyword">function</span><span class="params">(view, request, errorResponse)</span></span></span><br><span class="line">        <span class="comment">-- 自定义错误页处理</span></span><br><span class="line">        view.loadUrl(<span class="string">&quot;file:///android_asset/error.html&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">--性能优化方案：</span></span><br><span class="line"><span class="comment">-- 启用现代Web特性</span></span><br><span class="line">webView.getSettings().setMediaPlaybackRequiresUserGesture(<span class="literal">false</span>) <span class="comment">-- 自动播放策略</span></span><br><span class="line">webView.getSettings().setMixedContentMode(<span class="number">2</span>) <span class="comment">-- 混合内容处理</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 内存管理优化</span></span><br><span class="line">webView.setLayerType(View.LAYER_TYPE_HARDWARE, <span class="literal">nil</span>) <span class="comment">-- 硬件加速</span></span><br><span class="line">webView.clearCache(<span class="literal">true</span>) <span class="comment">-- 定期清理缓存</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--安全增强配置</span></span><br><span class="line"><span class="comment">-- 禁用危险接口</span></span><br><span class="line">webView.removeJavascriptInterface(<span class="string">&quot;searchBoxJavaBridge_&quot;</span>)</span><br><span class="line">webView.removeJavascriptInterface(<span class="string">&quot;accessibility&quot;</span>)</span><br><span class="line">webView.removeJavascriptInterface(<span class="string">&quot;accessibilityTraversal&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 安全JS接口实现</span></span><br><span class="line"><span class="keyword">local</span> safeInterface = &#123;</span><br><span class="line">    showToast = <span class="function"><span class="keyword">function</span><span class="params">(text)</span></span></span><br><span class="line">        Toast.makeText(activity, text, Toast.LENGTH_SHORT).show()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line">webView.addJavascriptInterface(safeInterface, <span class="string">&quot;SafeJsBridge&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--常用API</span></span><br><span class="line">webView.loadUrl(<span class="string">&quot;https://www.baidu.com/&quot;</span>)<span class="comment">--加载网页</span></span><br><span class="line">webView.loadUrl(<span class="string">&quot;file:///storage/sdcard0/index.html&quot;</span>)<span class="comment">--加载本地文件</span></span><br><span class="line"></span><br><span class="line">webView.loadUrl(<span class="string">&quot;view-source:&quot;</span>..webView.url)<span class="comment">--查看网页源码</span></span><br><span class="line">webView.evaluateJavascript(<span class="string">[[JavaScript代码]]</span>,<span class="literal">nil</span>)<span class="comment">--加载JS代码</span></span><br><span class="line"></span><br><span class="line">webView.requestFocusFromTouch()<span class="comment">--设置支持获取手势焦点</span></span><br><span class="line">webView.getSettings().setForceDark(WebSettings.FORCE_DARK_ON)<span class="comment">--设置深色模式</span></span><br><span class="line"></span><br><span class="line">webView.getSettings().setSupportZoom(<span class="literal">true</span>); <span class="comment">--支持网页缩放</span></span><br><span class="line">webView.getSettings().setBuiltInZoomControls(<span class="literal">true</span>); <span class="comment">--支持缩放</span></span><br><span class="line">webView.getSettings().setLoadWithOverviewMode(<span class="literal">true</span>);<span class="comment">--缩放至屏幕的大小</span></span><br><span class="line">webView.getSettings().setDisplayZoomControls(<span class="literal">false</span>); <span class="comment">--隐藏自带的右下角缩放控件</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">webView.setVerticalScrollBarEnabled(<span class="literal">false</span>)<span class="comment">--隐藏垂直滚动条</span></span><br><span class="line"></span><br><span class="line">webView.getSettings().setLoadsImagesAutomatically(<span class="literal">true</span>);<span class="comment">--图片自动加载</span></span><br><span class="line">webView.getSettings().setUseWideViewPort(<span class="literal">true</span>) <span class="comment">--图片自适应</span></span><br><span class="line"></span><br><span class="line">webView.setHorizontalScrollBarEnabled(<span class="literal">false</span>)<span class="comment">--设置是否显示水平滚动条</span></span><br><span class="line">webView.setVerticalScrollbarOverlay(<span class="literal">true</span>)<span class="comment">--设置垂直滚动条是否有叠加样式</span></span><br><span class="line">webView.setScrollBarStyle(webView.SCROLLBARS_OUTSIDE_OVERLAY)<span class="comment">--设置滚动条的样式</span></span><br><span class="line"></span><br><span class="line">webView.getSettings().setDomStorageEnabled(<span class="literal">true</span>); <span class="comment">--dom储存数据</span></span><br><span class="line">webView.getSettings().setDatabaseEnabled(<span class="literal">true</span>); <span class="comment">--数据库</span></span><br><span class="line">webView.getSettings().setAppCacheEnabled(<span class="literal">true</span>); <span class="comment">--启用缓存</span></span><br><span class="line">webView.getSettings().setCacheMode(webView.getSettings().LOAD_CACHE_ELSE_NETWORK);<span class="comment">--设置缓存加载方式</span></span><br><span class="line">webView.getSettings().setAllowFileAccess(<span class="literal">true</span>);<span class="comment">--允许访问文件</span></span><br><span class="line">webView.getSettings().setSaveFormData(<span class="literal">true</span>); <span class="comment">--保存表单数据，就是输入框的内容，但并不是全部输入框都会储存</span></span><br><span class="line">webView.getSettings().setAllowContentAccess(<span class="literal">true</span>); <span class="comment">--允许访问内容</span></span><br><span class="line">webView.getSettings().setJavaScriptEnabled(<span class="literal">true</span>); <span class="comment">--支持js脚本</span></span><br><span class="line">webView.getSettings().supportMultipleWindows() <span class="comment">--设置多窗口</span></span><br><span class="line">webView.setLayerType(View.LAYER_TYPE_HARDWARE,<span class="literal">nil</span>);<span class="comment">--硬件加速</span></span><br><span class="line">webView.getSettings().setPluginsEnabled(<span class="literal">true</span>)<span class="comment">--支持插件</span></span><br><span class="line">webView.getSettings().setJavaScriptCanOpenWindowsAutomatically(<span class="literal">true</span>); <span class="comment">--//支持通过JS打开新窗口</span></span><br><span class="line">webView.getSettings().setUserAgentString(<span class="string">&#x27;Mozilla/5.0 (Linux; Android 10.1.2; Build/NJH47F) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.109 Safari/537.36&#x27;</span>)<span class="comment">--设置浏览器标识(UA)</span></span><br><span class="line">webView.getSettings().setDefaultTextEncodingName(<span class="string">&quot;utf-8&quot;</span>)<span class="comment">--设置编码格式</span></span><br><span class="line">webView.getSettings().setTextZoom(<span class="number">100</span>)<span class="comment">--设置字体大小:100表示正常,120表示文字放大1.2倍</span></span><br><span class="line">webView.getSettings().setAcceptThirdPartyCookies(<span class="literal">true</span>) <span class="comment">--接受第三方cookie</span></span><br><span class="line">webView.getSettings().setSafeBrowsingEnabled(<span class="literal">true</span>)<span class="comment">--安全浏览</span></span><br><span class="line">webView.getSettings().setGeolocationEnabled(<span class="literal">true</span>);<span class="comment">--启用地理定位</span></span><br><span class="line"></span><br><span class="line">webView.goForward()<span class="comment">--网页前进</span></span><br><span class="line">webView.goBack()<span class="comment">--网页后退</span></span><br><span class="line">webView.reload()<span class="comment">--刷新网页</span></span><br><span class="line">webView.stopLoading()<span class="comment">--停止加载网页</span></span><br><span class="line"></span><br><span class="line">webView.getTitle()<span class="comment">--获取网页标题</span></span><br><span class="line">webView.getUrl()<span class="comment">--获取当前Url</span></span><br><span class="line">webView.getFavicon()<span class="comment">--获得当前网页的图标</span></span><br><span class="line">webView.getProgress()<span class="comment">--获得网页加载进度</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--状态监听</span></span><br><span class="line">webView.setWebViewClient&#123;</span><br><span class="line">  shouldOverrideUrlLoading=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line">    <span class="comment">--Url即将跳转</span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  onPageStarted=<span class="function"><span class="keyword">function</span><span class="params">(view,url,favicon)</span></span></span><br><span class="line">    <span class="comment">--网页即将加载</span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  onPageFinished=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line">    <span class="comment">--网页加载完成</span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  onReceivedError=<span class="function"><span class="keyword">function</span><span class="params">(view,code,des,url)</span></span></span><br><span class="line">    <span class="comment">--网页加载失败</span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  onLoadResource=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line">    <span class="comment">--加载页面资源时</span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  shouldInterceptRequest=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line">    <span class="comment">--加载url制定的资源</span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  onReceivedSslError=<span class="function"><span class="keyword">function</span><span class="params">(view,handler,err)</span></span></span><br><span class="line">    <span class="comment">--加载SSL证书错误时</span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">webView.setWebChromeClient(luajava.override(luajava.bindClass <span class="string">&quot;android.webkit.WebChromeClient&quot;</span>,&#123;</span><br><span class="line">  onReceivedTitle=<span class="function"><span class="keyword">function</span><span class="params">(super,view,title)</span></span></span><br><span class="line">    <span class="comment">--获取到网页标题</span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  onReceivedIcon=<span class="function"><span class="keyword">function</span><span class="params">(super,view,title)</span></span></span><br><span class="line">    <span class="comment">--获取到网页图标</span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  onProgressChanged=<span class="function"><span class="keyword">function</span><span class="params">(view,progress)</span></span></span><br><span class="line">    <span class="comment">--页面加载进度</span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line">webView.setDownloadListener&#123;</span><br><span class="line">  onDownloadStart=<span class="function"><span class="keyword">function</span><span class="params">(url,userAgent,contentDisposition,mimetype,contentLength)</span></span></span><br><span class="line">    <span class="comment">--即将下载文件时(链接,UA,处理,类型,大小)</span></span><br><span class="line">    <span class="keyword">local</span> 大小=<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%.2f&quot;</span>,contentLength/<span class="number">1048576</span>)..<span class="string">&quot;MB&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="三-WebView使用指南"><a href="#三-WebView使用指南" class="headerlink" title="三.WebView使用指南"></a>三.WebView使用指南</h2><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--WebView，看这一篇就够了！</span></span><br><span class="line"><span class="comment">--本项目亦可用作以WebView为主的项目的初始模板</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> WebChromeClient = luajava.bindClass <span class="string">&quot;android.webkit.WebChromeClient&quot;</span></span><br><span class="line"><span class="keyword">local</span> WebViewClient = luajava.bindClass <span class="string">&quot;android.webkit.WebViewClient&quot;</span></span><br><span class="line"><span class="keyword">local</span> DownloadListener = luajava.bindClass <span class="string">&quot;android.webkit.DownloadListener&quot;</span></span><br><span class="line"><span class="comment">-- 本项目总结了WebViewClient，WebChromeClient和DownloadListener的常用操作</span></span><br><span class="line"><span class="comment">-- 本项目可以用做使用WebView项目的初始代码</span></span><br><span class="line"><span class="comment">-- WebViewClient主要负责浏览器相关行为</span></span><br><span class="line"><span class="comment">-- WebChromeClient主要负责JS等脚本行为</span></span><br><span class="line"><span class="comment">-- DownloadListener负责浏览器的下载行为</span></span><br><span class="line"><span class="comment">-- 形参中的&quot;superCall&quot;是 luajava.override 返回的是 com.luajava.LuaMethodInterceptor 的内部类 SuperCall 对象，用于调用父类的这个方法</span></span><br><span class="line"><span class="comment">-- author Adam·Eva</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--本项目可以告诉你：</span></span><br><span class="line"><span class="comment">-- 1)如何避免SSL错误导致的卡死</span></span><br><span class="line"><span class="comment">-- 2)如何在WebView中执行自己想要的JavaScript脚本，例如通过JS删除指定元素，JS删除广告或其他内容</span></span><br><span class="line"><span class="comment">-- 3)如何禁止用户点击打开不允许打开的链接</span></span><br><span class="line"><span class="comment">-- 4)如何限制网页打开应用，以及获知有没有能打开的应用</span></span><br><span class="line"><span class="comment">-- 5)如何对网页中的原生JS弹窗进行处理</span></span><br><span class="line"><span class="comment">-- 6)如何上传文件</span></span><br><span class="line"><span class="comment">-- 7)如何掌握网页加载的整个流程</span></span><br><span class="line"><span class="comment">-- 8)如何监听下载文件</span></span><br><span class="line"><span class="comment">-- 9)如何获知用户点击了网页中的什么</span></span><br><span class="line"><span class="comment">-- 10)处理网页的定位请求</span></span><br><span class="line"><span class="comment">-- 11)通过CookieManager进行Cookie管理</span></span><br><span class="line"><span class="comment">-- 12)各种异常事件的处理</span></span><br><span class="line"><span class="comment">-- 13)自定义视频全屏和退出的行为和效果</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--先拿WebView，根据不同平台或布局，获取方式自行修改</span></span><br><span class="line"><span class="comment">--此处以FA2自带WebView为例</span></span><br><span class="line"><span class="comment">--为方便多浏览页调试不同类型网页写了个循环，maxPage指浏览页的数量</span></span><br><span class="line"><span class="keyword">local</span> maxPage=<span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">0</span>,maxPage<span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">  <span class="comment">--上面的i只在下面这行用到了一次</span></span><br><span class="line">  <span class="keyword">local</span> fragment = activity.getUiManager().getFragment(i)</span><br><span class="line">  <span class="keyword">local</span> webView = fragment.getWebView()</span><br><span class="line">  webView.loadUrl(<span class="string">&quot;https://httpstat.us/404&quot;</span>)</span><br><span class="line">  <span class="comment">--上传文件页面</span></span><br><span class="line">  <span class="comment">--webView.loadUrl(&quot;https://imgse.com/&quot;)</span></span><br><span class="line">  <span class="comment">--视频测试</span></span><br><span class="line">  <span class="comment">--webView.loadUrl(&quot;http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8&quot;)</span></span><br><span class="line">  <span class="comment">-- 用于错误页</span></span><br><span class="line">  <span class="keyword">local</span> errView,errStatus</span><br><span class="line">  <span class="comment">-- [[WebViewClient，用于浏览器操作</span></span><br><span class="line">  webView.setWebViewClient(luajava.override(WebViewClient,&#123;</span><br><span class="line">    shouldOverrideUrlLoading=<span class="function"><span class="keyword">function</span><span class="params">(superCall,view,webResourceRequest)</span></span></span><br><span class="line">      <span class="comment">--即将开始加载事件</span></span><br><span class="line">      <span class="comment">--返回true则拦截本次加载</span></span><br><span class="line">      <span class="comment">--拦截加载建议在这里操作</span></span><br><span class="line">      <span class="keyword">local</span> String = luajava.bindClass <span class="string">&quot;java.lang.String&quot;</span></span><br><span class="line">      <span class="keyword">local</span> Intent = luajava.bindClass <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">      <span class="keyword">local</span> Uri = luajava.bindClass <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;即将开始&quot;</span>,webResourceRequest.getMethod(),<span class="string">&quot;加载&quot;</span>,webResourceRequest.getUrl().toString())</span><br><span class="line">      <span class="comment">--判断加载的链接是http/s还是scheme</span></span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> webResourceRequest.getUrl().toSafeString():<span class="built_in">find</span>(<span class="string">&quot;^https?://&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;阻止了&quot;</span>..webResourceRequest.getUrl().toSafeString()..<span class="string">&quot;的加载\n并尝试启动外部应用&quot;</span>)</span><br><span class="line">        <span class="comment">--给scheme创建一个intent</span></span><br><span class="line">        <span class="keyword">local</span> intent = Intent(Intent.ACTION_VIEW, Uri.parse(webResourceRequest.getUrl().toString()))</span><br><span class="line">        <span class="comment">--判断有没有对应的应用能打开这个scheme</span></span><br><span class="line">        pm = activity.getPackageManager()</span><br><span class="line">        <span class="keyword">local</span> componentName = intent.resolveActivity(pm)</span><br><span class="line">        <span class="keyword">if</span> componentName == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;没有用于打开的应用哦&quot;</span>)</span><br><span class="line">         <span class="keyword">else</span></span><br><span class="line">          <span class="keyword">local</span> PackageManager = luajava.bindClass <span class="string">&quot;android.content.pm.PackageManager&quot;</span></span><br><span class="line">          <span class="keyword">local</span> pkgname = componentName.getPackageName()</span><br><span class="line">          <span class="keyword">local</span> appname = pm.getApplicationLabel(pm.getApplicationInfo(pkgname,PackageManager.GET_META_DATA))</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;有用于打开的应用哦：\n&quot;</span>..appname..<span class="string">&quot;\n&quot;</span>..pkgname)</span><br><span class="line">          <span class="comment">--打开它</span></span><br><span class="line">          <span class="comment">--activity.startActivity(intent)</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    shouldInterceptRequest=<span class="function"><span class="keyword">function</span><span class="params">(superCall,view,webResourceRequest)</span></span></span><br><span class="line">      <span class="comment">--控制网页中的资源加载，比如js/css等，并替换为自己的内容</span></span><br><span class="line">      <span class="keyword">if</span> webResourceRequest.getUrl().getPath():<span class="built_in">find</span>(<span class="string">&quot;png&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--print(&quot;阻止了资源&quot;..webResourceRequest.getUrl().getPath()..&quot;的加载&quot;)</span></span><br><span class="line">        <span class="keyword">local</span> WebResourceResponse = luajava.bindClass <span class="string">&quot;android.webkit.WebResourceResponse&quot;</span></span><br><span class="line">        <span class="keyword">local</span> ByteArrayInputStream = luajava.bindClass <span class="string">&quot;java.io.ByteArrayInputStream&quot;</span></span><br><span class="line">        <span class="keyword">local</span> String = luajava.bindClass <span class="string">&quot;java.lang.String&quot;</span></span><br><span class="line">        <span class="keyword">local</span> FileInputStream = luajava.bindClass <span class="string">&quot;java.io.FileInputStream&quot;</span></span><br><span class="line">        <span class="comment">--如果要阻止，则应该自己构建响应体以返回</span></span><br><span class="line">        <span class="comment">--这里以图片为例，拦截了png图片请求，所以读取了图片的二进制流</span></span><br><span class="line">        <span class="comment">--文本可以用java.io.ByteArrayInputStream读取为流</span></span><br><span class="line">        <span class="keyword">local</span> imgDir = activity.getLoader().getImagesDir(<span class="string">&quot;add&quot;</span>)</span><br><span class="line">        <span class="comment">--根据文件类型，记得修改mime类型</span></span><br><span class="line">        <span class="keyword">return</span> WebResourceResponse(<span class="string">&quot;image/png&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>, FileInputStream(imgDir))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onPageStarted=<span class="function"><span class="keyword">function</span><span class="params">(superCall,view,url,favicon)</span></span></span><br><span class="line">      <span class="comment">--页面开始加载事件</span></span><br><span class="line">      <span class="comment">--不建议用于禁止加载特定链接再goBack回去，这个行为应当使用shouldOverrideUrlLoading</span></span><br><span class="line">      <span class="built_in">print</span>(url..<span class="string">&quot;开始加载&quot;</span>)</span><br><span class="line">      <span class="comment">--但是可以把处理网页元素的方法扔在这里，或者onPageFinished里</span></span><br><span class="line">      <span class="keyword">local</span> ValueCallback = luajava.bindClass <span class="string">&quot;android.webkit.ValueCallback&quot;</span></span><br><span class="line">      <span class="comment">--要移除的元素，使用标准CSS选择器语法</span></span><br><span class="line">      <span class="comment">--学习参考 https://developer.mozilla.org/zh-CN/docs/Learn/CSS/First_steps</span></span><br><span class="line">      <span class="keyword">local</span> css = <span class="string">&quot;a&quot;</span></span><br><span class="line">      <span class="comment">--使用JS定时器移除元素，原因是有些元素可能会出来的非常晚，或执行某些操作后才出现</span></span><br><span class="line">      view.evaluateJavascript(<span class="string">[[</span></span><br><span class="line"><span class="string">      setInterval(() =&gt; &#123;</span></span><br><span class="line"><span class="string">          elements = document.querySelectorAll(&quot;]]</span>..css..<span class="string">[[&quot;)</span></span><br><span class="line"><span class="string">          elements.forEach(e =&gt; e.style.display = &quot;none&quot;)</span></span><br><span class="line"><span class="string">          // if (elements.length &gt; 0) alert(&quot;移除了&quot; + elements.length + &quot;个元素&quot;)</span></span><br><span class="line"><span class="string">          &#125;,100</span></span><br><span class="line"><span class="string">      )</span></span><br><span class="line"><span class="string">      ]]</span>,<span class="literal">nil</span>)</span><br><span class="line">      <span class="comment">--因为navigator.permission在 WebView 中未定义</span></span><br><span class="line">      <span class="comment">--所以navigator.clipboard.writeText无法获取写权限</span></span><br><span class="line">      <span class="comment">--因而考虑传回原生层处理</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">copyText</span><span class="params">(text)</span></span></span><br><span class="line">        <span class="keyword">local</span> Context = luajava.bindClass <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">        activity.getSystemService(Context.CLIPBOARD_SERVICE).setText(<span class="built_in">tostring</span>(text))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      view.evaluateJavascript(<span class="string">[[</span></span><br><span class="line"><span class="string">        const oldWrite = navigator.clipboard.writeText</span></span><br><span class="line"><span class="string">        navigator.clipboard.writeText = (text)=&gt;&#123;androlua.callLuaFunction(&quot;copyText&quot;,text)oldWrite(text)&#125;</span></span><br><span class="line"><span class="string">      ]]</span>,<span class="literal">nil</span>)</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onPageFinished=<span class="function"><span class="keyword">function</span><span class="params">(superCall,view,url)</span></span></span><br><span class="line">      <span class="comment">--页面加载结束事件</span></span><br><span class="line">      <span class="comment">--print(url..&quot;加载结束&quot;)</span></span><br><span class="line">      <span class="keyword">local</span> ValueCallback = luajava.bindClass <span class="string">&quot;android.webkit.ValueCallback&quot;</span></span><br><span class="line">      <span class="keyword">local</span> Uri = luajava.bindClass <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">      view.evaluateJavascript(<span class="string">&quot;((url)=&gt;&#123;alert(url);return url;&#125;)(&#x27;&quot;</span>..url..<span class="string">&quot;加载结束&#x27;)&quot;</span>,</span><br><span class="line">      ValueCallback&#123;</span><br><span class="line">        onReceiveValue=<span class="function"><span class="keyword">function</span><span class="params">(res)</span></span></span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;evaluateJavascript回调:&quot;</span>..res)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">--获取CookieManager单例来管理cookie</span></span><br><span class="line">      <span class="keyword">local</span> CookieManager = luajava.bindClass <span class="string">&quot;android.webkit.CookieManager&quot;</span></span><br><span class="line">      <span class="keyword">local</span> cookieManager = CookieManager.getInstance()</span><br><span class="line">      <span class="comment">--清空cookie</span></span><br><span class="line">      <span class="comment">--让我看看有多少人抄东西不过脑子</span></span><br><span class="line">      cookieManager.removeAllCookie()</span><br><span class="line">      <span class="comment">--设置cookie</span></span><br><span class="line">      cookieManager.setCookie(url,<span class="string">&quot;testCookie=this is a cookie&quot;</span>)</span><br><span class="line">      <span class="comment">--读取所有cookie</span></span><br><span class="line">      <span class="keyword">local</span> testCookie = cookieManager.getCookie(url)</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;获取&quot;</span>..Uri.parse(url).toSafeString()..<span class="string">&quot;的cookie：&quot;</span>..testCookie)</span><br><span class="line">      <span class="comment">--有错误页且此次没有错误码</span></span><br><span class="line">      <span class="keyword">if</span> errView ~= <span class="literal">nil</span> <span class="keyword">and</span> errStatus == <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">        errView.getParent().removeView(errView)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onLoadResource=<span class="function"><span class="keyword">function</span><span class="params">(superCall,view,url)</span></span></span><br><span class="line">      <span class="comment">--页面资源加载监听</span></span><br><span class="line">      <span class="comment">--可通过该方法获取网页上的资源</span></span><br><span class="line">      <span class="comment">--print(&quot;加载资源: &quot;..url)</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onReceivedSslError=<span class="function"><span class="keyword">function</span><span class="params">(superCall, view, sslErrorHandler, sslError)</span></span></span><br><span class="line">      <span class="comment">--ssl证书错误处理事件</span></span><br><span class="line">      <span class="comment">--需自行处理，否则在FA2中会导致卡死</span></span><br><span class="line">      <span class="comment">--返回true拦截原事件</span></span><br><span class="line">      <span class="keyword">local</span> sslErr = &#123;</span><br><span class="line">        [<span class="number">4</span>] = <span class="string">&quot;SSL_DATE_INVALID\n证书的日期无效&quot;</span>,</span><br><span class="line">        [<span class="number">1</span>] = <span class="string">&quot;SSL_EXPIRED\n证书已过期&quot;</span>,</span><br><span class="line">        [<span class="number">2</span>] = <span class="string">&quot;SSL_IDMISMATCH\n主机名称不匹配&quot;</span>,</span><br><span class="line">        [<span class="number">5</span>] = <span class="string">&quot;SSL_INVALID\n发生一般性错误&quot;</span>,</span><br><span class="line">        [<span class="number">6</span>] = <span class="string">&quot;SSL_MAX_ERROR\n此常量在API级别14中已弃用。此常数对于使用SslError API不是必需的，并且可以从发行版更改为发行版。&quot;</span>,</span><br><span class="line">        [<span class="number">0</span>] = <span class="string">&quot;SSL_NOTYETVALID\n证书尚未生效&quot;</span>,</span><br><span class="line">        [<span class="number">3</span>] = <span class="string">&quot;SSL_UNTRUSTED\n证书颁发机构不受信任&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">print</span>(sslError.getUrl()..<span class="string">&quot;遇到了SSL证书错误，错误类型:&quot;</span>..sslError.getPrimaryError()..<span class="string">&quot;\n&quot;</span>..sslErr[sslError.getPrimaryError()])</span><br><span class="line">      <span class="comment">--忽略错误</span></span><br><span class="line">      sslErrorHandler.proceed()</span><br><span class="line">      <span class="comment">--取消加载(这是默认行为)</span></span><br><span class="line">      <span class="comment">--sslErrorHandler.cancel()</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onReceivedHttpError=<span class="function"><span class="keyword">function</span><span class="params">(superCall, view, webResourceRequest, webResourceResponse)</span></span></span><br><span class="line">      <span class="comment">--请求返回HTTP错误码时</span></span><br><span class="line">      <span class="built_in">print</span>(webResourceRequest.getUrl().toString()..<span class="string">&quot;遇到HTTP错误码:&quot;</span>,webResourceResponse.getStatusCode(),<span class="string">&quot;原因:&quot;</span>,webResourceResponse.getReasonPhrase(),<span class="string">&quot;响应体:&quot;</span>,webResourceResponse.getData())</span><br><span class="line">      <span class="comment">--只考虑网页主请求</span></span><br><span class="line">      <span class="keyword">if</span> webResourceRequest.isForMainFrame() <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--以下错误页布局仅在FA2中有效，其他编辑器请自行更换页面</span></span><br><span class="line">        errStatus = webResourceResponse.getStatusCode()</span><br><span class="line">        <span class="keyword">local</span> errPage = luajava.bindClass<span class="string">&quot;net.fusionapp.core.R&quot;</span>.layout.web_error_page</span><br><span class="line">        <span class="keyword">local</span> inflater = luajava.bindClass <span class="string">&quot;android.view.LayoutInflater&quot;</span>.from(activity)</span><br><span class="line">        errView = inflater.inflate(errPage, <span class="literal">nil</span>)</span><br><span class="line">        view.getParent().addView(errView)</span><br><span class="line">        errView.setBackgroundColor(luajava.bindClass <span class="string">&quot;android.graphics.Color&quot;</span>.parseColor(<span class="string">&quot;#ffffff&quot;</span>))</span><br><span class="line">        errView.setOnClickListener(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">          errStatus = <span class="literal">nil</span></span><br><span class="line">          <span class="comment">-- view.reload()</span></span><br><span class="line">          view.loadUrl(<span class="string">&quot;https://www.baidu.com&quot;</span>)</span><br><span class="line">        <span class="keyword">end</span>)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onReceivedError=<span class="function"><span class="keyword">function</span><span class="params">(superCall, view, webResourceRequest,webResourceError)</span></span></span><br><span class="line">      <span class="comment">--页面加载异常事件</span></span><br><span class="line">      <span class="built_in">print</span>(webResourceRequest.getUrl().toSafeString()..<span class="string">&quot;\n加载异常，原因为:\n&quot;</span>..webResourceError.getDescription())</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">  &#125;))<span class="comment">--]]</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">-- 这里定义的变量是用于在onActivityResult中判断来源</span></span><br><span class="line">  <span class="keyword">local</span> fileRequestCode = <span class="number">12345</span></span><br><span class="line">  <span class="comment">-- 这里定义的变量是用于之后储存onShowCustomView的控件</span></span><br><span class="line">  <span class="keyword">local</span> customView</span><br><span class="line">  <span class="comment">-- 这里定义的变量是用于之后储存onShowCustomView时屏幕方向</span></span><br><span class="line">  <span class="keyword">local</span> orientation</span><br><span class="line">  <span class="comment">-- 这里定义的变量是用于之后储存onShowFileChooser的回调</span></span><br><span class="line">  <span class="keyword">local</span> uploadFile</span><br><span class="line">  <span class="comment">-- [[WebChromeClient，用于页面操作</span></span><br><span class="line">  webView.setWebChromeClient(luajava.override(WebChromeClient,&#123;</span><br><span class="line">    onJsTimeout=<span class="function"><span class="keyword">function</span><span class="params">(superCall)</span></span></span><br><span class="line">      <span class="comment">--网页中JS执行超时</span></span><br><span class="line">      <span class="comment">--停止执行</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">      <span class="comment">--继续执行，稍后会再次触发</span></span><br><span class="line">      <span class="comment">--return false</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onJsAlert=<span class="function"><span class="keyword">function</span><span class="params">(superCall,view,url,message,result)</span></span></span><br><span class="line">      <span class="comment">--网页提示弹框</span></span><br><span class="line">      <span class="comment">--在onJsAlert中，确认和取消没有区别</span></span><br><span class="line">      <span class="comment">--确认</span></span><br><span class="line">      result.confirm()</span><br><span class="line">      <span class="comment">--取消</span></span><br><span class="line">      <span class="comment">--result.cancel()</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Alert消息: &quot;</span>..message)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onJsConfirm=<span class="function"><span class="keyword">function</span><span class="params">(superCall,view,url,message,result)</span></span></span><br><span class="line">      <span class="comment">--网页确认弹框</span></span><br><span class="line">      <span class="comment">--确认</span></span><br><span class="line">      result.confirm()</span><br><span class="line">      <span class="comment">--取消</span></span><br><span class="line">      <span class="comment">--result.cancel()</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Confirm消息: &quot;</span>..message)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onJsPrompt=<span class="function"><span class="keyword">function</span><span class="params">(superCall,view,url,message,value,result)</span></span></span><br><span class="line">      <span class="comment">--网页输入弹框</span></span><br><span class="line">      <span class="comment">--空确认</span></span><br><span class="line">      <span class="comment">--result.confirm()</span></span><br><span class="line">      <span class="comment">--取消</span></span><br><span class="line">      <span class="comment">--result.cancel()</span></span><br><span class="line">      <span class="comment">--确认并返回输入文字</span></span><br><span class="line">      result.confirm(<span class="string">&quot;这里是输入的内容&quot;</span>)</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Prompt消息: &quot;</span>..message)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onConsoleMessage=<span class="function"><span class="keyword">function</span><span class="params">(superCall,message)</span></span></span><br><span class="line">      <span class="comment">--控制台消息</span></span><br><span class="line">      <span class="comment">--print(&quot;Console消息: &quot;..message.message())</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onReceivedTitle=<span class="function"><span class="keyword">function</span><span class="params">(superCall,view,title)</span></span></span><br><span class="line">      <span class="comment">--收到网页标题</span></span><br><span class="line">      activity.uiManager.toolbar.titleText=title</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onReceivedIcon=<span class="function"><span class="keyword">function</span><span class="params">(superCall,view,bitmap)</span></span></span><br><span class="line">      <span class="comment">--收到网页图标，是个Bitmap对象</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onProgressChanged=<span class="function"><span class="keyword">function</span><span class="params">(superCall,view,progress)</span></span></span><br><span class="line">      <span class="comment">--网页加载进度变化，下面这句针对FA2，其他编辑器请自行修改</span></span><br><span class="line">      view.parent.getChildAt(<span class="number">2</span>).progress=progress</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onShowFileChooser=<span class="function"><span class="keyword">function</span><span class="params">(superCall, view, valueCallback, fileChooserParams)</span></span></span><br><span class="line">      <span class="comment">--上传文件</span></span><br><span class="line">      <span class="keyword">local</span> Intent = luajava.bindClass <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">      <span class="comment">--保存回调</span></span><br><span class="line">      uploadFile=valueCallback</span><br><span class="line">      <span class="comment">--从fileChooserParams里取出Intent对象</span></span><br><span class="line">      <span class="comment">--这里的Intent对象已经设置好了参数</span></span><br><span class="line">      <span class="keyword">local</span> intent = fileChooserParams.createIntent()</span><br><span class="line">      <span class="comment">--允许多选</span></span><br><span class="line">      intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE,<span class="literal">true</span>)</span><br><span class="line">      activity.startActivityForResult(intent, fileRequestCode)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onGeolocationPermissionsShowPrompt=<span class="function"><span class="keyword">function</span><span class="params">(superCall, origin, callback)</span></span></span><br><span class="line">      <span class="comment">--收到来自网页的定位请求，自API24起，仅支持安全请求(https)调用，非安全(http)会直接拒绝且不调用此方法</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;请求定位：&quot;</span>..origin)</span><br><span class="line">      <span class="comment">--参数依次为来源，是否允许，是否记住(String origin, boolean allow, boolean remember)</span></span><br><span class="line">      <span class="comment">--可以在这个情况弹窗询问用户</span></span><br><span class="line">      <span class="comment">--别忘了给你APP申请定位权限！</span></span><br><span class="line">      callback.invoke(origin,<span class="literal">true</span>,<span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onPermissionRequest=<span class="function"><span class="keyword">function</span><span class="params">(superCall,permissionRequest)</span></span></span><br><span class="line">      <span class="keyword">local</span> Arrays = luajava.bindClass <span class="string">&quot;java.util.Arrays&quot;</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;来自网页&quot;</span>..permissionRequest.getOrigin().toSafeString()..<span class="string">&quot;的权限请求:&quot;</span>,Arrays.asList(permissionRequest.getResources()))</span><br><span class="line">      <span class="comment">--搭配原生的权限请求函数使用</span></span><br><span class="line">      <span class="comment">--同意所有</span></span><br><span class="line">      <span class="comment">--permissionRequest.grant(permissionRequest.getResources())</span></span><br><span class="line">      <span class="comment">--拒绝所有(默认行为)</span></span><br><span class="line">      permissionRequest.deny()</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onShowCustomView=<span class="function"><span class="keyword">function</span><span class="params">(superCall,view,callback)</span></span></span><br><span class="line">      <span class="comment">--重写 WebChromeClient 必须重写这个方法，否则影响视频全屏</span></span><br><span class="line">      <span class="comment">--Android开发者文档：如果这个方法没有被覆盖，WebView 将向网页报告它不支持全屏模式，并且不会接受网页在全屏模式下运行的请求。</span></span><br><span class="line">      <span class="comment">--视频全屏操作会执行这个方法，想要自己做全屏的可以在这里处理</span></span><br><span class="line">      <span class="comment">--callback 对象是 WebChromeClient.CustomViewCallback</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;视频全屏&quot;</span>)</span><br><span class="line">      <span class="built_in">print</span>(view.getClass())</span><br><span class="line">      <span class="comment">--保存一下屏幕方向。</span></span><br><span class="line">      orientation = activity.getRequestedOrientation() <span class="keyword">or</span> <span class="number">0</span></span><br><span class="line">      <span class="comment">-- 设置跟随传感方向</span></span><br><span class="line">      <span class="keyword">local</span> ActivityInfo = luajava.bindClass <span class="string">&quot;android.content.pm.ActivityInfo&quot;</span></span><br><span class="line">      activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR)</span><br><span class="line">      <span class="comment">--保存view供之后退出全屏时移除</span></span><br><span class="line">      customView = view</span><br><span class="line">      <span class="comment">--覆盖在根布局上面</span></span><br><span class="line">      <span class="keyword">local</span> FrameLayout = luajava.bindClass <span class="string">&quot;android.widget.FrameLayout&quot;</span></span><br><span class="line">      <span class="keyword">local</span> Gravity = luajava.bindClass <span class="string">&quot;android.view.Gravity&quot;</span></span><br><span class="line">      <span class="keyword">local</span> lp = FrameLayout.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT, FrameLayout.LayoutParams.MATCH_PARENT)</span><br><span class="line">      activity.addContentView(view,lp)</span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onHideCustomView=<span class="function"><span class="keyword">function</span><span class="params">(superCall)</span></span></span><br><span class="line">      <span class="comment">--视频退出全屏触发的方法，重写onShowCustomView必须同时重写这个方法</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;退出全屏&quot;</span>)</span><br><span class="line">      <span class="comment">--设置为原来的方向</span></span><br><span class="line">      activity.setRequestedOrientation(orientation)</span><br><span class="line">      <span class="comment">--移除view</span></span><br><span class="line">      customView.getParent().removeView(customView)</span><br><span class="line">      <span class="comment">--变量置空</span></span><br><span class="line">      customView = <span class="literal">nil</span></span><br><span class="line">      orientation = <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  &#125;))<span class="comment">--]]</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">--上传文件的回调在这里执行</span></span><br><span class="line">  onActivityResult=<span class="function"><span class="keyword">function</span><span class="params">(requestCode,resultCode,intent)</span></span></span><br><span class="line">    <span class="keyword">local</span> Activity = luajava.bindClass <span class="string">&quot;android.app.Activity&quot;</span></span><br><span class="line">    <span class="keyword">local</span> Uri = luajava.bindClass <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">    <span class="comment">--如果是来自onShowFileChooser</span></span><br><span class="line">    <span class="keyword">if</span> requestCode == fileRequestCode <span class="keyword">then</span></span><br><span class="line">      <span class="comment">--如果通过返回键回到应用</span></span><br><span class="line">      <span class="keyword">if</span> resultCode == Activity.RESULT_CANCELED <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--并且存在上传回调</span></span><br><span class="line">        <span class="keyword">if</span> uploadFile~=<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">          <span class="comment">--就返回空</span></span><br><span class="line">          uploadFile.onReceiveValue(<span class="literal">nil</span>)</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="comment">--定义结果变量，主要是为了确定作用域</span></span><br><span class="line">      <span class="keyword">local</span> results</span><br><span class="line">      <span class="comment">--如果正常返回</span></span><br><span class="line">      <span class="keyword">if</span> resultCode == Activity.RESULT_OK <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--但是回调对象不对</span></span><br><span class="line">        <span class="keyword">if</span> uploadFile==<span class="literal">nil</span> <span class="keyword">or</span> <span class="built_in">type</span>(uploadFile)==<span class="string">&quot;number&quot;</span> <span class="keyword">then</span></span><br><span class="line">          <span class="comment">--就直接结束</span></span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="comment">--如果返回Intent对象非空</span></span><br><span class="line">        <span class="keyword">if</span> intent ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">          <span class="comment">--拿到数据</span></span><br><span class="line">          <span class="keyword">local</span> dataString = intent.getDataString()</span><br><span class="line">          <span class="keyword">local</span> clipData = intent.getClipData()</span><br><span class="line">          <span class="keyword">if</span> clipData ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">            <span class="comment">--结果转成定长Uri数组</span></span><br><span class="line">            results = Uri[clipData.getItemCount()]</span><br><span class="line">            <span class="comment">--遍历并储存</span></span><br><span class="line">            <span class="keyword">for</span> i = <span class="number">0</span>,clipData.getItemCount()<span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">              <span class="keyword">local</span> item = clipData.getItemAt(i)</span><br><span class="line">              results[i] = item.getUri()</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line">          <span class="keyword">if</span> dataString ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">            results = Uri[<span class="number">1</span>]</span><br><span class="line">            results[<span class="number">0</span>]=Uri.parse(dataString)</span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">if</span> results~=<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--返回选择结果</span></span><br><span class="line">        uploadFile.onReceiveValue(results)</span><br><span class="line">        uploadFile = <span class="literal">nil</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  webView.setDownloadListener(DownloadListener&#123;</span><br><span class="line">    onDownloadStart=<span class="function"><span class="keyword">function</span><span class="params">(url, userAgent, contentDisposition, mimetype, contentLength)</span></span></span><br><span class="line">      <span class="comment">-- 详细的下载调用DownloadManager的代码我写的太长了</span></span><br><span class="line">      <span class="comment">-- 所以请参见我的“各种下载”项目</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;发现下载行为，\n文件描述为: &quot;</span>..contentDisposition..<span class="string">&quot;\n文件类型为: &quot;</span>..mimetype..<span class="string">&quot;\n文件大小为&quot;</span>..contentLength..<span class="string">&quot;\n下载链接是: &quot;</span>..url)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">--长按获取点击的元素(点击同理)</span></span><br><span class="line">  webView.onLongClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">local</span> WebView = luajava.bindClass <span class="string">&quot;android.webkit.WebView&quot;</span></span><br><span class="line">    <span class="comment">--print(webView.getContentHeight())</span></span><br><span class="line">    <span class="comment">--print(webView.onCheckIsTextEditor())</span></span><br><span class="line">    <span class="keyword">local</span> htr=webView.getHitTestResult()</span><br><span class="line">    <span class="comment">--print(htr.getType(),htr.getExtra())</span></span><br><span class="line">    <span class="comment">--通过type获得点击的类型，这里以图片为例</span></span><br><span class="line">    <span class="keyword">if</span> htr.getType()==WebView.HitTestResult.IMAGE_TYPE <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">local</span> imageName=htr.getExtra():<span class="built_in">match</span>(<span class="string">&quot;^.+/(.-)$&quot;</span>)</span><br><span class="line">      <span class="built_in">print</span>(htr.getExtra(),imageName)</span><br><span class="line">      <span class="comment">--自己去下载就完事了，不会的话，参考我的WebView各种下载项目</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">--由于WebView默认有自己的按键事件</span></span><br><span class="line">  <span class="comment">--当这个事件与我们activity的onKeyDown等冲突时</span></span><br><span class="line">  <span class="comment">--可以重写此方法</span></span><br><span class="line">  <span class="keyword">local</span> View = luajava.bindClass <span class="string">&quot;android.view.View&quot;</span></span><br><span class="line">  webView.setOnKeyListener(View.OnKeyListener&#123;</span><br><span class="line">    onKey=<span class="function"><span class="keyword">function</span><span class="params">(v, keyCode, event)</span></span></span><br><span class="line">      <span class="keyword">local</span> KeyEvent = luajava.bindClass <span class="string">&quot;android.view.KeyEvent&quot;</span></span><br><span class="line">      <span class="comment">--判断按键事件为“按下”</span></span><br><span class="line">      <span class="keyword">if</span> event.getAction() == KeyEvent.ACTION_DOWN <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--判断按的是返回键并且能回退网页</span></span><br><span class="line">        <span class="keyword">if</span> keyCode == KeyEvent.KEYCODE_BACK &amp;&amp; webView.canGoBack() <span class="keyword">then</span></span><br><span class="line">          <span class="comment">--这里放你的操作</span></span><br><span class="line">          webView.goBack()</span><br><span class="line">          <span class="comment">--直接返回true表明已经执行过返回键的操作</span></span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="comment">--其它按键依旧按默认处理</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  &#125;)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">附记：页面加载回调顺序</span></span><br><span class="line"><span class="comment">shouldOverrideUrlLoading</span></span><br><span class="line"><span class="comment">onProgressChanged[10]</span></span><br><span class="line"><span class="comment">shouldInterceptRequest </span></span><br><span class="line"><span class="comment">onProgressChanged[...]</span></span><br><span class="line"><span class="comment">onPageStarted</span></span><br><span class="line"><span class="comment">onProgressChanged[...]</span></span><br><span class="line"><span class="comment">onLoadResource </span></span><br><span class="line"><span class="comment">onProgressChanged[...]</span></span><br><span class="line"><span class="comment">onReceivedTitle/onPageCommitVisible </span></span><br><span class="line"><span class="comment">onProgressChanged[100]</span></span><br><span class="line"><span class="comment">onPageFinished</span></span><br><span class="line"><span class="comment">onReceivedIcon</span></span><br><span class="line"><span class="comment">]]</span></span><br></pre></td></tr></table></figure>

<h2 id="四-网页暗黑模式"><a href="#四-网页暗黑模式" class="headerlink" title="四.网页暗黑模式"></a>四.网页暗黑模式</h2><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isNightMode</span><span class="params">()</span></span> </span><br><span class="line">  <span class="keyword">local</span> Configuration=luajava.bindClass<span class="string">&quot;android.content.res.Configuration&quot;</span></span><br><span class="line">  currentNightMode = activity.getResources().getConfiguration().uiMode &amp; Configuration.UI_MODE_NIGHT_MASK</span><br><span class="line">  <span class="keyword">return</span> currentNightMode == Configuration.UI_MODE_NIGHT_YES<span class="comment">--夜间模式启用</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 请浏览</span></span><br><span class="line"><span class="comment">-- https://developer.android.google.cn/develop/ui/views/layout/webapps/dark-theme?authuser=0&amp;hl=zh-cn</span></span><br><span class="line"><span class="comment">-- 获取更多信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 允许使用算法调暗功能（以 Android 13 或更高版本为目标平台的应用）(targetSdkVersion至少是33)</span></span><br><span class="line">webView.getSettings().setAlgorithmicDarkeningAllowed(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 允许使用算法调暗功能（以 Android 12 或更低版本为目标平台的应用）(targetSdkVersion=&quot;32&quot;或以下)</span></span><br><span class="line">import <span class="string">&quot;androidx.webkit.WebSettingsCompat&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> isNightMode() <span class="keyword">then</span> <span class="comment">-- 也可以使用自己的相关的业务来判断是否启用</span></span><br><span class="line">  <span class="comment">-- 启用</span></span><br><span class="line">  WebSettingsCompat.setForceDark(webView.getSettings(),WebSettingsCompat.FORCE_DARK_ON)</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">  WebSettingsCompat.setForceDark(webView.getSettings(),WebSettingsCompat.FORCE_DARK_OFF)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="五-监听下载与上传"><a href="#五-监听下载与上传" class="headerlink" title="五.监听下载与上传"></a>五.监听下载与上传</h2><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--常用下载功能，包括直链下载，网页点击下载，下载进度监听等</span></span><br><span class="line"><span class="comment">--支持blob协议/data协议下载</span></span><br><span class="line"><span class="comment">--完善了文件名的逻辑</span></span><br><span class="line"><span class="comment">--如果需要修改储存路径，请阅读注释</span></span><br><span class="line"><span class="comment">--来源：Adam·Eva</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.DownloadManager&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.ProgressDialog&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.Environment&quot;</span></span><br><span class="line">import <span class="string">&quot;android.util.Base64&quot;</span></span><br><span class="line">import <span class="string">&quot;android.webkit.DownloadListener&quot;</span></span><br><span class="line">import <span class="string">&quot;android.webkit.MimeTypeMap&quot;</span></span><br><span class="line">import <span class="string">&quot;android.webkit.URLUtil&quot;</span></span><br><span class="line">import <span class="string">&quot;com.androlua.Ticker&quot;</span></span><br><span class="line">import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">import <span class="string">&quot;java.lang.System&quot;</span></span><br><span class="line">import <span class="string">&quot;java.net.URLDecoder&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.Build&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> uiManager=activity.getUiManager()</span><br><span class="line"><span class="keyword">local</span> webView=uiManager.getCurrentFragment().getWebView()</span><br><span class="line"></span><br><span class="line"><span class="comment">--http测试</span></span><br><span class="line">webView.loadUrl(<span class="string">&quot;http://tool.liumingye.cn/music/?page=audioPage&amp;type=migu&amp;name=%E8%A7%A3%E8%8D%AF&quot;</span>)</span><br><span class="line"><span class="comment">--blob测试</span></span><br><span class="line">webView.loadUrl(<span class="string">&quot;https://app.xunjiepdf.com/text2voice/&quot;</span>)</span><br><span class="line"><span class="comment">--data测试</span></span><br><span class="line"><span class="comment">--webView.loadUrl(&quot;&quot;)</span></span><br><span class="line"><span class="comment">--response只返回了URL的网站</span></span><br><span class="line"><span class="comment">--webView.loadUrl(&quot;http://music.vaiwan.com/&quot;)</span></span><br><span class="line"><span class="comment">--webView.loadUrl(&quot;https://viayoo.com&quot;)</span></span><br><span class="line"><span class="comment">--欢迎补充测试用例</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--如果是点击网页中的下载按钮</span></span><br><span class="line">webView.setDownloadListener(DownloadListener&#123;</span><br><span class="line">  onDownloadStart=<span class="function"><span class="keyword">function</span><span class="params">(url, userAgent, contentDisposition, mimetype, contentLength)</span></span></span><br><span class="line">    <span class="comment">--activity.getSystemService(Context.CLIPBOARD_SERVICE).setText(url)</span></span><br><span class="line">    <span class="built_in">print</span>(url, contentDisposition, mimetype, contentLength)</span><br><span class="line">    <span class="keyword">local</span> ext = MimeTypeMap.getSingleton().getExtensionFromMimeType(mimetype)</span><br><span class="line">    <span class="keyword">local</span> filename = URLUtil.guessFileName(url,contentDisposition,mimetype)</span><br><span class="line">    <span class="comment">--受mime影响识别错误时再尝试一下</span></span><br><span class="line">    <span class="keyword">if</span> filename:<span class="built_in">match</span>(<span class="string">&quot;%.bin$&quot;</span>) <span class="keyword">then</span></span><br><span class="line">      filename = URLUtil.guessFileName(url,contentDisposition,<span class="literal">nil</span>)</span><br><span class="line">      ext = filename:<span class="built_in">match</span>(<span class="string">&quot;.+%.(.+)$&quot;</span>) <span class="keyword">or</span> ext</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">--print(&quot;guess&quot;,filename,ext)</span></span><br><span class="line">    webView.evaluateJavascript(<span class="string">&quot;document.querySelector(&#x27;[href=\&quot;&quot;</span> .. url .. <span class="string">&quot;\&quot;]&#x27;).download&quot;</span>, <span class="function"><span class="keyword">function</span><span class="params">(result)</span></span></span><br><span class="line">      <span class="comment">--文件名处理</span></span><br><span class="line">      <span class="keyword">if</span> result ~= <span class="literal">nil</span> <span class="keyword">and</span> result ~= <span class="string">&quot;\&quot;\&quot;&quot;</span> <span class="keyword">and</span> result ~= <span class="string">&quot;null&quot;</span> <span class="keyword">then</span></span><br><span class="line">        filename = result:<span class="built_in">gsub</span>(<span class="string">&quot;\&quot;&quot;</span>, <span class="string">&quot;&quot;</span>) <span class="keyword">or</span> filename</span><br><span class="line">        <span class="keyword">if</span> MimeTypeMap.getSingleton().hasExtension(filename:<span class="built_in">match</span>(<span class="string">&quot;.+%.(.+)$&quot;</span>)) <span class="keyword">then</span></span><br><span class="line">          ext = filename:<span class="built_in">match</span>(<span class="string">&quot;.+%.(.+)$&quot;</span>) <span class="keyword">or</span> ext</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="comment">--print(&quot;js&quot;,filename,ext)</span></span><br><span class="line">      filename=URLDecoder.decode(filename)</span><br><span class="line">      <span class="keyword">if</span> filename == <span class="literal">nil</span> <span class="keyword">or</span> filename == <span class="string">&quot;&quot;</span> <span class="keyword">then</span></span><br><span class="line">        filename = <span class="built_in">tostring</span>(System.currentTimeMillis())</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> filename:<span class="built_in">match</span>(<span class="string">&quot;%.&quot;</span>..ext..<span class="string">&quot;$&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        filename = filename..<span class="string">&quot;.&quot;</span>..ext</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="built_in">print</span>(filename)</span><br><span class="line">      <span class="comment">--路径处理</span></span><br><span class="line">      <span class="comment">--在这里设置储存设置路径，如Download</span></span><br><span class="line">      <span class="keyword">local</span> fullPath = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)</span><br><span class="line">      <span class="keyword">local</span> <span class="built_in">path</span> = fullPath</span><br><span class="line">      <span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">29</span> <span class="keyword">then</span> <span class="comment">--Build.VERSION_CODES.Q</span></span><br><span class="line">        <span class="built_in">path</span> = Environment.DIRECTORY_DOWNLOADS</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">local</span> file = File(fullPath,filename)</span><br><span class="line">      <span class="comment">--是否覆盖下载</span></span><br><span class="line">      file.delete()</span><br><span class="line">      <span class="comment">--base64解码输出，这个方法需要文件读写权限，记得申请</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">base64write</span><span class="params">(data)</span></span></span><br><span class="line">        make_Snackbar(<span class="string">&quot;下载开始&quot;</span>,<span class="literal">nil</span>,<span class="literal">nil</span>)</span><br><span class="line">        file.createNewFile()</span><br><span class="line">        <span class="keyword">local</span> Bdata=Base64.decode(data,Base64.DEFAULT)</span><br><span class="line">        <span class="keyword">local</span> <span class="built_in">output</span>=activity.ContentResolver.openOutputStream(Uri.fromFile(file))</span><br><span class="line">        <span class="built_in">output</span>.<span class="built_in">write</span>(Bdata)</span><br><span class="line">        <span class="built_in">output</span>.<span class="built_in">close</span>()</span><br><span class="line">        make_Snackbar(<span class="string">&quot;下载结束&quot;</span>,<span class="literal">nil</span>,<span class="literal">nil</span>)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="comment">--根据下载链接类型选择下载方式</span></span><br><span class="line">      <span class="comment">--DownloadManager只能下载http/https协议的链接</span></span><br><span class="line">      <span class="keyword">if</span> URLUtil.isHttpUrl(url) <span class="keyword">or</span> URLUtil.isHttpsUrl(url) <span class="keyword">then</span></span><br><span class="line">        make_dialog(<span class="string">&quot;下载&quot;</span>, filename, <span class="literal">nil</span>, <span class="string">&quot;取消&quot;</span>, <span class="string">&quot;保存&quot;</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">          <span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">29</span> <span class="keyword">then</span> <span class="comment">--Build.VERSION_CODES.Q</span></span><br><span class="line">            download(url, <span class="built_in">path</span>, filename)</span><br><span class="line">           <span class="keyword">else</span></span><br><span class="line">            download(url, fullPath, filename)</span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span>)</span><br><span class="line">        <span class="comment">--其他的要自己实现</span></span><br><span class="line">       <span class="keyword">elseif</span> url:<span class="built_in">find</span>(<span class="string">&quot;^blob&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">blob</span><span class="params">()</span></span></span><br><span class="line">          <span class="keyword">local</span> JSblob=<span class="string">[[</span></span><br><span class="line"><span class="string">          fetch(&#x27;]]</span>..url..<span class="string">[[&#x27;, &#123;</span></span><br><span class="line"><span class="string">            responseType: &#x27;blob&#x27;</span></span><br><span class="line"><span class="string">          &#125;).then((res) = &gt;&#123;</span></span><br><span class="line"><span class="string">	        res.blob().then((data) = &gt;&#123;</span></span><br><span class="line"><span class="string">		      data.arrayBuffer().then((buffer) = &gt;&#123;</span></span><br><span class="line"><span class="string">			    window.androlua.callLuaFunction(&quot;base64write&quot;, btoa(String.fromCharCode(...new Uint8Array(buffer))))</span></span><br><span class="line"><span class="string">		      &#125;)</span></span><br><span class="line"><span class="string">	        &#125;)</span></span><br><span class="line"><span class="string">          &#125;)</span></span><br><span class="line"><span class="string">          ]]</span></span><br><span class="line">          webView.loadUrl(<span class="string">&#x27;javascript:&#x27;</span>..JSblob)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        make_dialog(<span class="string">&quot;下载&quot;</span>,filename,<span class="string">&quot;取消&quot;</span>,<span class="string">&quot;保存&quot;</span>,<span class="literal">nil</span>,<span class="literal">nil</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span> blob() <span class="keyword">end</span>)</span><br><span class="line">       <span class="keyword">elseif</span> URLUtil.isDataUrl(url) <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--是否base64编码</span></span><br><span class="line">        <span class="keyword">if</span> url:<span class="built_in">find</span>(<span class="string">&quot;^data:(.-)(;base64),(.-)$&quot;</span>) <span class="keyword">then</span></span><br><span class="line">          <span class="keyword">local</span> mime,data=url:<span class="built_in">match</span>(<span class="string">&quot;^data:(.-);base64,(.-)$&quot;</span>)</span><br><span class="line">          base64write(data)</span><br><span class="line">         <span class="keyword">else</span></span><br><span class="line">          <span class="keyword">local</span> mime,data=url:<span class="built_in">match</span>(<span class="string">&quot;^data:(.-),(.-)$&quot;</span>)</span><br><span class="line">          <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">path</span>,<span class="string">&quot;w+&quot;</span>):<span class="built_in">write</span>(URLDecoder.decode(data)):<span class="built_in">close</span>()</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">        <span class="comment">--不认识的协议？那没办法</span></span><br><span class="line">        make_Snackbar(<span class="string">&quot;您遇到了未知的下载类型，请去浏览器尝试下载&quot;</span>,<span class="string">&quot;打开&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span> openExtUrl(webView.getUrl()) <span class="keyword">end</span>)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--监听下载进度，并使用ProgressDialog和定时器显示进度，如果ProgressDialog不好看你可以自己改改</span></span><br><span class="line"><span class="comment">--参数：url是文件直链,path是目录,file是文件名</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">download</span><span class="params">(url, filepath, filename)</span></span></span><br><span class="line">  <span class="keyword">local</span> downloadId = downloadFile(url, filepath, filename)</span><br><span class="line">  <span class="keyword">local</span> dlDialog = ProgressDialog(this)</span><br><span class="line">  dlDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);</span><br><span class="line">  <span class="comment">--设置进度条的形式为水平进度条</span></span><br><span class="line">  dlDialog.setTitle(<span class="string">&quot;即将开始下载...&quot;</span>)</span><br><span class="line">  dlDialog.setCancelable(<span class="literal">false</span>)<span class="comment">--设置是否可以通过点击Back键取消</span></span><br><span class="line">  dlDialog.setCanceledOnTouchOutside(<span class="literal">false</span>)<span class="comment">--设置在点击Dialog外是否取消Dialog进度条</span></span><br><span class="line">  dlDialog.setOnCancelListener&#123;</span><br><span class="line">    onCancel=<span class="function"><span class="keyword">function</span><span class="params">(l)</span></span></span><br><span class="line">      make_Snackbar(<span class="string">&quot;将进入后台下载，请在通知栏检查下载进度&quot;</span>,<span class="literal">nil</span>,<span class="literal">nil</span>)</span><br><span class="line">    <span class="keyword">end</span>&#125;</span><br><span class="line">  dlDialog.setMax(<span class="number">1</span>)</span><br><span class="line">  dlDialog.setProgress(<span class="number">0</span>)</span><br><span class="line">  dlDialog.show()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> ti=Ticker()</span><br><span class="line">  ti.Period=<span class="number">100</span></span><br><span class="line">  ti.onTick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">--事件</span></span><br><span class="line">    <span class="keyword">local</span> fileUri,<span class="built_in">status</span>,totalSize,downloadedSize = query(downloadId)</span><br><span class="line">    <span class="keyword">if</span> totalSize <span class="keyword">and</span> totalSize&gt;<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> <span class="built_in">status</span>==<span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--等待下载</span></span><br><span class="line">        dlDialog.setTitle(<span class="string">&quot;等待下载...&quot;</span>)</span><br><span class="line">        <span class="comment">--print(&quot;等待下载&quot;)</span></span><br><span class="line">       <span class="keyword">elseif</span> <span class="built_in">status</span>==<span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--正在下载</span></span><br><span class="line">        dlDialog.setTitle(<span class="string">&quot;正在下载...&quot;</span>)</span><br><span class="line">        dlDialog.setMax(totalSize)</span><br><span class="line">        dlDialog.setProgress(downloadedSize)</span><br><span class="line">       <span class="keyword">elseif</span> <span class="built_in">status</span>==<span class="number">4</span> <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--下载暂停</span></span><br><span class="line">        dlDialog.setTitle(<span class="string">&quot;下载暂停...&quot;</span>)</span><br><span class="line">        <span class="comment">--print(&quot;下载暂停&quot;)</span></span><br><span class="line">       <span class="keyword">elseif</span> <span class="built_in">status</span>==<span class="number">8</span> <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--下载成功</span></span><br><span class="line">        dlDialog.setTitle(<span class="string">&quot;下载成功&quot;</span>)</span><br><span class="line">        dlDialog.setMax(totalSize)</span><br><span class="line">        dlDialog.setProgress(totalSize)</span><br><span class="line">        make_Snackbar(<span class="string">&quot;下载成功&quot;</span>,<span class="string">&quot;打开&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>openExtUrl(fileUri)<span class="keyword">end</span>)</span><br><span class="line">        dlDialog.dismiss()</span><br><span class="line">        ti.stop()</span><br><span class="line">       <span class="keyword">elseif</span> <span class="built_in">status</span>==<span class="number">16</span> <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--下载失败</span></span><br><span class="line">        dlDialog.dismiss()</span><br><span class="line">        make_Snackbar(<span class="string">&quot;下载失败，请重试&quot;</span>,<span class="literal">nil</span>,<span class="literal">nil</span>)</span><br><span class="line">        ti.stop()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  ti.start()<span class="comment">--启动Ticker定时器</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--参数：url是文件直链,path是目录,file是文件名</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">downloadFile</span><span class="params">(url, path, filename)</span></span></span><br><span class="line">  <span class="keyword">local</span> downloadManager=activity.getSystemService(Context.DOWNLOAD_SERVICE)</span><br><span class="line">  <span class="keyword">local</span> dlurl=Uri.parse(url)</span><br><span class="line">  <span class="keyword">local</span> request=DownloadManager.Request(dlurl)</span><br><span class="line">  request.setAllowedNetworkTypes(DownloadManager.Request.NETWORK_MOBILE|DownloadManager.Request.NETWORK_WIFI)</span><br><span class="line">  request.setDestinationInExternalPublicDir(<span class="built_in">path</span>, filename)</span><br><span class="line">  request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE)<span class="comment">--|DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED)</span></span><br><span class="line">  request.setVisibleInDownloadsUi(<span class="literal">true</span>)</span><br><span class="line">  <span class="comment">--如果下载链接有referer验证，加上这句</span></span><br><span class="line">  <span class="comment">--request.addRequestHeader(&quot;referer&quot;,验证域名)</span></span><br><span class="line">  <span class="keyword">local</span> downloadId=downloadManager.enqueue(request)</span><br><span class="line">  <span class="keyword">return</span> downloadId</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--查询状态</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">query</span><span class="params">(downloadId)</span></span></span><br><span class="line">  <span class="keyword">local</span> downloadManager=activity.getSystemService(Context.DOWNLOAD_SERVICE);</span><br><span class="line">  <span class="keyword">local</span> downloadQuery = DownloadManager.Query();</span><br><span class="line">  downloadQuery.setFilterById(&#123;downloadId&#125;);</span><br><span class="line">  <span class="keyword">local</span> cursor = downloadManager.query(downloadQuery);</span><br><span class="line">  <span class="keyword">if</span> (cursor != null <span class="keyword">and</span> cursor.moveToFirst()) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">local</span> fileUri = cursor.getString(cursor.getColumnIndex(DownloadManager.COLUMN_LOCAL_URI))</span><br><span class="line">    <span class="comment">-- 下载请求的状态</span></span><br><span class="line">    <span class="keyword">local</span> <span class="built_in">status</span> = cursor.getInt(cursor.getColumnIndex(DownloadManager.COLUMN_STATUS))</span><br><span class="line">    <span class="comment">-- 下载文件的总字节大小</span></span><br><span class="line">    <span class="keyword">local</span> totalSize = cursor.getLong(cursor.getColumnIndex(DownloadManager.COLUMN_TOTAL_SIZE_BYTES))</span><br><span class="line">    <span class="comment">-- 已下载的字节大小</span></span><br><span class="line">    <span class="keyword">local</span> downloadedSize = cursor.getLong(cursor.getColumnIndex(DownloadManager.COLUMN_BYTES_DOWNLOADED_SO_FAR))</span><br><span class="line">    cursor.<span class="built_in">close</span>()</span><br><span class="line">    <span class="keyword">return</span> fileUri,<span class="built_in">status</span>,totalSize,downloadedSize</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--下面是其他相关调用的函数，你可以按需使用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--弹窗的</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">make_dialog</span><span class="params">(title, text, NeutralButton, NegativeButton, PositiveButton, funa, funb, func)</span></span></span><br><span class="line">  import <span class="string">&quot;androidx.appcompat.app.AlertDialog&quot;</span></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> activity.isFinishing() <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> funa==<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">      funa=<span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> funb==<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">      funb=<span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> func==<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">      func=<span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    dialog=AlertDialog.Builder(activity)</span><br><span class="line">    .setTitle(title)</span><br><span class="line">    .setMessage(text)</span><br><span class="line">    .setCancelable(<span class="literal">false</span>)</span><br><span class="line">    .setNeutralButton(NeutralButton,&#123;</span><br><span class="line">      onClick=funa</span><br><span class="line">    &#125;)</span><br><span class="line">    .setNegativeButton(NegativeButton,&#123;</span><br><span class="line">      onClick=funb</span><br><span class="line">    &#125;)</span><br><span class="line">    .setPositiveButton(PositiveButton,&#123;</span><br><span class="line">      onClick=func</span><br><span class="line">    &#125;)</span><br><span class="line">    .show()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--弹出信息的</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">make_Snackbar</span><span class="params">(text, btn, fun)</span></span></span><br><span class="line">  import <span class="string">&quot;com.google.android.material.snackbar.Snackbar&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.view.View&quot;</span></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> activity.isFinishing() <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> btn==<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">      btn=<span class="string">&quot;确定&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> fun==<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">      fun=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span> <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> anchor=activity.findViewById(android.R.id.content)</span><br><span class="line">    Snackbar.make(anchor, text, Snackbar.LENGTH_LONG).setAction(btn, View.OnClickListener&#123;</span><br><span class="line">      onClick=fun</span><br><span class="line">    &#125;).show()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--浏览器打开链接的</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">openExtUrl</span><span class="params">(extURL)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.webkit.MimeTypeMap&quot;</span></span><br><span class="line">  import <span class="string">&quot;androidx.core.content.FileProvider&quot;</span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Intent.ACTION_VIEW)</span><br><span class="line">  <span class="keyword">local</span> fileUri = Uri.parse(extURL)</span><br><span class="line">  <span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">29</span> <span class="keyword">and</span> fileUri.getScheme() == <span class="string">&quot;file&quot;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">local</span> extName = extURL:<span class="built_in">match</span>(<span class="string">&quot;.+%.(.-)$&quot;</span>)</span><br><span class="line">    <span class="keyword">local</span> mime = MimeTypeMap.getSingleton().getMimeTypeFromExtension(extName)</span><br><span class="line">    <span class="keyword">local</span> authorities = activity.getPackageName()..<span class="string">&quot;.FileProvider&quot;</span></span><br><span class="line">    fileUri = FileProvider.getUriForFile(activity, authorities, File(extURL))</span><br><span class="line">    intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  intent.setDataAndType(extURL, mime)</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--WebView上传文件</span></span><br><span class="line"><span class="comment">--补充多选支持</span></span><br><span class="line"><span class="comment">--Source: Adam·Eva</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> uiManager=activity.getUiManager()</span><br><span class="line"><span class="keyword">local</span> webView=uiManager.getCurrentFragment().getWebView()</span><br><span class="line"><span class="comment">-- [[</span></span><br><span class="line"><span class="keyword">local</span> WebChromeClient = luajava.bindClass <span class="string">&quot;android.webkit.WebChromeClient&quot;</span></span><br><span class="line">webView.setWebChromeClient(luajava.override(WebChromeClient,&#123;</span><br><span class="line">  onShowFileChooser=<span class="function"><span class="keyword">function</span><span class="params">(a, view, valueCallback, fileChooserParams)</span></span></span><br><span class="line">    <span class="comment">--print(a, view, valueCallback, fileChooserParams)</span></span><br><span class="line">    uploadFile=valueCallback</span><br><span class="line">    <span class="keyword">local</span> intent = fileChooserParams.createIntent()</span><br><span class="line">    activity.startActivityForResult(intent, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">&#125;))</span><br><span class="line"><span class="comment">--]]</span></span><br><span class="line">onActivityResult=<span class="function"><span class="keyword">function</span><span class="params">(req,res,intent)</span></span></span><br><span class="line">  <span class="keyword">local</span> Activity = luajava.bindClass <span class="string">&quot;android.app.Activity&quot;</span></span><br><span class="line">  <span class="keyword">local</span> Uri = luajava.bindClass <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  <span class="keyword">if</span> res == Activity.RESULT_CANCELED <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> uploadFile~=<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">      uploadFile.onReceiveValue(<span class="literal">nil</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">local</span> results</span><br><span class="line">  <span class="keyword">if</span> res == Activity.RESULT_OK <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> uploadFile==<span class="literal">nil</span> <span class="keyword">or</span> <span class="built_in">type</span>(uploadFile)==<span class="string">&quot;number&quot;</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> intent ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">local</span> dataString = intent.getDataString();</span><br><span class="line">      <span class="keyword">local</span> clipData = intent.getClipData();</span><br><span class="line">      <span class="keyword">if</span> clipData ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">        results = Uri[clipData.getItemCount()];</span><br><span class="line">        <span class="keyword">for</span> i = <span class="number">0</span>,clipData.getItemCount()<span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">          <span class="keyword">local</span> item = clipData.getItemAt(i);</span><br><span class="line">          results[i] = item.getUri();</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">if</span> dataString ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">        results = Uri[<span class="number">1</span>];</span><br><span class="line">        results[<span class="number">0</span>]=Uri.parse(dataString)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> results~=<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    uploadFile.onReceiveValue(results);</span><br><span class="line">    uploadFile = <span class="literal">nil</span>;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>软件开发</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>软件</tag>
        <tag>Android</tag>
        <tag>FusionApp</tag>
      </tags>
  </entry>
  <entry>
    <title>两种方式实现自制随机图片API</title>
    <url>/posts/16ed.html</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>大家在使用头像API、随机背景API、随机壁纸API这类图片接口时，是不是常常为接口的稳定性和图片内容质量而烦恼？别担心，白衣这就为大家带来一个超实用教程，手把手教你轻松搭建专属自己的<strong>随机图片获取API</strong>。 </p>
<h2 id="一、外链读取txt实现"><a href="#一、外链读取txt实现" class="headerlink" title="一、外链读取txt实现"></a>一、外链读取txt实现</h2><h3 id="1-创建api-php文件"><a href="#1-创建api-php文件" class="headerlink" title="1. 创建api.php文件"></a>1. 创建api.php文件</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 使用__DIR__常量获取当前脚本所在目录，并拼接文件路径</span></span><br><span class="line"><span class="variable">$filename</span> = <span class="keyword">__DIR__</span>. <span class="string">&#x27;/img.txt&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">file_exists</span>(<span class="variable">$filename</span>)) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;文件不存在&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打开文件并检查是否成功</span></span><br><span class="line"><span class="variable">$fs</span> = <span class="title function_ invoke__">fopen</span>(<span class="variable">$filename</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (!<span class="variable">$fs</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;无法打开文件&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 从文本获取链接</span></span><br><span class="line"><span class="variable">$pics</span> = [];</span><br><span class="line"><span class="keyword">while</span> (!<span class="title function_ invoke__">feof</span>(<span class="variable">$fs</span>)) &#123;</span><br><span class="line">    <span class="variable">$line</span> = <span class="title function_ invoke__">trim</span>(<span class="title function_ invoke__">fgets</span>(<span class="variable">$fs</span>));</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$line</span>!== <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">array_push</span>(<span class="variable">$pics</span>, <span class="variable">$line</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$fs</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 从数组随机获取链接</span></span><br><span class="line"><span class="variable">$pic</span> = <span class="variable">$pics</span>[<span class="title function_ invoke__">array_rand</span>(<span class="variable">$pics</span>)];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取type参数</span></span><br><span class="line"><span class="variable">$type</span> = <span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;type&#x27;</span>])? <span class="variable">$_GET</span>[<span class="string">&#x27;type&#x27;</span>] : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (<span class="variable">$type</span>) &#123;</span><br><span class="line">    <span class="comment">// JSON返回</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;json&#x27;</span>:</span><br><span class="line">        <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content - type:text/json&#x27;</span>);</span><br><span class="line">        <span class="keyword">die</span>(<span class="title function_ invoke__">json_encode</span>([<span class="string">&#x27;pic&#x27;</span> =&gt; <span class="variable">$pic</span>]));</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="comment">// 验证链接是否合法</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">filter_var</span>(<span class="variable">$pic</span>, FILTER_VALIDATE_URL)) &#123;</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">&#x27;无效的图片链接&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">die</span>(<span class="title function_ invoke__">header</span>(<span class="string">&quot;Location: <span class="subst">$pic</span>&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-创建img-txt文件"><a href="#2-创建img-txt文件" class="headerlink" title="2. 创建img.txt文件"></a>2. 创建img.txt文件</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">http://example.com/image1.jpg</span><br><span class="line">http://example.com/image2.jpg</span><br><span class="line">http://example.com/image3.jpg</span><br></pre></td></tr></table></figure>
<p>访问你的网址&#x2F;api.php访问就可以实现了，<code>api.php</code>和 <code>img.txt</code> 理想目录是在同一目录下。如果将<code>img.txt</code>放于特定目录，需在<code>api.php</code>中修改<code>$filename</code>变量指定完整路径，如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$filename = &#x27;/var/www/wwwroot/data/img.txt&#x27;; </span><br></pre></td></tr></table></figure>
<h2 id="二、读取本地目录实现"><a href="#二、读取本地目录实现" class="headerlink" title="二、读取本地目录实现"></a>二、读取本地目录实现</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$img_array</span> = <span class="title function_ invoke__">glob</span>(<span class="string">&quot;images/*.&#123;gif,jpg,png&#125;&quot;</span>, GLOB_BRACE);</span><br><span class="line"><span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$img_array</span>)) &#123;</span><br><span class="line">    <span class="variable">$img</span> = <span class="title function_ invoke__">array_rand</span>(<span class="variable">$img_array</span>);</span><br><span class="line">    <span class="variable">$dz</span> = <span class="variable">$img_array</span>[<span class="variable">$img</span>];</span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&quot;Location: &quot;</span> . <span class="variable">$dz</span>);</span><br><span class="line">    <span class="keyword">exit</span>; <span class="comment">// 重定向后终止脚本执行</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;没有找到符合条件的图片文件。&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>把图片丢到images文件夹下，访问<strong>api.php</strong>即可，其实就是在指定的<strong>images</strong>目录下查找gif 、jpg 、png 等格式的文件，随机选择一张并将浏览器重定向到该图片的路径进行展示</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>总之，第一种是外链读取方式，图片资源不需要放在本地，可以大大节省服务器空间，缺点就是你<strong>需要保证外链的有效性</strong>，当外链过多的时候，维护也是一个麻烦的事情。而第二种方式非常简单，不过图片都放在了本地目录，<strong>需要一定的空间存储支持</strong>。最后，相信你可以选择自己喜欢的方式去搭建自己的专属的图片API。</p>
]]></content>
      <categories>
        <category>技术教程</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>API</tag>
        <tag>接口</tag>
      </tags>
  </entry>
  <entry>
    <title>solitude主题自定义侧边栏之微信公众号卡片</title>
    <url>/posts/bfde1066.html</url>
    <content><![CDATA[<h2 id="一-修改aside-yml"><a href="#一-修改aside-yml" class="headerlink" title="一.修改aside.yml"></a>一.修改aside.yml</h2><figure class="highlight plaintext"><figcaption><span>路径</span></figcaption><table><tr><td class="code"><pre><span class="line">E:</span><br><span class="line">└── 博客根目录</span><br><span class="line">    └── source</span><br><span class="line">        └── _data</span><br><span class="line">            └── aside.yml</span><br></pre></td></tr></table></figure>
<p>在以上目录找到<code>aside.yml</code>，如果没有就新建一个。然后里边填入以下代码：</p>
<figure class="highlight yaml"><figcaption><span>aside.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">cardwechat</span></span><br><span class="line">  <span class="attr">content_html:</span> <span class="string">&#x27;&lt;div class=&quot;card-widget baiyi-right-widget&quot; id=&quot;card-wechat&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;div id=&quot;flip-wrapper&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div id=&quot;flip-content&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;face&quot; style=&quot;background:url(/img/sucai/wx1.png) center center/100% no-repeat&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;back face&quot; style=&quot;background:url(/img/sucai/wx2.png) center center/100% no-repeat&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">cardqq</span></span><br><span class="line">  <span class="attr">content_html:</span> <span class="string">&#x27;&lt;div class=&quot;card-widget baiyi-right-widget&quot; id=&quot;card-qq&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;div id=&quot;flip-wrapper&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div id=&quot;flip-content&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;face&quot; style=&quot;background:url(/img/sucai/qq1.png) center center/100% no-repeat&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;back face&quot; style=&quot;background:url(/img/sucai/qq2.png) center center/100% no-repeat&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>图片资源自己替换，素材包放这里了：</p>
<table style="background-color: #333; border-collapse: collapse; width: 100%;">
    <tr>
      <td style="padding: 0; width: 50%;">
        <img src="/img/sucai/wx1.png" style="display: block; width: 100%; height: auto; border: none;">
      </td>
      <td style="padding: 0; width: 50%;">
        <img src="/img/sucai/wx2.png" style="display: block; width: 100%; height: auto; border: none;">
      </td>
    </tr>
  </table>

<h2 id="二-引入样式文件"><a href="#二-引入样式文件" class="headerlink" title="二.引入样式文件"></a>二.引入样式文件</h2><p>在你的自定义样式文件里边直接<strong>插入</strong>以下CSS代码</p>
<figure class="highlight css"><figcaption><span>自定义样式文件</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 侧边栏新增vx卡片 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span><span class="selector-id">#card-wechat</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#57bd6a</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-content</span>: center;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">110px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* qq卡片 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span><span class="selector-id">#card-qq</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#425aef</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-content</span>: center;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">110px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span><span class="selector-id">#card-qq</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#121121</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* qq卡片结束 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span><span class="selector-id">#card-wechat</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#121121</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#flip-wrapper</span> &#123;</span><br><span class="line">  -webkit-<span class="attribute">perspective</span>: <span class="number">1000</span>;</span><br><span class="line">  <span class="attribute">perspective</span>: <span class="number">1000</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#flip-wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">235px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">110px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#flip-content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  -webkit-<span class="attribute">transform-style</span>: preserve-<span class="number">3</span>d;</span><br><span class="line">  <span class="attribute">transform-style</span>: preserve-<span class="number">3</span>d;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="built_in">cubic-bezier</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1.29</span>) .<span class="number">3s</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-id">#flip-wrapper</span> <span class="selector-id">#flip-content</span> <span class="selector-class">.face</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  -webkit-<span class="attribute">backface-visibility</span>: hidden;</span><br><span class="line">  <span class="attribute">backface-visibility</span>: hidden;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-id">#flip-wrapper</span> <span class="selector-id">#flip-content</span> <span class="selector-class">.back</span><span class="selector-class">.face</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>);</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#flip-wrapper</span><span class="selector-pseudo">:hover</span> <span class="selector-id">#flip-content</span> &#123;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>自己不会<strong>插入</strong>自定义样式文件看这篇：</p>
<div class="tab-item-content active" id="link-3">
    <a class="tag-link" href="https://baiyi.ink/posts/5b9a.html" target="_blank">
        <div class="tag-link-tips">
            引用文章链接
        </div>
        <div class="tag-link-bottom">
            <div class="tag-link-left">
                <i class="solitude fas fa-link"></i>
            </div>
            <div class="tag-link-right">
                <div class="tag-link-title">
                    白衣博客
                </div>
                <div class="tag-link-sitename">
                    solitude主题文章顶部添加波浪效果
                </div>
            </div>
            <i class="solitude fas fa-chevron-right"></i>
        </div>
    </a>
</div>

<h2 id="三-修改主题的-config-yml"><a href="#三-修改主题的-config-yml" class="headerlink" title="三.修改主题的_config.yml"></a>三.修改主题的_config.yml</h2><p><code>cardqq,cardwechat</code>多个用<strong>逗号分割</strong>，如果只展示一个，就写<code>Sticky: &quot;cardqq,allInfo&quot;</code></p>
<figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># Aside</span></span><br><span class="line"><span class="comment"># 侧边栏</span></span><br><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="comment"># Values: about (info card), newestPost (latest article), allInfo (website information), newest_comment (latest comment)</span></span><br><span class="line">  <span class="comment"># 值: about(信息卡), newestPost(最新文章), allInfo(网站信息), newest_comment(最新评论)</span></span><br><span class="line">  <span class="comment"># Sticky: Fixed position / noSticky: Not fixed position</span></span><br><span class="line">  <span class="comment"># Sticky: 固定位置 / noSticky: 不固定位置</span></span><br><span class="line">  <span class="attr">home:</span> <span class="comment"># on the homepage</span></span><br><span class="line">    <span class="attr">Sticky:</span> <span class="string">&quot;cardqq,cardwechat,allInfo&quot;</span>  <span class="comment">#allInfo是自带的，直接在他前边添加即可</span></span><br><span class="line">    <span class="attr">noSticky:</span> <span class="string">&quot;about&quot;</span></span><br><span class="line">  <span class="attr">post:</span> <span class="comment"># on the article page</span></span><br><span class="line">    <span class="attr">noSticky:</span> <span class="string">&quot;about&quot;</span></span><br><span class="line">    <span class="attr">Sticky:</span> <span class="string">&quot;newestPost&quot;</span></span><br><span class="line">  <span class="attr">page:</span> <span class="comment"># on the page</span></span><br><span class="line">    <span class="attr">noSticky:</span> <span class="string">&quot;about&quot;</span></span><br><span class="line">    <span class="attr">Sticky:</span> <span class="string">&quot;newestPost,allInfo&quot;</span></span><br><span class="line">  <span class="comment"># 菜单栏位置(0: 左 1: 右)</span></span><br><span class="line">  <span class="attr">position:</span> <span class="number">1</span> <span class="comment"># Sidebar positioning(0: left 1: right)</span></span><br></pre></td></tr></table></figure>

<h2 id="五-附带相关说明"><a href="#五-附带相关说明" class="headerlink" title="五.附带相关说明"></a>五.附带相关说明</h2><figure class="highlight yaml"><figcaption><span>aside.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span>  <span class="comment"># 侧边栏的唯一名称标识，用于在系统中对该侧边栏进行区分和管理，通常在程序逻辑中会根据此名称来定位和操作特定的侧边栏，比如在配置文件中多个侧边栏并存时，通过名称来识别。</span></span><br><span class="line">  <span class="attr">title:</span> <span class="comment"># 侧边栏显示的标题文字，会展示在页面上，用于向用户表明该侧边栏的主要内容或功能主题，例如“热门文章”“分类目录”等。</span></span><br><span class="line">  <span class="attr">class:</span> <span class="comment"># 用于指定侧边栏的 CSS 类名，可以通过这个类名在 CSS 样式表中为该侧边栏设置特定的样式，如背景颜色、字体样式、边距等，实现个性化的外观显示。</span></span><br><span class="line">  <span class="attr">id:</span>    <span class="comment"># 侧边栏的唯一标识符，类似于 HTML 中的元素 ID，在 JavaScript 等脚本中可以通过这个 ID 来获取侧边栏元素并进行操作，比如添加事件监听器、动态修改内容等。</span></span><br><span class="line">  <span class="attr">icon:</span>  <span class="comment"># 侧边栏的图标，可以是图标字体（如 Font Awesome 中的图标）的名称、图标图片的路径等，用于直观地展示侧边栏的功能或内容类型，增加视觉上的辨识度。</span></span><br><span class="line">  <span class="attr">content_class:</span> <span class="comment"># 侧边栏内部内容区域的 CSS 类名，与侧边栏整体的类名不同，它主要针对侧边栏内的具体内容部分设置样式，比如内容的排版、列表样式等。</span></span><br><span class="line">  <span class="attr">content_id:</span>  <span class="comment"># 侧边栏内部内容区域的唯一标识符，方便在脚本中定位和操作侧边栏内的具体内容部分，例如对内容进行更新、隐藏等操作。</span></span><br><span class="line">  <span class="attr">content_css:</span>  <span class="comment"># 用于直接设置侧边栏内容区域的内联 CSS 样式，当需要对侧边栏内容部分进行一些临时的、特定的样式调整，且不想在外部 CSS 样式表中添加规则时，可以使用这个字段来快速设置样式。</span></span><br><span class="line">  <span class="attr">content_html:</span>  <span class="comment"># 侧边栏的具体内容部分的 HTML 代码，可以在这里直接编写 HTML 结构来定义侧边栏展示的具体内容，如列表、链接、图片等。</span></span><br></pre></td></tr></table></figure>
<h2 id="六-那年今日（附带转载）"><a href="#六-那年今日（附带转载）" class="headerlink" title="六.那年今日（附带转载）"></a>六.那年今日（附带转载）</h2><div class="tab-item-content active" id="fold-3">
     <details>
        <summary>那年今日实例转自solitude文档</summary>
        <p>

<figure class="highlight yaml"><figcaption><span>aside.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">history</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">那年今日</span> </span><br><span class="line">  <span class="attr">class:</span> <span class="string">card-history</span></span><br><span class="line">  <span class="attr">id:</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-clock</span></span><br><span class="line">  <span class="attr">content_class:</span></span><br><span class="line">  <span class="attr">content_id:</span> <span class="string">history-baidu</span></span><br><span class="line">  <span class="attr">content_css:</span> <span class="string">&#x27;height:80px;overflow:hidden&#x27;</span></span><br><span class="line">  <span class="attr">content_html:</span> <span class="string">&#x27;&lt;div class=&quot;history_swiper-container&quot; id=&quot;history-container&quot; style=&quot;width: 100%;height: 100%;margin-top: 6px&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div id=&quot;history_container_wrapper&quot; class=&quot;swiper-wrapper&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><figcaption><span>/source/js/custom.js</span></figcaption><table><tr><td class="code"><pre><span class="line"> <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">cardHistory</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">const</span> historyContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;history-container&#x27;</span>);</span><br><span class="line">     <span class="keyword">if</span> (!historyContainer) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetchHistoryData</span>();</span><br><span class="line">     <span class="keyword">const</span> html = data.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> <span class="string">`</span></span><br><span class="line"><span class="string">         &lt;div class=&quot;swiper-slide history_slide&quot;&gt;</span></span><br><span class="line"><span class="string">             &lt;span class=&quot;history_slide_time&quot;&gt;A.D.<span class="subst">$&#123;item.year&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">             &lt;span class=&quot;history_slide_link&quot;&gt;<span class="subst">$&#123;item.title&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">         &lt;/div&gt;</span></span><br><span class="line"><span class="string">     `</span>).<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">const</span> swiperContainer = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.history_swiper-container&#x27;</span>);</span><br><span class="line">     <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;history_container_wrapper&#x27;</span>).<span class="property">innerHTML</span> = html;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">const</span> swiperHistory = <span class="keyword">new</span> <span class="title class_">Swiper</span>(swiperContainer, &#123;</span><br><span class="line">         <span class="attr">loop</span>: <span class="literal">true</span>,</span><br><span class="line">         <span class="attr">direction</span>: <span class="string">&#x27;vertical&#x27;</span>,</span><br><span class="line">         <span class="attr">autoplay</span>: &#123;<span class="attr">disableOnInteraction</span>: <span class="literal">true</span>, <span class="attr">delay</span>: <span class="number">5000</span>&#125;,</span><br><span class="line">         <span class="attr">mousewheel</span>: <span class="literal">false</span>,</span><br><span class="line">     &#125;);</span><br><span class="line"></span><br><span class="line">     historyContainer.<span class="property">onmouseenter</span> = <span class="function">() =&gt;</span> swiperHistory.<span class="property">autoplay</span>.<span class="title function_">stop</span>();</span><br><span class="line">     historyContainer.<span class="property">onmouseleave</span> = <span class="function">() =&gt;</span> swiperHistory.<span class="property">autoplay</span>.<span class="title function_">start</span>();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="title function_">cardHistory</span>();</span><br><span class="line"> <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pjax:complete&#x27;</span>, cardHistory);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchHistoryData</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">const</span> myDate = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">     <span class="keyword">const</span> month = <span class="string">`<span class="subst">$&#123;myDate.getMonth() + <span class="number">1</span>&#125;</span>`</span>.<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">     <span class="keyword">const</span> day = <span class="string">`<span class="subst">$&#123;myDate.getDate()&#125;</span>`</span>.<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">     <span class="keyword">const</span> formattedDate = <span class="string">`<span class="subst">$&#123;month&#125;</span><span class="subst">$&#123;day&#125;</span>`</span>;</span><br><span class="line">     <span class="keyword">const</span> historyDataUrl = <span class="string">`https://api.76.al/api/history/query?key=你的key`</span>; <span class="comment">//请到:https://api.76.al申请</span></span><br><span class="line"></span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(historyDataUrl);</span><br><span class="line">         <span class="keyword">const</span> result = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line">         <span class="keyword">if</span> (result.<span class="property">code</span> === <span class="number">200</span>) &#123;</span><br><span class="line">             <span class="keyword">const</span> data = result.<span class="property">data</span>;</span><br><span class="line">             <span class="keyword">const</span> formattedData = <span class="title class_">Object</span>.<span class="title function_">entries</span>(data).<span class="title function_">map</span>(<span class="function">(<span class="params">[year, event]</span>) =&gt;</span> (&#123;</span><br><span class="line">                 <span class="attr">year</span>: year.<span class="title function_">replace</span>(<span class="regexp">/年$/</span>, <span class="string">&#x27;&#x27;</span>),</span><br><span class="line">                 <span class="attr">title</span>: event</span><br><span class="line">             &#125;));</span><br><span class="line">             <span class="keyword">return</span> formattedData;</span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">             <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error fetching history data:&#x27;</span>, result.<span class="property">msg</span>);</span><br><span class="line">             <span class="keyword">return</span> [];</span><br><span class="line">         &#125;</span><br><span class="line">     &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Fetch error:&#x27;</span>, error);</span><br><span class="line">         <span class="keyword">return</span> [];</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="title function_">cardHistory</span>()</span><br><span class="line"> <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pjax:complete&#x27;</span>, cardHistory);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">extends:</span></span><br><span class="line">  <span class="comment"># Insert in head</span></span><br><span class="line">  <span class="comment"># 插入到 head</span></span><br><span class="line">  <span class="attr">body:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/custom.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight diff"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="code"><pre><span class="line">aside:</span><br><span class="line">  home: # on the homepage</span><br><span class="line">    noSticky: &quot;about,newest_comment&quot;</span><br><span class="line"><span class="addition">+   Sticky: &quot;history&quot;</span></span><br><span class="line">  post: # on the article page</span><br><span class="line">    noSticky: &quot;about&quot;</span><br><span class="line">    Sticky: &quot;newestPost&quot;</span><br><span class="line">  page: # on the page</span><br><span class="line">    noSticky: &quot;about&quot;</span><br><span class="line">    Sticky: &quot;newestPost,allInfo&quot;</span><br></pre></td></tr></table></figure>
</p>
    </details>
</div>

<p>仅适用于同款系列主题，类似或其他主题请自行尝试适配</p>
]]></content>
      <categories>
        <category>主题美化</category>
      </categories>
      <tags>
        <tag>CSS</tag>
        <tag>主题美化</tag>
        <tag>solitude</tag>
      </tags>
  </entry>
  <entry>
    <title>从挖坑到填坑：Typecho主题非插件置顶功能的进阶之路</title>
    <url>/posts/c6881235.html</url>
    <content><![CDATA[<h2 id="一-初步尝试"><a href="#一-初步尝试" class="headerlink" title="一.初步尝试"></a>一.初步尝试</h2><p>在 index.php 的<code>$this-&gt;title();</code> 前面加上<code>$this-&gt;sticky();</code>，如下：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;h2 <span class="class"><span class="keyword">class</span>=&quot;<span class="title">title</span>&quot;&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">permalink</span>() ?&gt;&quot;&gt;&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">sticky</span>(); $<span class="title">this</span>-&gt;<span class="title">title</span>() ?&gt;&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="class">//其实就是下面这行</span></span><br><span class="line"><span class="class">&lt;?<span class="title">php</span> $<span class="title">this</span>-&gt;<span class="title">sticky</span>(); $<span class="title">this</span>-&gt;<span class="title">title</span>() ?&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后下面代码放在主题的文章列表输出的<strong>index.php</strong>中：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** 文章置顶 */</span></span><br><span class="line"><span class="variable">$sticky</span> = <span class="string">&#x27;1&#x27;</span>; <span class="comment">//置顶的文章id，多个用|隔开</span></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$sticky</span>)&#123;</span><br><span class="line">    <span class="variable">$sticky_cids</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;|&#x27;</span>,<span class="variable">$sticky</span>); <span class="comment">//分割文本</span></span><br><span class="line">    <span class="variable">$sticky_html</span> = <span class="string">&quot;&lt;span style=&#x27;color:red&#x27;&gt;[置顶] &lt;/span&gt;&quot;</span>; <span class="comment">//置顶标题的 html</span></span><br><span class="line">    <span class="variable">$db</span> = <span class="title class_">Typecho_Db</span>::<span class="title function_ invoke__">get</span>();</span><br><span class="line">    <span class="variable">$pageSize</span> = <span class="variable language_">$this</span>-&gt;options-&gt;pageSize;</span><br><span class="line">    <span class="variable">$select1</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">select</span>()-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;type = ?&#x27;</span>, <span class="string">&#x27;post&#x27;</span>);</span><br><span class="line">    <span class="variable">$select2</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">select</span>()-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;type = ? &amp;&amp; status = ? &amp;&amp; created &lt; ?&#x27;</span>, <span class="string">&#x27;post&#x27;</span>,<span class="string">&#x27;publish&#x27;</span>,<span class="title function_ invoke__">time</span>());</span><br><span class="line">    <span class="comment">//清空原有文章的列队</span></span><br><span class="line">    <span class="variable language_">$this</span>-&gt;row = [];</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;stack = [];</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;length = <span class="number">0</span>;</span><br><span class="line">    <span class="variable">$order</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">foreach</span>(<span class="variable">$sticky_cids</span> <span class="keyword">as</span> <span class="variable">$i</span> =&gt; <span class="variable">$cid</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$i</span> == <span class="number">0</span>) <span class="variable">$select1</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;cid = ?&#x27;</span>, <span class="variable">$cid</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="variable">$select1</span>-&gt;<span class="title function_ invoke__">orWhere</span>(<span class="string">&#x27;cid = ?&#x27;</span>, <span class="variable">$cid</span>);</span><br><span class="line">        <span class="variable">$order</span> .= <span class="string">&quot; when <span class="subst">$cid</span> then <span class="subst">$i</span>&quot;</span>;</span><br><span class="line">        <span class="variable">$select2</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;table.contents.cid != ?&#x27;</span>, <span class="variable">$cid</span>); <span class="comment">//避免重复</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$order</span>) <span class="variable">$select1</span>-&gt;<span class="title function_ invoke__">order</span>(<span class="literal">null</span>,<span class="string">&quot;(case cid<span class="subst">$order</span> end)&quot;</span>); <span class="comment">//置顶文章的顺序 按 $sticky 中 文章ID顺序</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;_currentPage == <span class="number">1</span>) <span class="keyword">foreach</span>(<span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchAll</span>(<span class="variable">$select1</span>) <span class="keyword">as</span> <span class="variable">$sticky_post</span>)&#123; <span class="comment">//首页第一页才显示</span></span><br><span class="line">        <span class="variable">$sticky_post</span>[<span class="string">&#x27;sticky&#x27;</span>] = <span class="variable">$sticky_html</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">push</span>(<span class="variable">$sticky_post</span>); <span class="comment">//压入列队</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$uid</span> = <span class="variable language_">$this</span>-&gt;user-&gt;uid; <span class="comment">//登录时，显示用户各自的私密文章</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$uid</span>) <span class="variable">$select2</span>-&gt;<span class="title function_ invoke__">orWhere</span>(<span class="string">&#x27;authorId = ? &amp;&amp; status = ?&#x27;</span>,<span class="variable">$uid</span>,<span class="string">&#x27;private&#x27;</span>);</span><br><span class="line">    <span class="variable">$sticky_posts</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchAll</span>(<span class="variable">$select2</span>-&gt;<span class="title function_ invoke__">order</span>(<span class="string">&#x27;table.contents.created&#x27;</span>, <span class="title class_">Typecho_Db</span>::<span class="variable constant_">SORT_DESC</span>)-&gt;<span class="title function_ invoke__">page</span>(<span class="variable">$this</span>-&gt;_currentPage, <span class="variable">$this</span>-&gt;parameter-&gt;pageSize));</span><br><span class="line">    <span class="keyword">foreach</span>(<span class="variable">$sticky_posts</span> <span class="keyword">as</span> <span class="variable">$sticky_post</span>) <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">push</span>(<span class="variable">$sticky_post</span>); <span class="comment">//压入列队</span></span><br><span class="line">    <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">setTotal</span>(<span class="variable">$this</span>-&gt;<span class="title function_ invoke__">getTotal</span>()-<span class="title function_ invoke__">count</span>(<span class="variable">$sticky_cids</span>)); <span class="comment">//置顶文章不计算在所有文章内</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="二-进阶集成"><a href="#二-进阶集成" class="headerlink" title="二.进阶集成"></a>二.进阶集成</h2><p>上面那种方式，每次需要配置的时候还需要手动去更改index.php文件，有点麻烦。正好之前自己也在写Typecho的主题，就想着把这个文章置顶<strong>集成到主题里</strong>，通过主题后台直接设置。话不多说，直接开搞，我们先来实现<strong>后台填写置顶cid</strong></p>
<h4 id="1-创建后台设置"><a href="#1-创建后台设置" class="headerlink" title="1.创建后台设置"></a>1.创建后台设置</h4><p>在主题的<strong>functions.php</strong>文件中添加以下代码，创建一个新的后台设置选项来存储置顶文章的<strong>cid</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在主题的 functions.php 文件中</span></span><br><span class="line"><span class="variable">$stickyCids</span> = <span class="keyword">new</span> <span class="title class_">Typecho_Widget_Helper_Form_Element_Text</span>(<span class="string">&#x27;stickyCids&#x27;</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="title function_ invoke__">_t</span>(<span class="string">&#x27;置顶文章CID&#x27;</span>), <span class="title function_ invoke__">_t</span>(<span class="string">&#x27;在这里填入置顶文章CID,支持多填，用英文逗号隔开&#x27;</span>));</span><br><span class="line"><span class="variable">$form</span>-&gt;<span class="title function_ invoke__">addInput</span>(<span class="variable">$stickyCids</span>);</span><br><span class="line"><span class="variable">$stickyCids</span>-&gt;<span class="title function_ invoke__">setAttribute</span>(<span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;j-setting-content j-setting-global&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-首页index-php"><a href="#2-首页index-php" class="headerlink" title="2.首页index.php"></a>2.首页index.php</h4><p>就当我以为一切顺利的时候，发现了个bug：置顶一直显示少一个，按理说最后一个数字后边是不需要加逗号的（比如<strong>69,63,59</strong>）但是这样就只会显示69和63两个。经过多次折腾分析，发现就是逗号出了问题，那我们需要确保<strong>无论末尾有无逗号，都能正确获取所有的cid</strong>。</p>
<p>下面是我修改完善后的代码，放进index.php即可，配合上边后台设置的语句</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$stickyCids</span> = <span class="variable language_">$this</span>-&gt;options-&gt;stickyCids;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$stickyCids</span>) &#123;</span><br><span class="line">    <span class="comment">// 用英文逗号分割</span></span><br><span class="line">    <span class="variable">$sticky_cids</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$stickyCids</span>);</span><br><span class="line">    <span class="comment">// 去除每个元素的空格并过滤掉空元素</span></span><br><span class="line">    <span class="variable">$sticky_cids</span> = <span class="title function_ invoke__">array_filter</span>(<span class="title function_ invoke__">array_map</span>(<span class="string">&#x27;trim&#x27;</span>, <span class="variable">$sticky_cids</span>), <span class="string">&#x27;trim&#x27;</span>);</span><br><span class="line">    <span class="variable">$sticky_html</span> = <span class="string">&quot;&lt;span style=&#x27;color:red&#x27;&gt;[置顶] &lt;/span&gt;&quot;</span>;</span><br><span class="line">    <span class="variable">$db</span> = <span class="title class_">Typecho_Db</span>::<span class="title function_ invoke__">get</span>();</span><br><span class="line">    <span class="variable">$pageSize</span> = <span class="variable language_">$this</span>-&gt;options-&gt;pageSize;</span><br><span class="line">    <span class="variable">$select1</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">select</span>()-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;type =?&#x27;</span>, <span class="string">&#x27;post&#x27;</span>);</span><br><span class="line">    <span class="variable">$select2</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">select</span>()-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;type =? &amp;&amp; status =? &amp;&amp; created &lt;?&#x27;</span>, <span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;publish&#x27;</span>, <span class="title function_ invoke__">time</span>());</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;row = [];</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;stack = [];</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;length = <span class="number">0</span>;</span><br><span class="line">    <span class="variable">$order</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="variable">$stickyCidMap</span> = [];</span><br><span class="line">    <span class="variable">$whereClauses</span> = [];</span><br><span class="line">    <span class="variable">$whereParams</span> = [];</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$sticky_cids</span> <span class="keyword">as</span> <span class="variable">$i</span> =&gt; <span class="variable">$cid</span>) &#123;</span><br><span class="line">        <span class="variable">$whereClauses</span>[] = <span class="string">&#x27;cid =?&#x27;</span>;</span><br><span class="line">        <span class="variable">$whereParams</span>[] = <span class="variable">$cid</span>;</span><br><span class="line">        <span class="variable">$order</span>.= <span class="string">&quot; when &quot;</span>. <span class="variable">$cid</span>. <span class="string">&quot; then &quot;</span>. <span class="variable">$i</span>;</span><br><span class="line">        <span class="variable">$select2</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;table.contents.cid!=?&#x27;</span>, <span class="variable">$cid</span>);</span><br><span class="line">        <span class="variable">$stickyCidMap</span>[<span class="variable">$cid</span>] = <span class="variable">$i</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$whereClauses</span>)) &#123;</span><br><span class="line">        <span class="variable">$select1</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="title function_ invoke__">implode</span>(<span class="string">&#x27; OR &#x27;</span>, <span class="variable">$whereClauses</span>),...<span class="variable">$whereParams</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="title function_ invoke__">trim</span>(<span class="variable">$order</span>))) &#123;</span><br><span class="line">        <span class="variable">$orderBy</span> = <span class="string">&#x27;table.contents.created&#x27;</span>;</span><br><span class="line">        <span class="variable">$sort</span> = <span class="title class_">Typecho_Db</span>::<span class="variable constant_">SORT_DESC</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$orderBy</span> = <span class="literal">null</span>;</span><br><span class="line">        <span class="variable">$sort</span> = <span class="string">&quot;(case cid<span class="subst">$order</span> end)&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$orderBy</span>!== <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="variable">$select1</span>-&gt;<span class="title function_ invoke__">order</span>(<span class="variable">$orderBy</span>, <span class="variable">$sort</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;_currentPage == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="variable">$stickyPosts</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchAll</span>(<span class="variable">$select1</span>);</span><br><span class="line">        <span class="comment">// 对获取到的置顶文章按照设置的顺序排序</span></span><br><span class="line">        <span class="title function_ invoke__">usort</span>(<span class="variable">$stickyPosts</span>, function (<span class="variable">$a</span>, <span class="variable">$b</span>) <span class="keyword">use</span> ($<span class="title">stickyCidMap</span>) &#123;</span><br><span class="line">            <span class="title">return</span> $<span class="title">stickyCidMap</span>[$<span class="title">a</span>[&#x27;<span class="title">cid</span>&#x27;]] - $<span class="title">stickyCidMap</span>[$<span class="title">b</span>[&#x27;<span class="title">cid</span>&#x27;]];</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$stickyPosts</span> <span class="keyword">as</span> <span class="variable">$sticky_post</span>) &#123;</span><br><span class="line">            <span class="variable">$sticky_post</span>[<span class="string">&#x27;sticky&#x27;</span>] = <span class="variable">$sticky_html</span>;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">push</span>(<span class="variable">$sticky_post</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$uid</span> = <span class="variable language_">$this</span>-&gt;user-&gt;uid;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$uid</span>) &#123;</span><br><span class="line">        <span class="variable">$select2</span>-&gt;<span class="title function_ invoke__">orWhere</span>(<span class="string">&#x27;authorId =? &amp;&amp; status =?&#x27;</span>, <span class="variable">$uid</span>, <span class="string">&#x27;private&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$sticky_posts</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">fetchAll</span>(<span class="variable">$select2</span>-&gt;<span class="title function_ invoke__">order</span>(<span class="string">&#x27;table.contents.created&#x27;</span>, <span class="title class_">Typecho_Db</span>::<span class="variable constant_">SORT_DESC</span>)-&gt;<span class="title function_ invoke__">page</span>(<span class="variable">$this</span>-&gt;_currentPage, <span class="variable">$this</span>-&gt;parameter-&gt;pageSize));</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$sticky_posts</span> <span class="keyword">as</span> <span class="variable">$sticky_post</span>) &#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">push</span>(<span class="variable">$sticky_post</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">setTotal</span>(<span class="variable">$this</span>-&gt;<span class="title function_ invoke__">getTotal</span>() - <span class="title function_ invoke__">count</span>(<span class="variable">$sticky_cids</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>由此，不依赖插件并且植入主题设置的置顶文章功能就完美实现了。或许这就是码代码的乐趣吧，需求驱动、编写代码、发现问题，然后不断尝试去解决问题，最后守得云开见月明!</p>
]]></content>
      <categories>
        <category>技术教程</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>置顶</tag>
        <tag>Typecho</tag>
      </tags>
  </entry>
  <entry>
    <title>免费陷阱与分层透明：中国互联网产品为何总让开发者受伤？</title>
    <url>/posts/b909.html</url>
    <content><![CDATA[<h2 id="引言：当“免费”成为诱饵"><a href="#引言：当“免费”成为诱饵" class="headerlink" title="引言：当“免费”成为诱饵"></a>引言：当“免费”成为诱饵</h2><p><b>国内的产品，千万别指望永远免费。</b>这是许多包括白衣在内的许多开发者在踩坑后的血泪教训。从代码托管平台Gitee取消免费Pages托管，到腾讯云取消了免费套餐，再到UniCloud对数据库读写进行“软限流”，国内互联网产品的免费策略似乎总在重复同一个剧本，那就是<b>“免费引流-用户依赖-功能阉割-强制付费”。</b></p>
<p>反观国外产品如GitHub、MongoDB、Cloudflare，却能在免费与付费之间找到微妙平衡，开发者既能长期使用核心功能，又不会被“突然收费”打乱节奏。这种差异背后，折射出的不仅是商业模式的差异，更是企业平台对开发者生态的底层理解的鸿沟。</p>
<h2 id="一、国内外云产品服务的差异"><a href="#一、国内外云产品服务的差异" class="headerlink" title="一、国内外云产品服务的差异"></a>一、国内外云产品服务的差异</h2><h3 id="1-国内案例："><a href="#1-国内案例：" class="headerlink" title="1.国内案例："></a>1.国内案例：</h3><ul>
<li><strong>案例1：Gitee的“温水煮青蛙”</strong><br>早期以“中国版GitHub”为口号，吸引开发者迁移。待用户形成依赖后，突然停用Pages托管，这一政策调整导致大量个人开发者被迫迁移项目，甚至出现线上文档、个人博客直接瘫痪的情况。</li>
<li><strong>案例2：腾讯兔小巢的“千元门槛”</strong><br>腾讯兔小巢曾以“零成本搭建用户反馈系统”为卖点，吸引大量中小团队和个人开发者使用。作者也是在很多年前给APP接入了兔小巢，体验非常不错。然而，不久后兔小巢突然调整为全面付费模式，基础版价格上千元&#x2F;年，免费额度一个月试用期？我笑了，这不就等于没有。强制付费，个人开发者与中小型企业是不会买单的，只能被迫迁移或者另寻他法。</li>
<li><strong>案例3：unicloud的“存储断粮”</strong><br>Unicloud早期以“开发者零成本上云”为口号，承诺10G免费云存储+全免CDN流量，吸引大量个人开发者将其作为图床、静态资源托管的首选。博主也是借此搭建了图床使用，然而，2022年底unicloud突然宣布“结束公测”，原有免费存储空间强制迁移至付费商业版，且新用户不再享受任何免费额度，彻底斩断“零成本”可能。成本涨幅超500％，我目前使用的是阿里的oss，由于本科大学生每年会有300多元的代金券，购置服务器，购置oss不需要花一分钱，况且阿里oss年费套餐基础版40G存储&#x2F;年&#x2F;9元，还是很香的，只需要付流量费用，按量计费，又何必去用unicloud的云存储呢。</li>
</ul>
<p>以上列举了三个例子，这些都是作者亲身经历过的，这也是为什么作者的长期项目不再依靠某腾，而且转向Github、MongoDB，当然服务器私有部署可以解决很多问题，本人目前使用的是阿里云的服务器，后期可能会考虑搭建本地服务器。</p>
<p>看到这里相信你也有了自己的判断，也对国内的互联网平台的盈利模式有了更深刻的了解。在我看来，国内平台的初期免费服务只是“韭菜陷阱”，他们的核心逻辑是“流量变现”。免费并非真正的让利，而是快速圈地的工具。</p>
<h3 id="2-国外案例："><a href="#2-国外案例：" class="headerlink" title="2.国外案例："></a>2.国外案例：</h3><ul>
<li><p><strong>案例1：GitHub的“底线思维”</strong><br>Github免费用户可无限使用公开仓库，并且承诺永久免费提供pages托管服务，私有仓库虽有限制，但基础功能完整。付费升级（Pro账户$7&#x2F;月）解锁的是协作工具、安全扫描等进阶能力，而非剥夺基础体验。  </p>
</li>
<li><p><strong>案例2：Cloudflare的“真实可用性”</strong><br>免费CDN包含全球节点、基础DDoS防护、SSL证书，中小企业足以零成本启动。付费版针对企业级需求（如定制规则、高级缓存），用户按需选择，而非被迫买单。</p>
</li>
</ul>
<p>看到这里想必大家都懂了，<b>国内产品是将“免费”视为一次性引流成本，并非为开发者考虑的生态建设的长期投入。</b>其盈利压力迫使功能设计围绕“如何让用户不得不付费”，而非“如何让用户自愿付费”。而国外产品将免费层定位为生态入口，通过透明阶梯定价（如MongoDB Atlas的512MB免费数据库）让用户自然过渡到付费阶段，而非制造人为障碍。我特别喜欢MongoDB的Free Forever这个词，试问某些平台，你们会写永久免费这个字样吗？</p>
<h2 id="二、云产品关键在用户主权"><a href="#二、云产品关键在用户主权" class="headerlink" title="二、云产品关键在用户主权"></a>二、云产品关键在用户主权</h2><ol>
<li><strong>功能完整性：免费≠阉割</strong><br>GitHub的Actions自动化、Pages静态托管在免费层完全开放；Cloudflare的CDN不限流量。免费用户仍能构建完整项目，付费只是优化体验，而非弥补功能残缺。  </li>
<li><strong>政策稳定性：尊重用户的长期生态</strong><br>GitHub十年未对免费层核心功能动刀；Cloudflare免费版策略始终如一。开发者无需担心“政策突袭”。  </li>
<li><strong>生态增值：付费是“赋能”而非“赎身”</strong><br>MongoDB Atlas免费版可直接升级到付费集群，数据无缝迁移；GitHub Pro账户提供代码扫描、CI&#x2F;CD深度集成。付费购买的是“增强能力”，而非“解封权限”。</li>
</ol>
<h2 id="三、国内产品为何如此？"><a href="#三、国内产品为何如此？" class="headerlink" title="三、国内产品为何如此？"></a>三、国内产品为何如此？</h2><p>我总结出来了三点，这也是很多国内产品的通病，不光云服务。</p>
<ol>
<li><strong>资本压力急需盈利</strong><br>国内产品核心理念是盈利，而非专注用户，国内互联网公司普遍面临增长压力，免费产品往往被要求“快速证明商业价值”。当资本失去耐心时，通过价格的不透明，收割用户便成为最短路径。有时候我就在想：雷军什么时候搞个小米云，喊出那句：“友商是**”。</li>
<li><strong>生态闭环的缺失</strong><br>GitHub的盈利不依赖仓库收费，而是通过微软生态（Azure、Teams）实现协同；Cloudflare靠企业级安全服务盈利，而非CDN流量费。国内产品缺乏生态纵深，只能“就功能卖功能”，陷入零和博弈。</li>
<li><strong>用户话语权的弱势</strong><br>国外开源文化中，开发者是生态共建者，如GitHub的社区驱动核心就是无数个开发者。而国内产品常将开发者视为“流量工具”，而非平等伙伴。说白了就是国内平台，根本不把用户当回事，当用户需求与盈利冲突时，前者往往被牺牲。</li>
</ol>
<p>说到这，我感觉很微妙，不过咱有些话不能随便上升高度，懂得都懂。国内企业如何做咱说了不算，也管不着。重点是作为开发者的我们应该怎么办？</p>
<h2 id="四、开发者如何做？"><a href="#四、开发者如何做？" class="headerlink" title="四、开发者如何做？"></a>四、开发者如何做？</h2><p>要知道，有时候**选择大于努力。**你选择对了，你会节省很多成本，节省很多后期维护的繁琐。作为开发者，我们没有必要为国内割韭菜服务买单，最好的做法就是尽早跳坑。用户流失，才能倒逼国内云企业转型，让他们真正意识到用户长期生态以及口碑评价的重要性。<br>如果你需要长期项目，我推荐使用国际服务，或者私有化部署服务器。</p>
<ul>
<li>优先选择“核心功能免费+增值服务付费”的国外产品，如Github、Vercel、Supabase、Cloudflare、MongoDB。</li>
<li><strong>数据主权＞短期便利</strong>，这个词值得所有开发者去品味，我开发的APP中的远程控制也是依赖国外托管的，博客采用的是Github+阿里OSS+云服务器三端同步存储，建议所有依赖第三方平台的核心功能，大家都必须有“逃生方案”。</li>
<li>当国内产品出现“收割苗头”，及时迁移至国际平台。<strong>用户流失是倒逼云企业改进的唯一有效手段。</strong></li>
</ul>
<p>Coding不知道大家有没有用过。Coding Pages的“免费”本质是腾讯争夺开发者生态的短期策略，但是我们要有Gitee的前车之鉴，理性利用其红利，永远预留逃生通道。</p>
<div class="tab-item-content active" id="fold-3">
    <details>
        <summary>Coding与GitHub对比（点击展开）</summary>
        <p>
            <table>
                <thead>
                    <tr>
                        <th>维度</th>
                        <th>Coding Pages</th>
                        <th>GitHub Pages</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>存储空间</td>
                        <td>50GB/项目（远超个人需求）</td>
                        <td>无明确限制（但推荐仓库≤1GB）</td>
                    </tr>
                    <tr>
                        <td>流量限制</td>
                        <td>无硬性上限（“合理使用”原则）</td>
                        <td>无限制</td>
                    </tr>
                    <tr>
                        <td>自定义域名</td>
                        <td>支持，但需备案</td>
                        <td>支持，无需备案</td>
                    </tr>
                    <tr>
                        <td>私有仓库支持</td>
                        <td>免费版支持私有仓库+Pages托管</td>
                        <td>仅付费版（Pro $4/月）支持私有仓库Pages</td>
                    </tr>
                    <tr>
                        <td>访问速度（国内）</td>
                        <td>30 - 50ms（国内服务器）</td>
                        <td>200 - 500ms（海外服务器，可能被随机阻断）</td>
                    </tr>
                    <tr>
                        <td>生态整合</td>
                        <td>腾讯云工具链（较弱）</td>
                        <td>GitHub Actions、CI/CD、社区协作（强生态）</td>
                    </tr>
                    <tr>
                        <td>政策风险</td>
                        <td><b>存在未来收费可能（参考Gitee前例）</b></td>
                        <td>10年未调整免费政策，微软背书稳定性高</td>
                    </tr>
                </tbody>
            </table>
        </p>
    </details>
</div>


<p>感谢你看到了这里，其实免费不应是“诱饵”，而是一种“契约” ，企业与用户共赢，企业提供好的服务，不怕没人买单，怕的就是投机取巧，把用户当韭菜，那注定会失去用户的信任，导致恶性循环。</p>
<p>注：本文并非全盘否定国内产品，而是呼吁国内互联网平台采用更健康的商业模式，警醒长期项目开发者慎重选择平台。事实上，部分国内平台（如语雀、Coding）已开始借鉴分层策略，未来能否扭转口碑，仍需时间检验。</p>
<h2 id="结语："><a href="#结语：" class="headerlink" title="结语："></a>结语：</h2><p><b>商业的本质不是道德博弈，而是价值交换。</b>当国内产品将“免费”作为诱捕开发者的陷阱时，它们失去的不仅是用户信任，更是参与全球开发者生态竞争的资格。而对开发者而言，选择分层透明、尊重用户主权的平台，不仅是对自身利益的保护，更是用行动定义什么样的产品值得生存。</p>
<p>或许，只有当开发者用脚投票、当“收割”无法带来收益时，国内产品才会真正学会尊重用户。而在那一天到来之前，<b>“把鸡蛋放在GitHub的篮子里”</b>仍是更安全的选择。</p>
]]></content>
      <categories>
        <category>经验分享</category>
      </categories>
      <tags>
        <tag>经验分享</tag>
        <tag>互联网产品</tag>
        <tag>开发者生态</tag>
      </tags>
  </entry>
  <entry>
    <title>分享自己写的一个丝滑美观的网页返回顶部样式</title>
    <url>/posts/2c2a0e4a.html</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在网页开发中，一个<strong>实用且美观</strong>的返回顶部按钮能极大提升用户浏览长页面时的便捷性。白衣偶然在一个国外网站看到一个这种返回顶部按钮，于是便动手仿写了一个。接下来，我将逐步展示如何构建一个丝滑且带有进度条显示的返回顶部</p>
<table style="border-collapse: collapse; width: 100%;">
    <tr>
        <td style="padding: 0; width: 33.33%;">
            <img src="/img/peitu/返回顶部1.png" style="display: block; width: 100%; height: 100%; object-fit: cover; border: none;">
        </td>
        <td style="padding: 0; width: 33.33%;">
            <img src="/img/peitu/返回顶部2.png" style="display: block; width: 100%; height: 100%; object-fit: cover; border: none;">
        </td>
        <td style="padding: 0; width: 33.33%;">
            <img src="/img/peitu/返回顶部3.png" style="display: block; width: 100%; height: 100%; object-fit: cover; border: none;">
        </td>
    </tr>
</table>
## 一.构建按钮
首先，构建按钮的 HTML 结构，创建一个**按钮**元素，在按钮内部添加**色块填充**一个用于显示进度条，加一个返回顶部的**箭头图标**
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;topFunction()&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myBtn&quot;</span> <span class="attr">class</span>=<span class="string">&quot;baiyi_fn_totop&quot;</span> <span class="attr">title</span>=<span class="string">&quot;回顶部&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;progress_wrapper&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;progress&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 0%;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">xmlns:xlink</span>=<span class="string">&quot;http://www.w3.org/1999/xlink&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">y</span>=<span class="string">&quot;0px&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 557.97 1061&quot;</span> <span class="attr">style</span>=<span class="string">&quot;enable-background:new 0 0 557.97 1061;&quot;</span> <span class="attr">xml:space</span>=<span class="string">&quot;preserve&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">&quot;fn__svg replaced-svg&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M557.97,554.2c0,4.13,0,8.26,0,12.39c-0.37,2.83-0.75,5.66-1.11,8.49c-2.47,19.12-10.14,35.74-23.81,49.46  c-1.02,1.02-2.42,1.87-3.79,2.31c-8.96,2.89-18.12,3.28-27.38,1.91c-13.68-2.03-26.18-7.3-38.1-14.08  c-21.62-12.31-40.29-28.39-57.82-45.86c-28.44-28.34-53.31-59.63-76.03-92.68c-0.61-0.89-1.29-1.73-2.3-3.08  c-0.1,1.2-0.17,1.63-0.17,2.06c0.03,32.31-0.98,64.6-3.29,96.83c-1.56,21.73-3.32,43.46-5.57,65.13  c-2.71,26.12-6.58,52.09-11.66,77.88c-6.4,32.52-15.07,64.34-28.3,94.82c-22.74,52.42-51.12,101.67-83.67,148.55  c-17.42,25.09-35.96,49.32-57.81,70.77c-14.1,13.84-28.57,27.36-48.82,31.92c-1.97,0-3.95,0-5.92,0c-3.98-1.33-7.87-2.73-10.95-5.86  c-5.86-5.95-8.47-13.2-8.88-21.34c-0.68-13.44,2.95-26.11,7.27-38.6c7.44-21.55,17.29-42.09,27.01-62.67  c14.89-31.52,29.92-62.97,43.1-95.26c17.4-42.65,30.2-86.59,37.18-132.14c3.19-20.81,5.97-41.71,8.22-62.64  c2.09-19.52,3.54-39.12,4.7-58.73c1.05-17.73,1.42-35.5,1.92-53.26c0.95-34.02,0.14-68.02-1.36-102c-0.16-3.52-0.46-7.03-0.7-10.54  c-1.06,0.87-1.57,1.78-2.04,2.72c-18.76,36.7-39.4,72.27-63.39,105.83c-13.17,18.43-27.28,36.08-44.08,51.41  c-9.45,8.62-19.55,16.34-31.6,21.09c-7.23,2.86-14.69,4.16-22.4,2.77c-13.71-2.47-20.98-11.51-24.1-24.42  c-1.07-4.42-1.54-8.97-2.29-13.47c0-4.49,0-8.98,0-13.46c0.18-0.86,0.42-1.72,0.53-2.59c1.04-8.27,1.79-16.58,3.14-24.79  c3.57-21.68,9.15-42.91,15.05-64.05c9.97-35.71,20.36-71.3,30.05-107.09c9.64-35.6,17.21-71.58,18.86-108.63  c1.27-28.54,0.95-57.05,0.09-85.58c-0.86-28.33-2.7-56.65-1.36-85.02c0.56-11.84,1.68-23.63,4.84-35.09  C75.99,20.25,84.24,5.72,102.87,0c1.8,0,3.59,0,5.39,0c5.02,1.57,10.2,2.77,15.04,4.79c10.07,4.19,19.11,10.23,27.92,16.58  c22.42,16.14,42.81,34.66,62.61,53.83c49.96,48.37,96.11,100.26,141.08,153.24c9.64,11.35,18.66,23.27,28.83,34.13  c38.53,41.13,74.39,84.4,106,131.1c19.59,28.93,37.26,58.96,50.61,91.35c7.53,18.28,13.53,37.01,16.13,56.7  C557.02,545.87,557.47,550.04,557.97,554.2z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="二-编写CSS样式"><a href="#二-编写CSS样式" class="headerlink" title="二.编写CSS样式"></a>二.编写CSS样式</h2><p>通过<code>transform: translateY(120px)</code>让按钮初始处于隐藏状态，当添加 active 类时显示。同时，设置<strong>z-index</strong>确保箭头图标在进度色块之上。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* Author：BAIYI */</span></span><br><span class="line"> <span class="selector-class">.baiyi_fn_totop</span><span class="selector-class">.active</span> &#123;</span><br><span class="line">        -webkit-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span><br><span class="line">        -ms-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">1040px</span>) &#123;</span><br><span class="line">       <span class="selector-class">.baiyi_fn_totop</span> &#123;</span><br><span class="line">            <span class="attribute">right</span>: <span class="number">30px</span>;</span><br><span class="line">            <span class="attribute">bottom</span>: <span class="number">36px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="selector-class">.baiyi_fn_totop</span> &#123;</span><br><span class="line">        <span class="attribute">position</span>: fixed;</span><br><span class="line">        <span class="attribute">z-index</span>: <span class="number">15</span>;</span><br><span class="line">        <span class="attribute">bottom</span>: <span class="number">46px</span>;</span><br><span class="line">        <span class="attribute">right</span>: <span class="number">40px</span>;</span><br><span class="line">        <span class="attribute">text-decoration</span>: none;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">4px</span> solid <span class="number">#000</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">        <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">        <span class="attribute">display</span>: -moz-flex;</span><br><span class="line">        <span class="attribute">display</span>: -ms-flex;</span><br><span class="line">        <span class="attribute">display</span>: -o-flex;</span><br><span class="line">        <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">        <span class="attribute">display</span>: -ms-flexbox;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        -ms-<span class="attribute">align-items</span>: center;</span><br><span class="line">        -webkit-<span class="attribute">box-align</span>: center;</span><br><span class="line">        -webkit-<span class="attribute">align-items</span>: center;</span><br><span class="line">        -ms-<span class="attribute">flex</span>-align: center;</span><br><span class="line">        <span class="attribute">align-items</span>: center;</span><br><span class="line">        -webkit-<span class="attribute">box-pack</span>: center;</span><br><span class="line">        -webkit-<span class="attribute">justify-content</span>: center;</span><br><span class="line">        -ms-<span class="attribute">flex</span>-pack: center;</span><br><span class="line">        <span class="attribute">justify-content</span>: center;</span><br><span class="line">        <span class="attribute">cursor</span>: pointer;</span><br><span class="line">        -webkit-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">120px</span>);</span><br><span class="line">        -ms-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">120px</span>);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">120px</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="selector-class">.baiyi_fn_totop</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">        <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="attribute">position</span>: absolute;</span><br><span class="line">        <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">left</span>: -<span class="number">4px</span>;</span><br><span class="line">        <span class="attribute">right</span>: -<span class="number">4px</span>;</span><br><span class="line">        <span class="attribute">bottom</span>: -<span class="number">10px</span>;</span><br><span class="line">        <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">25px</span> <span class="number">25px</span>;</span><br><span class="line">        <span class="attribute">border-bottom</span>: <span class="number">10px</span> solid <span class="number">#000</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="selector-class">.baiyi_fn_totop</span> <span class="selector-tag">svg</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">        <span class="attribute">z-index</span>: <span class="number">2</span>; <span class="comment">/* 确保箭头图标的 z-index 高于进度条 */</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 进度条的样式 */</span></span><br><span class="line">   <span class="selector-class">.progress_wrapper</span> &#123;</span><br><span class="line">        <span class="attribute">position</span>: absolute;</span><br><span class="line">        <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">16px</span>;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="selector-class">.progress</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: block;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">0%</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#f9d40d</span>; </span><br><span class="line">        <span class="attribute">transition</span>: height <span class="number">0.5s</span> ease-in-out; </span><br><span class="line">        <span class="attribute">z-index</span>: <span class="number">1</span>; <span class="comment">/* 调整进度条的 z-index，使其位于箭头图标下方 */</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="三-JS平滑与进度监听"><a href="#三-JS平滑与进度监听" class="headerlink" title="三.JS平滑与进度监听"></a>三.JS平滑与进度监听</h2><p>通过JavaScript进行<strong>节流、滚动监听、进度更新</strong>以及缓动动画</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1.节流函数-BAIYI</span></span><br><span class="line"><span class="keyword">let</span> rafId;</span><br><span class="line">    <span class="keyword">let</span> lastCall = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">func, limit</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>();</span><br><span class="line">            <span class="keyword">if</span> (now - lastCall &lt; limit) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            lastCall = now;</span><br><span class="line">            <span class="keyword">return</span> func.<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.更新进度条与按钮显示状态-BAIYI</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">updateProgress</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 计算进度条高度</span></span><br><span class="line">        <span class="keyword">const</span> scrollTop = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span>;</span><br><span class="line">        <span class="keyword">const</span> scrollHeight = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollHeight</span> - <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>;</span><br><span class="line">        <span class="keyword">const</span> progress = <span class="title class_">Math</span>.<span class="title function_">floor</span>((scrollTop / scrollHeight) * <span class="number">100</span>); <span class="comment">// 使用 Math.floor 取整</span></span><br><span class="line">        <span class="keyword">const</span> progressBar = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.progress&#x27;</span>);</span><br><span class="line">        progressBar.<span class="property">style</span>.<span class="property">height</span> = <span class="string">`<span class="subst">$&#123;progress&#125;</span>%`</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 当网页向下滑动 20px 出现&quot;返回顶部&quot; 按钮</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> &gt; <span class="number">20</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> &gt; <span class="number">20</span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myBtn&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myBtn&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        rafId = <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(updateProgress);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//3.滚动监听控制-BAIYI</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">startScrollListener</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">updateProgress</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">stopScrollListener</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">cancelAnimationFrame</span>(rafId);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//4.平滑滚动到顶部-BAIYI</span></span><br><span class="line">    <span class="comment">// 点击按钮，返回顶部</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">topFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> startY = <span class="variable language_">window</span>.<span class="property">scrollY</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span>;</span><br><span class="line">        <span class="keyword">const</span> startTime = performance.<span class="title function_">now</span>();</span><br><span class="line">        <span class="keyword">const</span> duration = <span class="number">500</span>; <span class="comment">// 滚动持续时间，单位为毫秒，可根据需要调整</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">scrollToTop</span>(<span class="params">currentTime</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> elapsed = currentTime - startTime;</span><br><span class="line">            <span class="keyword">const</span> progress = <span class="title class_">Math</span>.<span class="title function_">min</span>(elapsed / duration, <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">const</span> ease = <span class="title function_">easeInOutCubic</span>(progress); <span class="comment">// 使用缓动函数</span></span><br><span class="line">            <span class="keyword">const</span> newY = startY * (<span class="number">1</span> - ease);</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> = newY;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> = newY;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (progress &lt; <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(scrollToTop);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">stopScrollListener</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(scrollToTop);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 缓动函数，这里我使用的是 easeInOutCubic 函数，可以根据需要替换为其他缓动函数</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">easeInOutCubic</span>(<span class="params">t</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> t &lt; <span class="number">0.5</span>? <span class="number">4</span> * t * t * t : (t - <span class="number">1</span>) * (<span class="number">2</span> * t - <span class="number">2</span>) * (<span class="number">2</span> * t - <span class="number">2</span>) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//5.事件绑定-BAIYI</span></span><br><span class="line">    <span class="comment">// 使用 throttle 函数对 updateProgress 进行节流</span></span><br><span class="line">    <span class="keyword">const</span> throttledUpdateProgress = <span class="title function_">throttle</span>(updateProgress, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开始监听滚动事件</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, throttledUpdateProgress);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 监听触摸事件，使在触摸设备上也能正常工作</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchstart&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="title function_">startScrollListener</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchmove&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="title function_">throttledUpdateProgress</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchend&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="title function_">stopScrollListener</span>();</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>功能模块</th>
<th>实现方式</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>节流控制</td>
<td>定义<code>throttle</code>函数，依上次调用时间与间隔控制频率</td>
<td>防<code>updateProgress</code>频繁触发，优化性能</td>
</tr>
<tr>
<td>进度条更新与按钮显示</td>
<td><code>updateProgress</code>依滚动距离、总高度算进度更新进度条，依滚动距离控按钮显隐</td>
<td>实时展示进度，依滚动位置控按钮</td>
</tr>
<tr>
<td>滚动监听管理</td>
<td><code>startScrollListener</code>调<code>updateProgress</code>开启监听，<code>stopScrollListener</code>用<code>cancelAnimationFrame</code>停止</td>
<td>控滚动监听开关，合理用资源</td>
</tr>
<tr>
<td>平滑滚动到顶部</td>
<td><code>topFunction</code>结合<code>easeInOutCubic</code>缓动函数与<code>requestAnimationFrame</code>算滚动位置更新</td>
<td>点击按钮时页面平滑滚至顶部，提用户体验</td>
</tr>
<tr>
<td>触摸事件支持</td>
<td>为文档添<code>touchstart</code>、<code>touchmove</code>、<code>touchend</code>事件监听器，分别调用对应函数</td>
<td>确保触摸设备正常实现滚动监听与进度更新等交互</td>
</tr>
</tbody></table>
<h2 id="四-完整代码"><a href="#四-完整代码" class="headerlink" title="四.完整代码"></a>四.完整代码</h2><p>下面给出所有融合在一起的代码，<strong>复制即可使用</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">   <span class="selector-class">.baiyi_fn_totop</span><span class="selector-class">.active</span> &#123;</span></span><br><span class="line"><span class="language-css">        -webkit-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-css">        -ms-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-css">        <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">1040px</span>) &#123;</span></span><br><span class="line"><span class="language-css">       <span class="selector-class">.baiyi_fn_totop</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">36px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">   <span class="selector-class">.baiyi_fn_totop</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">z-index</span>: <span class="number">15</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">bottom</span>: <span class="number">46px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">right</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">4px</span> solid <span class="number">#000</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: -webkit-flex;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: -moz-flex;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: -ms-flex;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: -o-flex;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: -webkit-box;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: -ms-flexbox;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">        -ms-<span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">        -webkit-<span class="attribute">box-align</span>: center;</span></span><br><span class="line"><span class="language-css">        -webkit-<span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">        -ms-<span class="attribute">flex</span>-align: center;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">        -webkit-<span class="attribute">box-pack</span>: center;</span></span><br><span class="line"><span class="language-css">        -webkit-<span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">        -ms-<span class="attribute">flex</span>-pack: center;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">        -webkit-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">120px</span>);</span></span><br><span class="line"><span class="language-css">        -ms-<span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">120px</span>);</span></span><br><span class="line"><span class="language-css">        <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">120px</span>);</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">   <span class="selector-class">.baiyi_fn_totop</span><span class="selector-pseudo">:after</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">left</span>: -<span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">right</span>: -<span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">bottom</span>: -<span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">z-index</span>: -<span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">25px</span> <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-bottom</span>: <span class="number">10px</span> solid <span class="number">#000</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">   <span class="selector-class">.baiyi_fn_totop</span> <span class="selector-tag">svg</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">z-index</span>: <span class="number">2</span>; <span class="comment">/* 确保箭头图标的 z-index 高于进度条 */</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 进度条的样式 */</span></span></span><br><span class="line"><span class="language-css">   <span class="selector-class">.progress_wrapper</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">   <span class="selector-class">.progress</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">0%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#f9d40d</span>; </span></span><br><span class="line"><span class="language-css">        <span class="attribute">transition</span>: height <span class="number">0.5s</span> ease-in-out; </span></span><br><span class="line"><span class="language-css">        <span class="attribute">z-index</span>: <span class="number">1</span>; <span class="comment">/* 调整进度条的 z-index，使其位于箭头图标下方 */</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;topFunction()&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myBtn&quot;</span> <span class="attr">class</span>=<span class="string">&quot;baiyi_fn_totop&quot;</span> <span class="attr">title</span>=<span class="string">&quot;回顶部&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;progress_wrapper&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;progress&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 0%;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">xmlns:xlink</span>=<span class="string">&quot;http://www.w3.org/1999/xlink&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0px&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">y</span>=<span class="string">&quot;0px&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 557.97 1061&quot;</span> <span class="attr">style</span>=<span class="string">&quot;enable-background:new 0 0 557.97 1061;&quot;</span> <span class="attr">xml:space</span>=<span class="string">&quot;preserve&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">&quot;fn__svg replaced-svg&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M557.97,554.2c0,4.13,0,8.26,0,12.39c-0.37,2.83-0.75,5.66-1.11,8.49c-2.47,19.12-10.14,35.74-23.81,49.46  c-1.02,1.02-2.42,1.87-3.79,2.31c-8.96,2.89-18.12,3.28-27.38,1.91c-13.68-2.03-26.18-7.3-38.1-14.08  c-21.62-12.31-40.29-28.39-57.82-45.86c-28.44-28.34-53.31-59.63-76.03-92.68c-0.61-0.89-1.29-1.73-2.3-3.08  c-0.1,1.2-0.17,1.63-0.17,2.06c0.03,32.31-0.98,64.6-3.29,96.83c-1.56,21.73-3.32,43.46-5.57,65.13  c-2.71,26.12-6.58,52.09-11.66,77.88c-6.4,32.52-15.07,64.34-28.3,94.82c-22.74,52.42-51.12,101.67-83.67,148.55  c-17.42,25.09-35.96,49.32-57.81,70.77c-14.1,13.84-28.57,27.36-48.82,31.92c-1.97,0-3.95,0-5.92,0c-3.98-1.33-7.87-2.73-10.95-5.86  c-5.86-5.95-8.47-13.2-8.88-21.34c-0.68-13.44,2.95-26.11,7.27-38.6c7.44-21.55,17.29-42.09,27.01-62.67  c14.89-31.52,29.92-62.97,43.1-95.26c17.4-42.65,30.2-86.59,37.18-132.14c3.19-20.81,5.97-41.71,8.22-62.64  c2.09-19.52,3.54-39.12,4.7-58.73c1.05-17.73,1.42-35.5,1.92-53.26c0.95-34.02,0.14-68.02-1.36-102c-0.16-3.52-0.46-7.03-0.7-10.54  c-1.06,0.87-1.57,1.78-2.04,2.72c-18.76,36.7-39.4,72.27-63.39,105.83c-13.17,18.43-27.28,36.08-44.08,51.41  c-9.45,8.62-19.55,16.34-31.6,21.09c-7.23,2.86-14.69,4.16-22.4,2.77c-13.71-2.47-20.98-11.51-24.1-24.42  c-1.07-4.42-1.54-8.97-2.29-13.47c0-4.49,0-8.98,0-13.46c0.18-0.86,0.42-1.72,0.53-2.59c1.04-8.27,1.79-16.58,3.14-24.79  c3.57-21.68,9.15-42.91,15.05-64.05c9.97-35.71,20.36-71.3,30.05-107.09c9.64-35.6,17.21-71.58,18.86-108.63  c1.27-28.54,0.95-57.05,0.09-85.58c-0.86-28.33-2.7-56.65-1.36-85.02c0.56-11.84,1.68-23.63,4.84-35.09  C75.99,20.25,84.24,5.72,102.87,0c1.8,0,3.59,0,5.39,0c5.02,1.57,10.2,2.77,15.04,4.79c10.07,4.19,19.11,10.23,27.92,16.58  c22.42,16.14,42.81,34.66,62.61,53.83c49.96,48.37,96.11,100.26,141.08,153.24c9.64,11.35,18.66,23.27,28.83,34.13  c38.53,41.13,74.39,84.4,106,131.1c19.59,28.93,37.26,58.96,50.61,91.35c7.53,18.28,13.53,37.01,16.13,56.7  C557.02,545.87,557.47,550.04,557.97,554.2z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> rafId;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> lastCall = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">func, limit</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (now - lastCall &lt; limit) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            lastCall = now;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> func.<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">updateProgress</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 计算进度条高度</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> scrollTop = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> scrollHeight = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollHeight</span> - <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> progress = <span class="title class_">Math</span>.<span class="title function_">floor</span>((scrollTop / scrollHeight) * <span class="number">100</span>); <span class="comment">// 使用 Math.floor 取整</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> progressBar = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.progress&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        progressBar.<span class="property">style</span>.<span class="property">height</span> = <span class="string">`<span class="subst">$&#123;progress&#125;</span>%`</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 当网页向下滑动 20px 出现&quot;返回顶部&quot; 按钮</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> &gt; <span class="number">20</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> &gt; <span class="number">20</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myBtn&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myBtn&quot;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        rafId = <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(updateProgress);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">startScrollListener</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">updateProgress</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">stopScrollListener</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="title function_">cancelAnimationFrame</span>(rafId);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 点击按钮，返回顶部</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">topFunction</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> startY = <span class="variable language_">window</span>.<span class="property">scrollY</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> startTime = performance.<span class="title function_">now</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> duration = <span class="number">500</span>; <span class="comment">// 滚动持续时间，单位为毫秒，可根据需要调整</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">scrollToTop</span>(<span class="params">currentTime</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> elapsed = currentTime - startTime;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> progress = <span class="title class_">Math</span>.<span class="title function_">min</span>(elapsed / duration, <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> ease = <span class="title function_">easeInOutCubic</span>(progress); <span class="comment">// 使用缓动函数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> newY = startY * (<span class="number">1</span> - ease);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> = newY;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> = newY;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (progress &lt; <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(scrollToTop);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">stopScrollListener</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(scrollToTop);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 缓动函数，这里使用的是 easeInOutCubic 函数，可以根据需要替换为其他缓动函数</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">easeInOutCubic</span>(<span class="params">t</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> t &lt; <span class="number">0.5</span>? <span class="number">4</span> * t * t * t : (t - <span class="number">1</span>) * (<span class="number">2</span> * t - <span class="number">2</span>) * (<span class="number">2</span> * t - <span class="number">2</span>) + <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 使用 throttle 函数对 updateProgress 进行节流</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> throttledUpdateProgress = <span class="title function_">throttle</span>(updateProgress, <span class="number">10</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 开始监听滚动事件</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, throttledUpdateProgress);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 监听触摸事件，使在触摸设备上也能正常工作</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchstart&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">startScrollListener</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchmove&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">throttledUpdateProgress</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchend&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">stopScrollListener</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>通过以上代码，我们就成功地实现了一个丝滑的网页返回顶部样式，你可以根据自己的喜好进一步调整样式和功能，让它更好地融入你的网页设计中。</p>
]]></content>
      <categories>
        <category>实用代码</category>
      </categories>
      <tags>
        <tag>CSS</tag>
        <tag>返回顶部</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>利用Github与Vercel多端部署Hexo博客</title>
    <url>/posts/d89a0dc3.html</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>写这个教程是因为<strong>Github的静态托管速度确实有点慢</strong>，而<strong>vercel部署会快很多</strong>，我会在这篇文章里，从0到1教你如何利用Github部署Hexo博客，并且额外通过vercel自动拉取GitHub仓库，这样你的<strong>自定义域名就不需要绑定在GitHub的pages</strong>，而是绑定在Vercel。虽然vercel的官方解析比较慢，但再慢也没Github慢，其次，vercel有专门针对中国大陆的节点，也有国内第三方搭建的节点。 我们解析后两个，速度会有很大的提升。</p>
<h2 id="一-搭建Hexo"><a href="#一-搭建Hexo" class="headerlink" title="一.搭建Hexo"></a>一.搭建Hexo</h2><p>在开始搭建 Hexo 博客之前，你需要确保系统中已经安装了以下软件：</p>
<h4 id="1-安装node"><a href="#1-安装node" class="headerlink" title="1.安装node"></a>1.安装node</h4><div class="tab-item-content active" id="fold-3">
     <details>
        <summary>node.js</summary>
        <p>
        <div class="tab-item-content active" id="link-3">
    <a class="tag-link" href="https://nodejs.org/en/download/" target="_blank">
        <div class="tag-link-tips">
            引用外部链接
        </div>
        <div class="tag-link-bottom">
            <div class="tag-link-left">
                <i class="solitude fas fa-link"></i>
            </div>
            <div class="tag-link-right">
                <div class="tag-link-title">
                    安装
                </div>
                <div class="tag-link-sitename">
                    node.js官网下载
                </div>
            </div>
            <i class="solitude fas fa-chevron-right"></i>
        </div>
    </a>
</div>
选择自己设备对应的版本，按要求一直点下一步进行安装，建议<b>放在C盘之外的盘</b>
        </p>
    </details>
</div>

<h4 id="2-安装git"><a href="#2-安装git" class="headerlink" title="2.安装git"></a>2.安装git</h4><div class="tab-item-content active" id="fold-3">
     <details>
        <summary>git</summary>
        <p>
        <div class="tab-item-content active" id="link-3">
    <a class="tag-link" href="https://registry.npmmirror.com/binary.html?path=git-for-windows/" target="_blank">
        <div class="tag-link-tips">
            引用外部链接
        </div>
        <div class="tag-link-bottom">
            <div class="tag-link-left">
                <i class="solitude fas fa-link"></i>
            </div>
            <div class="tag-link-right">
                <div class="tag-link-title">
                    安装
                </div>
                <div class="tag-link-sitename">
                    git国内镜像源下载
                </div>
            </div>
            <i class="solitude fas fa-chevron-right"></i>
        </div>
    </a>
</div>
由于git官网下载非常的慢，所以我给出的是<b>国内镜像网站</b>，选择自己设备对应的版本，按要求一直点下一步进行安装，同样建议<b>放在C盘之外的盘</b>
        </p>
    </details>
</div>

<p>安装成功之后，在命令行依次输入以下命令，检测是否安装成功</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git --version</span><br><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure>
<p>可以用PowerShell也可以用同时按 Win+ R 输入 cmd 打开命令提示符，有相应版本信息显示则安装成功，若报错请卸载软件重新安装<br><img src="/img/peitu/node-git.png" alt="检验是否安装成功"></p>
<h4 id="3-安装-Hexo-CLI"><a href="#3-安装-Hexo-CLI" class="headerlink" title="3.安装 Hexo CLI"></a>3.安装 Hexo CLI</h4><p>打开命令行工具，运行以下命令来全局安装 Hexo CLI：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<p>新建一个目录来存放你的博客项目，然后进入该目录右键打开<strong>终端</strong>，也可以右键打开<strong>Git Bash Here</strong>输入以下命令进行初始化：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure>
<p>为了能够将 Hexo 生成的静态文件部署到 GitHub，需要安装<strong>hexo-deployer-git</strong>插件，在项目根目录下运行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>安装完成后，你的博客根目录下应该会有以下文件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#假设是E盘：</span><br><span class="line">    └── blog  # Hexo 博客根目录</span><br><span class="line">        ├── _config.yml         # Hexo 全局配置文件，可设置网站标题、副标题、作者、URL、部署方式等信息</span><br><span class="line">        ├── package.json        # 项目依赖和脚本配置文件，记录项目所需的 npm 包和可执行脚本，通过 npm install 安装依赖</span><br><span class="line">        ├── package-lock.json   # 锁定安装时的包的版本号，保证其他人安装相同版本的依赖</span><br><span class="line">        ├── scaffolds           # 模板文件夹</span><br><span class="line">        │   ├── draft.md        # 草稿文章模板，使用 hexo new draft &quot;文章标题&quot; 时基于此创建草稿</span><br><span class="line">        │   ├── page.md         # 页面模板，使用 hexo new page &quot;页面名称&quot; 时基于此创建页面</span><br><span class="line">        │   └── post.md         # 文章模板，使用 hexo new post &quot;文章标题&quot; 时基于此创建文章</span><br><span class="line">        ├── source              # 资源文件夹，存放博客文章、页面、图片等资源</span><br><span class="line">        │   ├── _drafts         # 草稿文件夹，存放未发布的文章草稿</span><br><span class="line">        │   │   └── draft-article.md  # 示例草稿文章</span><br><span class="line">        │   ├── _posts          # 文章文件夹，存放已发布的文章</span><br><span class="line">        │   │   └── published-article.md  # 示例已发布文章</span><br><span class="line">        │   ├── images          # 图片文件夹，存放博客中使用的图片</span><br><span class="line">        │   │   └── example.jpg # 示例图片</span><br><span class="line">        │   └── index.md        # 首页 Markdown 文件，可自定义首页内容</span><br><span class="line">        ├── themes              # 主题文件夹，存放 Hexo 主题</span><br><span class="line">        │   └── next            # 以 Next 主题为例，不同主题名称不同</span><br><span class="line">        │       ├── _config.yml # 主题配置文件，可配置主题外观、功能等</span><br><span class="line">        │       ├── languages   # 语言文件文件夹，包含不同语言的文本配置</span><br><span class="line">        │       ├── layout      # 布局文件夹，存放主题的模板文件（如 Pug、EJS 等）</span><br><span class="line">        │       ├── scripts     # 脚本文件夹，存放主题的自定义脚本</span><br><span class="line">        │       └── source      # 主题资源文件夹，存放主题的 CSS、JavaScript、图片等资源</span><br><span class="line">        ├── node_modules        # 依赖包文件夹，存放项目通过 npm 安装的所有依赖包</span><br><span class="line">        └── public              # 生成的静态文件文件夹，hexo generate 命令将 Markdown 文件转换为 HTML 等静态文件存于此</span><br><span class="line">            ├── index.html      # 博客首页</span><br><span class="line">            ├── archives        # 文章存档页面</span><br><span class="line">            ├── categories      # 分类页面</span><br><span class="line">            ├── tags            # 标签页面</span><br><span class="line">            ├── css             # 样式文件文件夹</span><br><span class="line">            └── js              # JavaScript 文件文件夹</span><br></pre></td></tr></table></figure>
<p>依次执行以下命令查看是否本地部署成功：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<p>显示如下证明成功部署了Hexo博客</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>
<p>你可以访问 <code>http://localhost:4000/</code> 查看你的博客<br><img src="/img/peitu/hexo.png" alt="博客默认页面"></p>
<h2 id="二-部署到Github"><a href="#二-部署到Github" class="headerlink" title="二.部署到Github"></a>二.部署到Github</h2><h4 id="1-创建-GitHub-仓库"><a href="#1-创建-GitHub-仓库" class="headerlink" title="1.创建 GitHub 仓库"></a>1.创建 GitHub 仓库</h4><p>登录 GitHub 账号，点击页面右上角的 “+” 号，选择 <strong>New repository</strong> 创建仓库就行了</p>
<h4 id="2-修改deploy"><a href="#2-修改deploy" class="headerlink" title="2.修改deploy"></a>2.修改deploy</h4><p>打开 Hexo 项目根目录下的<b>_config.yml</b>文件，找到并修改 deploy 部分的配置，示例如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:用户名/仓库名.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure>
<h4 id="3-配置ssh密钥"><a href="#3-配置ssh密钥" class="headerlink" title="3.配置ssh密钥"></a>3.配置ssh密钥</h4><ul>
<li><strong>检查是否存在密钥</strong></li>
</ul>
<p>在生成新的 SSH 密钥之前，你可以先检查一下本地是否已经存在 SSH 密钥。打开终端（在 Windows 系统中可以使用 Git Bash），输入以下命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ls</span> -al ~/.ssh</span><br></pre></td></tr></table></figure>
<p>查看是否有 <strong>id_rsa.pub</strong> 或 <strong>id_ed25519.pub</strong> 文件，如果有，则说明已经存在 SSH 密钥，你可以直接使用该密钥；如果没有，则需要生成新的 SSH 密钥</p>
<ul>
<li><strong>生成新的密钥</strong></li>
</ul>
<p>右键打开 Git Bash 并设置用户名和邮箱</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;GitHub 用户名&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;GitHub 邮箱&quot;</span></span><br></pre></td></tr></table></figure>
<p>在终端中输入以下命令，一直按回车来生成新的 SSH 密钥：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;GitHub 邮箱&quot;</span></span><br></pre></td></tr></table></figure>
<p>这会在默认路径<b> C:\Users\用户名.ssh </b>下生成 id_rsa（私钥）和 id_rsa.pub（公钥）两个文件。打开公钥<strong>id_rsa.pub</strong>文件，全选并复制里面的所有内容。如果在资源管理器中看不到.ssh目录，勾选显示隐藏的项目就行了</p>
<ul>
<li><strong>GitHub添加密钥</strong></li>
</ul>
<p>登陆 GitHub ，进入 Settings 页面，选择左边栏的 <strong>SSH and GPG keys</strong>，点击 New SSH key</p>
<p>Title 随便取个名字，粘贴复制的 id_rsa.pub 内容到 Key 中，点击 <strong>Add SSH key</strong> 完成添加</p>
<p>添加完成后，可以在 Git Bash 中输入<code>ssh -T git@github.com</code>来验证是否添加成功。出现类似下方的提示信息，则连接成功</p>
<blockquote>
<p>Hi username! You’ve successfully authenticated, but GitHub does not provide shell access.</p>
</blockquote>
<p>此时进行hexo三连就可以部署到Github了，但我们的教程是不采用GitHub作为网站托管，所以我们不需要在Github绑定自定义域名，如果你执意要用Github托管，到这里已经结束了。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean                 <span class="comment">#清理缓存</span></span><br><span class="line">hexo g                     <span class="comment">#生成静态文件</span></span><br><span class="line">hexo d                     <span class="comment">#部署到Github</span></span><br><span class="line">hexo new <span class="string">&quot;我的第一篇文章&quot;</span>   <span class="comment">#创建新文章</span></span><br><span class="line">hexo new page <span class="string">&quot;about&quot;</span>      <span class="comment">#创建新页面</span></span><br></pre></td></tr></table></figure>
<h2 id="三-Vercel额外部署"><a href="#三-Vercel额外部署" class="headerlink" title="三.Vercel额外部署"></a>三.Vercel额外部署</h2><p>这里很简单，你只需要登录Vercel，创建一个项目，他会让你选择你的Github的仓库，我们<strong>选择博客仓库进行创建</strong>就可以了</p>
<p>创建是自动部署的，默认节点是美国，修改节点需要重新部署，其实我不太建议大家使用香港，由于泛滥使用，速度也没见得多快，你们可以使用亚太地区的，比如新加坡、日本等</p>
<p>然后<strong>绑定自己域名</strong>，这里需要C解析到如下地址，自己选一个：</p>
<table>
<thead>
<tr>
<th>解析地址</th>
<th>特点描述</th>
<th>推荐程度</th>
</tr>
</thead>
<tbody><tr>
<td>cname-china.vercel-dns.com</td>
<td>针对中国地区优化的官方解析地址</td>
<td>较推荐</td>
</tr>
<tr>
<td>cname.vercel-dns.com</td>
<td>官方解析地址，稳定、全球加速</td>
<td>中等</td>
</tr>
<tr>
<td>vercel.cdn.yt-blog.top</td>
<td>国内第三方提供，中国访问速度优，稳定性未知</td>
<td><strong>较推荐</strong></td>
</tr>
</tbody></table>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>相信通过一步步跟着教程操作，大家已经成功掌握了 Hexo 博客在 Github 和 Vercel 多端部署的方法。不用再为网站速度慢而烦恼，也无需担心稳定性问题。每次往 GitHub 推送更新后，Vercel 都会同步跟上，让你的博客始终保持最佳状态。希望大家能好好利用这个技巧，让自己的博客被更多人看到、喜欢，也期待大家不断探索新的可能</p>
]]></content>
      <categories>
        <category>技术教程</category>
      </categories>
      <tags>
        <tag>Vercel</tag>
        <tag>Hexo</tag>
        <tag>博客</tag>
        <tag>Github</tag>
      </tags>
  </entry>
  <entry>
    <title>博客写作告别插件！手搓 Markdown 与 Html 样式秘籍</title>
    <url>/posts/aa7bafa5.html</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>写这个仅用于自己写文章时，方便直接拿来使用，插件的原理就是封装好了短代码，但是最终呈现还是以HTML来展示的。个人觉得插件有插件的好处，手搓有手搓的好处。手搓意味着不依赖插件，文章跨平台迁移更方便，不用担心文章样式失效。</p>
<h2 id="一-展开关闭盒子"><a href="#一-展开关闭盒子" class="headerlink" title="一.展开关闭盒子"></a>一.展开关闭盒子</h2><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-0">默认关闭</button></li><li class="tab"><button type="button" data-href="#test1-1">默认打开</button></li><li class="tab"><button type="button" data-href="#test1-2">CSS样式</button></li><li class="tab"><button type="button" data-href="#test1-3">预览</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-0"><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tab-item-content active&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fold-3&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">details</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">summary</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">details</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test1-1"><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tab-item-content active&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fold-3&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">details</span> <span class="attr">open</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">summary</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">details</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test1-2"><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* details 元素的基本样式 */</span></span><br><span class="line"><span class="selector-tag">details</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">54px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line">  <span class="attribute">transition</span>: border <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标悬停在 details 元素上时的样式 */</span></span><br><span class="line"><span class="selector-tag">details</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-hover-always);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* details 元素中 summary 的样式 */</span></span><br><span class="line"><span class="selector-tag">details</span> <span class="selector-tag">summary</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.5rem</span> <span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--efu-card-bg);</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--efu-shadow-border);</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* details 元素中第二个子元素的样式 */</span></span><br><span class="line"><span class="selector-tag">details</span>&gt;<span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="built_in">calc</span>(<span class="number">54px</span> + <span class="number">1rem</span>)<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 当 details 元素处于打开状态时，summary 的样式 */</span></span><br><span class="line"><span class="selector-tag">details</span><span class="selector-attr">[open]</span> <span class="selector-tag">summary</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--efu-lighttext);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--efu-card-bg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* summary 元素的伪元素 before 样式 */</span></span><br><span class="line"><span class="selector-tag">details</span> <span class="selector-tag">summary</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标悬停在 summary 元素上时的样式 */</span></span><br><span class="line"><span class="selector-tag">details</span> <span class="selector-tag">summary</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--efu-lighttext);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--efu-card-bg);</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="built_in">var</span>(--efu-shadow-main);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* summary 元素获得焦点时的样式 */</span></span><br><span class="line"><span class="selector-tag">details</span> <span class="selector-tag">summary</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* summary 元素的标记样式 */</span></span><br><span class="line"><span class="selector-tag">details</span> <span class="selector-tag">summary</span><span class="selector-pseudo">::marker</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--efu-lighttext);</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 当 details 元素处于打开状态时，summary 元素标记的样式 */</span></span><br><span class="line"><span class="selector-tag">details</span><span class="selector-attr">[open]</span> <span class="selector-tag">summary</span><span class="selector-pseudo">::marker</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--efu-card-bg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标悬停在 summary 元素上时，标记的样式 */</span></span><br><span class="line"><span class="selector-tag">details</span> <span class="selector-tag">summary</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::marker</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--efu-card-bg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 当 details 元素处于打开状态时的样式 */</span></span><br><span class="line"><span class="selector-tag">details</span><span class="selector-attr">[open]</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-hover-always);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">1.5rem</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--efu-card-bg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标悬停在 summary 元素上时，添加的伪元素 after 样式 */</span></span><br><span class="line"><span class="selector-tag">details</span> <span class="selector-tag">summary</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;+&#x27;</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">top</span>: <span class="built_in">calc</span>(<span class="number">50%</span> - <span class="number">2px</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>);</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 当 details 元素处于打开状态，鼠标悬停在 summary 元素上时，伪元素 after 的样式 */</span></span><br><span class="line"><span class="selector-tag">details</span><span class="selector-attr">[open]</span>&gt;<span class="selector-tag">summary</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 媒体查询，当屏幕宽度小于等于 768px 时的样式 */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">details</span><span class="selector-attr">[open]</span> &#123;</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">16px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test1-3"><div class="tab-item-content active" id="fold-3">
     <details open="">
        <summary>标题</summary>
        <p>内容</p>
    </details>
</div></div></div></div>

<h2 id="二-引用文章链接"><a href="#二-引用文章链接" class="headerlink" title="二.引用文章链接"></a>二.引用文章链接</h2><div class="tabs" id="test2"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test2-0">代码</button></li><li class="tab"><button type="button" data-href="#test2-1">CSS样式</button></li><li class="tab"><button type="button" data-href="#test2-2">预览</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test2-0"><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tab-item-content active&quot;</span> <span class="attr">id</span>=<span class="string">&quot;link-3&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;tag-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://blog.deepsea.xin/posts/6050.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tag-link-tips&quot;</span>&gt;</span></span><br><span class="line">            引用文章链接</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tag-link-bottom&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tag-link-left&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;solitude fas fa-link&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tag-link-right&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tag-link-title&quot;</span>&gt;</span></span><br><span class="line">                    白衣博客</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tag-link-sitename&quot;</span>&gt;</span></span><br><span class="line">                    基于lua简单实现APP的远程更新</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;solitude fas fa-chevron-right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test2-1"><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* link短代码 */</span></span><br><span class="line"><span class="selector-class">.article-container</span> <span class="selector-tag">a</span><span class="selector-class">.tag-link</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--efu-secondbg);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.5rem</span> <span class="number">1rem</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">1rem</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none; <span class="comment">/* 去除默认的链接下划线 */</span></span><br><span class="line">  <span class="attribute">color</span>: inherit; <span class="comment">/* 继承父元素的文本颜色 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-container</span> <span class="selector-tag">a</span><span class="selector-class">.tag-link</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--efu-main);</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-hover) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-container</span> <span class="selector-tag">a</span><span class="selector-class">.tag-link</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.tag-link-tips</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--efu-white);</span><br><span class="line">  <span class="attribute">border-bottom-color</span>: <span class="built_in">var</span>(--efu-white);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-container</span> <span class="selector-tag">a</span><span class="selector-class">.tag-link</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-container</span> <span class="selector-tag">a</span><span class="selector-class">.tag-link</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: auto;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.6</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-container</span> <span class="selector-tag">a</span><span class="selector-class">.tag-link</span> <span class="selector-class">.tag-link-bottom</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">0.5rem</span>;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-container</span> <span class="selector-tag">a</span><span class="selector-class">.tag-link</span> <span class="selector-class">.tag-link-bottom</span> <span class="selector-class">.tag-link-left</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">min-width</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--efu-card-bg);</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-container</span> <span class="selector-tag">a</span><span class="selector-class">.tag-link</span> <span class="selector-class">.tag-link-bottom</span> <span class="selector-class">.tag-link-left</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--efu-fontcolor);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-container</span> <span class="selector-tag">a</span><span class="selector-class">.tag-link</span> <span class="selector-class">.tag-link-bottom</span> <span class="selector-class">.tag-link-right</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">76px</span> - <span class="number">1rem</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.article-container</span> <span class="selector-tag">a</span><span class="selector-class">.tag-link</span> <span class="selector-class">.tag-link-tips</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="built_in">var</span>(--style-border);</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--efu-gray);</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test2-2"><div class="tab-item-content active" id="link-3">
    <a class="tag-link" href="https://blog.deepsea.xin/posts/6050.html" target="_blank">
        <div class="tag-link-tips">
            引用文章链接
        </div>
        <div class="tag-link-bottom">
            <div class="tag-link-left">
                <i class="solitude fas fa-link"></i>
            </div>
            <div class="tag-link-right">
                <div class="tag-link-title">
                    白衣博客
                </div>
                <div class="tag-link-sitename">
                    基于lua简单实现APP的远程更新
                </div>
            </div>
            <i class="solitude fas fa-chevron-right"></i>
        </div>
    </a>
</div></div></div></div>

<h2 id="三-行内代码"><a href="#三-行内代码" class="headerlink" title="三.行内代码"></a>三.行内代码</h2><div class="tabs" id="test3"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test3-0">代码</button></li><li class="tab"><button type="button" data-href="#test3-1">CSS样式</button></li><li class="tab"><button type="button" data-href="#test3-2">预览</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test3-0"><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;inline-code&quot;</span>&gt;</span>文本内容<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test3-1"><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.inline-code</span> &#123;</span><br><span class="line">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">            <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">5px</span>;</span><br><span class="line">            <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">5px</span>; <span class="comment">/* 添加水平外边距，可按需调整 */</span></span><br><span class="line">            <span class="attribute">font-family</span>: <span class="string">&#x27;Courier New&#x27;</span>, Courier, monospace;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="test3-2"><p><span class="inline-code">ABCDEFGHIJKLMNOPQRSTUVWXYZ</span></p></div></div></div>

<h2 id="四-选项卡-主题自带"><a href="#四-选项卡-主题自带" class="headerlink" title="四.选项卡(主题自带)"></a>四.选项卡(主题自带)</h2><div class="tabs" id="选项卡示例"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#选项卡示例-0">代码</button></li><li class="tab"><button type="button" data-href="#选项卡示例-1">预览</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="选项卡示例-0"><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;% tabs 选项卡示例 %&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- tab 选项一 --&gt;</span></span><br><span class="line">选项一文本内容</span><br><span class="line"><span class="comment">&lt;!-- endtab --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- tab 选项二 --&gt;</span></span><br><span class="line">选项二文本内容</span><br><span class="line"><span class="comment">&lt;!-- endtab --&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- tab 选项三 --&gt;</span></span><br><span class="line">选项三文本内容</span><br><span class="line"><span class="comment">&lt;!-- endtab --&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="选项卡示例-1"><div class="tabs" id="选项卡示例"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#选项卡示例-0">选项一</button></li><li class="tab"><button type="button" data-href="#选项卡示例-1">选项二</button></li><li class="tab"><button type="button" data-href="#选项卡示例-2">选项三</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="选项卡示例-0"><p>选项一文本内容</p></div><div class="tab-item-content" id="选项卡示例-1"><p>选项二文本内容</p></div><div class="tab-item-content" id="选项卡示例-2"><p>选项三文本内容</p></div></div></div></div></div></div>

<h2 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续"></a>未完待续</h2><p>如果你有更好的样式外观，欢迎评论区留言，白衣会考虑是否加入。</p>
]]></content>
      <categories>
        <category>主题美化</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>备份记录</tag>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>基于lua简单实现APP的远程更新</title>
    <url>/posts/6050.html</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>思路：从远程服务器的<strong>text.lua</strong>文件获取版本信息，比较版本号与软件版本号大小，从而检测是否需要更新，此外支持<strong>内置下载</strong>（必须直链）以及调用<strong>外部浏览器下载</strong>（不作要求）我们 默认的是内置下载。其余的以注释形式展示，按需更改即可。</p>
<h2 id="一-服务器text-lua文件"><a href="#一-服务器text-lua文件" class="headerlink" title="一.服务器text.lua文件"></a>一.服务器text.lua文件</h2><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">【版本】2.2.0【版本】</span><br><span class="line">【软件大小】6.62MB【软件大小】</span><br><span class="line">【内容】更新内容...【内容】</span><br><span class="line">【更新地址】https://example.com/app.apk【更新地址】</span><br></pre></td></tr></table></figure>


<blockquote>
<p>注意：直接更改前后中括号包裹起来的文本即可，服务器文本格式需严格遵循示例格式</p>
</blockquote>
<ul>
<li><strong>【版本】2.2.0【版本】</strong> 此处填写的版本如果大于软件本身的版本，则会执行更新，版本比较使用字符串直接比较（注意多位数版本号问题，避免出现2.10.0，因为字符串比较是逐个比较的，一般来讲我们只写个位数就可以了，例如2.9.9然后3.0.0）</li>
<li><strong>【内容】更新内容…【内容】</strong> 此处填写你的更新说明，支持多行，不需要换行符，直接回车即可</li>
<li><strong>【更新地址】此处填写下载直链【更新地址】</strong> 这里来填写直链下载地址，此实例默认内置更新，因此必须填写直链，带协议头或者直接&#x2F;&#x2F;</li>
</ul>
<p>我用的是GitHub的pages，你也可以用云存储，或者自己的服务器，但值得注意的是，这个链接必须保证稳定性。</p>
<h2 id="二-你的项目程序main文件"><a href="#二-你的项目程序main文件" class="headerlink" title="二.你的项目程序main文件"></a>二.你的项目程序main文件</h2><p>main文件里填入以下代码，只需要<strong>更改get的链接地址</strong>以及<strong>系统下载中的文件名</strong>即可，别的不需要改动。</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;com.google.android.material.dialog.MaterialAlertDialogBuilder&quot;</span></span><br><span class="line">import <span class="string">&quot;com.androlua.Http&quot;</span></span><br><span class="line">packinfo=this.getPackageManager().getPackageInfo(this.getPackageName(),((<span class="number">32552732</span>/<span class="number">2</span>/<span class="number">2</span><span class="number">-8183</span>)/<span class="number">10000</span><span class="number">-6</span><span class="number">-231</span>)/<span class="number">9</span>)</span><br><span class="line">当前版本=<span class="built_in">tostring</span>(packinfo.versionName)</span><br><span class="line"><span class="comment">--我们假设已经完成了第一步，将内容按格式填入text.lua文件，并且上传到了服务器，然后你需要更改这里的链接，这里的链接就是text.lua的地址</span></span><br><span class="line">Http.get(<span class="string">&quot;https://baiyinet.github.io/rewards/update/text.lua&quot;</span>,<span class="literal">nil</span>,<span class="literal">nil</span>,<span class="literal">nil</span>,<span class="function"><span class="keyword">function</span><span class="params">(code,content)</span></span></span><br><span class="line">  <span class="keyword">if</span> code==<span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">    content=content:<span class="built_in">gsub</span>(<span class="string">&quot;。&quot;</span>,<span class="string">&quot;\n&quot;</span>) <span class="keyword">or</span> content;</span><br><span class="line">    更新=content:<span class="built_in">match</span>(<span class="string">&quot;【版本】(.-)【版本】&quot;</span>)</span><br><span class="line">    版本=content:<span class="built_in">match</span>(<span class="string">&quot;【版本】(.-)【版本】&quot;</span>)</span><br><span class="line">    大小=content:<span class="built_in">match</span>(<span class="string">&quot;【软件大小】(.-)【软件大小】&quot;</span>)</span><br><span class="line">    文本=content:<span class="built_in">match</span>(<span class="string">&quot;【内容】(.-)【内容】&quot;</span>)</span><br><span class="line">    更新地址=content:<span class="built_in">match</span>(<span class="string">&quot;【更新地址】(.-)【更新地址】&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> 更新&lt;=当前版本 <span class="keyword">then</span><span class="comment">--如果text.lua版本小于当前版本，就是最新版，不需要更新</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;恭喜，当前是最新版本&quot;</span>)</span><br><span class="line"></span><br><span class="line">     <span class="keyword">else</span><span class="comment">--否则弹出更新对话框</span></span><br><span class="line"></span><br><span class="line">      dialog=MaterialAlertDialogBuilder(activity)</span><br><span class="line">      .setTitle(当前版本..<span class="string">&quot;→&quot;</span>..版本)</span><br><span class="line">      .setCancelable(<span class="literal">true</span>)</span><br><span class="line">      .setMessage(<span class="string">&quot;软件大小:&quot;</span>..大小..<span class="string">&quot;\n内容：\n&quot;</span>..文本)</span><br><span class="line">      .setPositiveButton(<span class="string">&quot;内置更新&quot;</span>,&#123;onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line"></span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;正在下载，请前往通知栏查看&quot;</span>)</span><br><span class="line">          <span class="comment">--[[url=&quot;&quot;..更新地址--更新地址</span></span><br><span class="line"><span class="comment">            viewIntent = Intent(&quot;android.intent.action.VIEW&quot;,Uri.parse(url))</span></span><br><span class="line"><span class="comment">            activity.startActivity(viewIntent)</span></span><br><span class="line"><span class="comment">            activity.finish()]]</span><span class="comment">--这里注释掉的是调用系统浏览器打开下载</span></span><br><span class="line"></span><br><span class="line">          <span class="comment">--这里是内置下载：</span></span><br><span class="line">          import <span class="string">&quot;android.app.DownloadManager&quot;</span></span><br><span class="line">          <span class="function"><span class="keyword">function</span> 系统下载<span class="params">(文件名,下载链接)</span></span></span><br><span class="line">            import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">            import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">            downloadManager=activity.getSystemService(Context.DOWNLOAD_SERVICE);</span><br><span class="line">            url=Uri.parse(下载链接);</span><br><span class="line">            request=DownloadManager.Request(url);</span><br><span class="line">            request.setTitle(文件名);<span class="comment">--通知标题</span></span><br><span class="line">            request.setDescription(<span class="string">&quot;正在下载&quot;</span>);<span class="comment">--通知描述</span></span><br><span class="line">            <span class="comment">--request.setMimeType(&quot;application/cn.trinea.download.file&quot;);</span></span><br><span class="line">            <span class="comment">--设置下载的文件类型，这里下载的APP</span></span><br><span class="line">            request.setMimeType(<span class="string">&quot;application/vnd.android.package-archive&quot;</span>);</span><br><span class="line">            <span class="comment">--wifi，移动网络(数据流量)都可以下载</span></span><br><span class="line">            request.setAllowedNetworkTypes(DownloadManager.Request.NETWORK_MOBILE|DownloadManager.Request.NETWORK_WIFI);</span><br><span class="line">            <span class="comment">--存放文件夹,下载文件名</span></span><br><span class="line">            request.setDestinationInExternalPublicDir(<span class="string">&quot;Download&quot;</span>,文件名);</span><br><span class="line">            <span class="comment">--通知提示，VISIBILITY_VISIBLE_NOTIFY_COMPLETED表示下载完成后显示通知栏提示。VISIBILITY_HIDDEN表示不显示任何通知栏提示</span></span><br><span class="line">            request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);</span><br><span class="line">            downloadManager.enqueue(request);</span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line">          系统下载(<span class="string">&quot;览色.apk&quot;</span>,<span class="string">&quot;&quot;</span>..更新地址)<span class="comment">--远程文件text.lua填写更新地址，你只需要更改文件名即可，将 览色.apk 换成你的文件名</span></span><br><span class="line">          <span class="comment">--系统下载(&quot;实例.apk&quot;,&quot;此处填写直链地址&quot;)--必须是直链，如果想要远程控制下载链接地址 ，参考上面一行写法</span></span><br><span class="line">        <span class="keyword">end</span>&#125;)</span><br><span class="line">      .show()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;服务器超时，请联系作者反馈&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>经过以上两步，就可以实现了，如果报错或者还是没能成功，请检查 ：</p>
<ul>
<li>需要的<strong>库</strong>是否导入完整</li>
<li>服务器text.lua文件<strong>格式</strong>是否按要求填写</li>
<li>用户已授予存储权限以及调用系统下载管理器<strong>权限</strong></li>
<li>提供的下载地址是否是<strong>有效的直链</strong></li>
<li>支持<strong>跨域访问</strong>（如果使用服务器）</li>
</ul>
]]></content>
      <categories>
        <category>软件开发</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>软件</tag>
        <tag>Android</tag>
        <tag>FusionApp</tag>
      </tags>
  </entry>
  <entry>
    <title>复制粘贴提醒美化以及监听复制加入尾随文本</title>
    <url>/posts/7ba50820.html</url>
    <content><![CDATA[<p>下面分享两种复制提示，这是之前在用Typecho博客的时候写的文章，可以给你的博客加上复制粘贴提示，也可以用作监听复制的尾随文本。</p>
<h2 id="一-layer样式"><a href="#一-layer样式" class="headerlink" title="一.layer样式"></a>一.layer样式</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入layer.js--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/layer/3.1.1/layer.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 复制提醒 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">oncopy</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;layer.<span class="title function_">msg</span>(<span class="string">&#x27;复制成功,若要转载请务必保留原文链接！&#x27;</span>);&#125;;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="二-sweetalert样式"><a href="#二-sweetalert样式" class="headerlink" title="二.sweetalert样式"></a>二.sweetalert样式</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入sweetalert2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/sweetalert/1.1.3/sweetalert.min.css&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/sweetalert/1.1.3/sweetalert.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 复制提醒 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">oncopy</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">swal</span>(<span class="string">&quot;复制成功！&quot;</span>, <span class="string">&quot;白衣博客提醒您：若要转载请保留原文链接！&quot;</span>, <span class="string">&quot;success&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>个人推荐第一种</strong>，高端大气上档次；第二个是弹窗，感觉入侵感比较强，不如第一个顺眼。</p>
<h2 id="三-尾随文本"><a href="#三-尾随文本" class="headerlink" title="三.尾随文本"></a>三.尾随文本</h2><p>下面将给出监听复制，并且强制随带上小尾巴，可以加入你的转载声明或者原文链接等等</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/** 监听copy事件 */</span></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;copy&quot;</span>,<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//取消默认事件，才能修改复制的值</span></span></span><br><span class="line"><span class="language-javascript">      e.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//复制的内容</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> copyTxt = <span class="string">`<span class="subst">$&#123;<span class="variable language_">window</span>.getSelection(<span class="number">0</span>).toString()&#125;</span>\n————————————————\n原文链接：<span class="subst">$&#123;<span class="variable language_">window</span>.location.href&#125;</span>\n白衣博客：https://baiyi.ink，如若转载请附上原文链接`</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span>(e.<span class="property">clipboardData</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      e.<span class="property">clipboardData</span>.<span class="title function_">setData</span>(<span class="string">&#x27;text/plain&#x27;</span>,  copyTxt);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable language_">window</span>.<span class="property">clipboardData</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> <span class="variable language_">window</span>.<span class="property">clipboardData</span>.<span class="title function_">setData</span>(<span class="string">&quot;text&quot;</span>, copyTxt);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>实用代码</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>复制</tag>
      </tags>
  </entry>
  <entry>
    <title>巧用 data-src 实现简洁高效的图片懒加载及滑动监听</title>
    <url>/posts/5b066c79.html</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>网上搜了搜图片懒加载，发现很是繁琐，自己研究了一阵子，发现一个<strong>data-src</strong>就能搞定的事情，没必要像网上说的那么复杂。</p>
<h2 id="一-适用于img标签"><a href="#一-适用于img标签" class="headerlink" title="一.适用于img标签"></a>一.适用于img标签</h2><h4 id="1-构建占位符"><a href="#1-构建占位符" class="headerlink" title="1.构建占位符"></a>1.构建占位符</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--这个适用于img的src标签，如果是背景图片的URL，移步第二种--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;lazyload&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;图片的真实地址&quot;</span> <span class="attr">src</span>=<span class="string">&quot;loading.gif&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里<strong>data-src是真实地址</strong>，src相当于一个加载gif的<strong>占位符</strong>，src地址需要填写你的加载占位符地址。</p>
<h4 id="2-JS滑动监听"><a href="#2-JS滑动监听" class="headerlink" title="2.JS滑动监听"></a>2.JS滑动监听</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> lazyImages = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;img[data-src]&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">lazyLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lazyImages.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (lazyImages[i].<span class="title function_">getBoundingClientRect</span>().<span class="property">top</span> &lt;= <span class="variable language_">window</span>.<span class="property">innerHeight</span> &amp;&amp; lazyImages[i].<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-src&#x27;</span>)) &#123;</span><br><span class="line">                lazyImages[i].<span class="property">src</span> = lazyImages[i].<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-src&#x27;</span>);</span><br><span class="line">                lazyImages[i].<span class="title function_">removeAttribute</span>(<span class="string">&#x27;data-src&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 监听滚动事件</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, lazyLoad);</span><br><span class="line">    <span class="comment">// 或者可以监听其他事件，例如鼠标滚动</span></span><br><span class="line">    <span class="comment">// window.addEventListener(&#x27;mousewheel&#x27;, lazyLoad);</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 页面加载完成后立即执行一次图片懒加载</span></span><br><span class="line">    <span class="title function_">lazyLoad</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>JS代码放进页脚位置。上述代码适用于<strong>img标签</strong>的，如果你想将这个功能应用到<strong>背景图片</strong>的懒加载，需要对代码进行一些调整，比如选择带有<strong>data-bg</strong>属性的元素，并设置其<strong>backgroundImage</strong>属性</p>
<h2 id="二-适用于background"><a href="#二-适用于background" class="headerlink" title="二.适用于background"></a>二.适用于background</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF - 8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device - width, initial - scale = 1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;media-content&quot;</span> <span class="attr">title</span>=<span class="string">&quot;标题&quot;</span> <span class="attr">href</span>=<span class="string">&quot;链接&quot;</span> <span class="attr">data-bg</span>=<span class="string">&quot;图片真实地址&quot;</span> <span class="attr">style</span>=<span class="string">&#x27;background-image:url(&quot;loading.gif&quot;);&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> lazyBackgrounds = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.media-content[data-bg]&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">lazyLoad</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lazyBackgrounds.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (lazyBackgrounds[i].<span class="title function_">getBoundingClientRect</span>().<span class="property">top</span> &lt;= <span class="variable language_">window</span>.<span class="property">innerHeight</span> &amp;&amp; lazyBackgrounds[i].<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-bg&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">var</span> bgUrl = lazyBackgrounds[i].<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-bg&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                        lazyBackgrounds[i].<span class="property">style</span>.<span class="property">backgroundImage</span> = <span class="string">&#x27;url(&#x27;</span> + bgUrl + <span class="string">&#x27;)&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                        lazyBackgrounds[i].<span class="title function_">removeAttribute</span>(<span class="string">&#x27;data-bg&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, lazyLoad);</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">lazyLoad</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>实用代码</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>懒加载</tag>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title>必知！FusionApp 如何做到无网本地秒开，有网远程畅览</title>
    <url>/posts/d4f92eda.html</url>
    <content><![CDATA[<img src="/img/d4f92eda.jpg" alt="网络示例图片">

<h2 id="一-创建浏览页"><a href="#一-创建浏览页" class="headerlink" title="一.创建浏览页"></a>一.创建浏览页</h2><ul>
<li><p>浏览页一定要有一个，如果你不需要远程控制浏览页加载网页，直接填写你的网址就可以。此时搭配无网判断就可以实现断网加载本地，有网则加载你填写的网址。</p>
</li>
<li><p>如果你为了更好的维护，担心这个网址可能不稳定，你可以远程控制加载什么网页，那么此时<strong>网址必须填about:empty</strong>，因为empty:blank网页回退会空白，empty:none仅适用于原生布局。</p>
</li>
</ul>
<h2 id="二-植入本地html"><a href="#二-植入本地html" class="headerlink" title="二.植入本地html"></a>二.植入本地html</h2><p>将本地html文件以及相关资源（css、js）放入程序目录，这一步其实就是加载本地HTML的知识，不会的去看基础交互教学。</p>
<h2 id="三-构建无网判断"><a href="#三-构建无网判断" class="headerlink" title="三.构建无网判断"></a>三.构建无网判断</h2><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> wl=activity.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE).getActiveNetworkInfo();</span><br><span class="line"><span class="keyword">if</span> wl== <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--如果没网执行事件START</span></span><br><span class="line">  <span class="keyword">local</span> uiManager=this.uiManager</span><br><span class="line">  activity.uiManager.getFragment(<span class="number">0</span>).webView.parent.removeViewAt(<span class="number">2</span>) <span class="comment">--去除加载进度条</span></span><br><span class="line">  activity.uiManager.currentPage.webView.loadUrl(<span class="string">&quot;file://&quot;</span>..activity.getLuaDir()..<span class="string">&quot;/index.html&quot;</span>)<span class="comment">--第一个浏览页加载本地网页</span></span><br><span class="line">  <span class="comment">--activity.uiManager.getFragment(0).webView.loadUrl(&quot;file://&quot;..activity.getLuaDir()..&quot;/index.html&quot;)--另一种写法，0就是第一个，也就是currentPage</span></span><br><span class="line"><span class="comment">--如果没网执行事件END</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line"><span class="comment">--否则，也就是有网执行事件</span></span><br><span class="line"><span class="comment">--如果你是填写的网址，不需要远程控制，这样就结束了，什么也不用执行。</span></span><br><span class="line"><span class="keyword">end</span> </span><br></pre></td></tr></table></figure>
<h2 id="封装远程函数（可选）"><a href="#封装远程函数（可选）" class="headerlink" title="封装远程函数（可选）"></a>封装远程函数（可选）</h2><p>下面这种适用于远程控制浏览页加载什么网页的，记得FA浏览页网址填about:empty</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line"><span class="keyword">local</span> wl=activity.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE).getActiveNetworkInfo();</span><br><span class="line"><span class="keyword">if</span> wl== <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> uiManager=this.uiManager</span><br><span class="line">  activity.uiManager.getFragment(<span class="number">0</span>).webView.parent.removeViewAt(<span class="number">2</span>)<span class="comment">--去除加载进度条</span></span><br><span class="line">  activity.uiManager.currentPage.webView.loadUrl(<span class="string">&quot;file://&quot;</span>..activity.getLuaDir()..<span class="string">&quot;/index.html&quot;</span>)<span class="comment">--第一个浏览页加载本地网页</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">  <span class="comment">--远程获取，其实和远程更新那里类似</span></span><br><span class="line">  Http.get(<span class="string">&quot;https://example.com/text.lua&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">(code,content)</span></span><span class="comment">--链接填写远程text.lua文件直链，内容在下边</span></span><br><span class="line">    <span class="keyword">if</span> code==<span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">      content=content:<span class="built_in">gsub</span>(<span class="string">&quot;。&quot;</span>,<span class="string">&quot;\n&quot;</span>) <span class="keyword">or</span> content;</span><br><span class="line">      浏览页网址=content:<span class="built_in">match</span>(<span class="string">&quot;【浏览页网址】(.-)【浏览页网址】&quot;</span>)</span><br><span class="line">      <span class="keyword">local</span> uiManager=this.uiManager</span><br><span class="line">      <span class="comment">--第一个浏览页加载网页链接</span></span><br><span class="line">      activity.uiManager.getFragment(<span class="number">0</span>).webView.loadUrl(<span class="string">&quot;&quot;</span>..浏览页网址)<span class="comment">--加载远程填写的网址。</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="远程Text内容"><a href="#远程Text内容" class="headerlink" title="远程Text内容"></a>远程Text内容</h4><p>这里可以参考远程更新那篇文章，远程更新那一期你会了，那这个对你来说也不是难事，其实很多功能，只要有想法，就一定可以实现，希望大家可以通过这篇文章学会融会贯通。</p>
<div class="tab-item-content active" id="link-3">
    <a class="tag-link" href="https://blog.deepsea.xin/posts/6050.html" target="_blank">
        <div class="tag-link-tips">
            引用文章链接
        </div>
        <div class="tag-link-bottom">
            <div class="tag-link-left">
                <i class="solitude fas fa-link"></i>
            </div>
            <div class="tag-link-right">
                <div class="tag-link-title">
                    白衣博客
                </div>
                <div class="tag-link-sitename">
                    基于lua简单实现APP的远程更新
                </div>
            </div>
            <i class="solitude fas fa-chevron-right"></i>
        </div>
    </a>
</div>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">【版本】2.3.7【版本】备注：此处填写的版本如果大于软件版本，则会进行更新</span><br><span class="line">【软件大小】9.26MB【软件大小】</span><br><span class="line">【内容】览色由白衣倾心制作，终极稳定版：</span><br><span class="line">1.新增高级渐变调色、随机渐变生成</span><br><span class="line">2.新增Morandi莫兰迪色系配色</span><br><span class="line">3.重构UI，阅尽繁华处，简约不简单</span><br><span class="line">【内容】</span><br><span class="line">【浏览页网址】https://baidu.com【浏览页网址】</span><br></pre></td></tr></table></figure>
这个远程链接，你完全没必要新建一个，在原更新用的<span class="inline-code">text.lua</span>基础上新增一行即可。比如上边就是远程text.lua文件里的内容，新增一行<b>【浏览页网址】这里填网址【浏览页网址】</b>
]]></content>
      <categories>
        <category>软件开发</category>
      </categories>
      <tags>
        <tag>Lua</tag>
        <tag>软件</tag>
        <tag>Android</tag>
        <tag>FusionApp</tag>
      </tags>
  </entry>
  <entry>
    <title>技术博客运营，在踩坑中蜕变的经验分享</title>
    <url>/posts/5c55.html</url>
    <content><![CDATA[<h3 id="前言：为什么要写博客"><a href="#前言：为什么要写博客" class="headerlink" title="前言：为什么要写博客"></a>前言：为什么要写博客</h3><p>我觉得有以下三点</p>
<ul>
<li>沉淀隐性知识，防止遗忘</li>
<li>具备开源精神，热爱分享</li>
<li>提升个人IP与职业素养<br>其实绝大多数博主并非一开始就怀揣着宏大的职业规划，我们往往只是出于内心最质朴的想法。最初，大家不过是抱着试试看的心态，权当给自己搭建一个专属空间。在这里，我们可以把工作学习里那些稍纵即逝的灵感、宝贵经验详实记录，以备不时之需，又能分享生活中的难忘瞬间。当然，还有不少博主满怀热忱，将其视为分享教程与经验的广阔平台，希望能在知识的传递中找到创作的价值与乐趣。</li>
</ul>
<p>我认为博客的魅力在于知识的交流碰撞，若仅将知识封存于个人记录，虽无可非议，但难免会让文章少了几分<strong>打磨求精</strong>的动力。毕竟，没有读者视角的审视与互动，我们可能会忽视许多潜在问题。常言道“教学相长”，技术博客亦是如此，当我们尝试将复杂知识以通俗易懂的方式呈现给读者时，我们自身对知识的理解与把控也会实现<strong>质的飞跃</strong>。</p>
<h2 id="一：强制互动不可取！"><a href="#一：强制互动不可取！" class="headerlink" title="一：强制互动不可取！"></a>一：强制互动不可取！</h2><p><strong>仅评论可见 回复后可见</strong> 这类做法毫无意义。技术分享博客的初衷是便利读者理解与应用知识，强制评论不仅违背初衷，还可能引发低质量评论。如果读者不想评论，可能会随意写一通，导致垃圾评论泛滥，而你却忙于反垃圾评论，而不去思考垃圾评论的根源。</p>
<p>我发现一个很有意思的现象，这类博客网站往往界面设计不佳，花里胡哨、缺乏重点层次，且内容多为搬运，质量堪忧。</p>
<p>别本末倒置，舍本逐末。很多博客运营者将大量精力放在数据造假、刷评论量这些表面功夫上，而不是提升内容质量、优化用户界面。长此以往，博客会失去用户信任，在竞争激烈的网络环境中被迅速淘汰。</p>
<p><strong>我们应该去思考如何把文章写好，而不是去设置一些毫无实际用处的门槛与限制。</strong></p>
<h2 id="二：内容兼顾更新与深度"><a href="#二：内容兼顾更新与深度" class="headerlink" title="二：内容兼顾更新与深度"></a>二：内容兼顾更新与深度</h2><p>部分技术分享博客存在严重的内容短板。内容<strong>仅停留在基础概念的表面阐述</strong>，就像搭建房屋时只打了个浅浅的地基，没有深入挖掘底层原理。</p>
<p>包括我曾经也是这样，三个字概括就是“假大空”，文章内容过于广泛，这里摘一点，那里蹭一点，文章不精，过于追求广度而忽略了<strong>文章的深度才是核心</strong>！</p>
<p>文章发布后，并不意味着这篇文章就完事了，要及时更新内容。如果内容失效或者后续有更好的想法和实现方式，这些都是要<strong>及时去更新你写过的文章</strong>的。长期不更新内容会使得博客脱节。新的框架、新的写法都在不断涌现，博客如果不及时跟进，还在介绍过时的算法和技术，读者自然会流失。</p>
<p>读者渴望从技术分享博客中获取最新、最实用的知识，只有不断提供深度内容并保持更新，才能满足读者需求，提升博客的吸引力与价值。</p>
<h2 id="三：主题框架要清晰"><a href="#三：主题框架要清晰" class="headerlink" title="三：主题框架要清晰"></a>三：主题框架要清晰</h2><p>博客界面要<strong>主次分明</strong>，搜索栏、文章分类栏目都要突出显示。搜索栏应放置在页面的显眼位置，比如顶部导航栏的<strong>右侧</strong>，以简洁的线条和醒目的图标引导用户快速定位。</p>
<p>文章分类栏目则可设置在页面左侧的侧边栏，也可以放置在右侧。采用垂直排列的方式，每个分类都以独特的图标搭配文字标识，方便用户一目了然。分类的层级不宜过多，最多设置两级，确保用户能快速找到目标文章类别。</p>
<p>在内容展示区，也就是首页文章列表。每篇文章都要有<strong>清晰的标题和摘要</strong>，标题用较大字号并加粗显示，与文章内容形成明显区分。摘要部分则采用适中的字号，简洁概括文章的核心要点，让用户在浏览时能迅速判断是否要深入阅读。</p>
<p><strong>非文章主要信息内容应当在视图之外</strong>，可以在页面的底部，既不影响主要内容的展示，又能完善整个博客的框架结构，让用户在使用博客时，无论是查找文章、浏览内容还是了解博客的相关信息，都能有清晰流畅的体验。</p>
<h2 id="四：文章封面设计"><a href="#四：文章封面设计" class="headerlink" title="四：文章封面设计"></a>四：文章封面设计</h2><p>封面是吸睛的主要手段，一个高级的封面可以直接吸引用户的眼球，但封面的制作不应占用太长的时间。<strong>大部分封面采用统一格式</strong>，也正是为了这一点，可以大大缩小制作封面的时间。</p>
<p><strong>万事开头难</strong>，一般来讲，封面的设计有迹可循，当你设计出属于自己的封面框架模板，下一步就是替换内容保存就可以了。我的封面起初设计耗费了两小时，不过后期制作就省事多了，大概30秒一张图。</p>
<ul>
<li><p>主题相关性：封面图片与文字必须紧密围绕文章核心主题，精准传达内容主旨，确保读者一眼就能洞悉文章大致方向。</p>
</li>
<li><p>视觉吸引力：运用高分辨率、色彩鲜明且构图巧妙的图片，搭配简洁有力的标题文字。文字排版错落有致，重点突出，避免繁杂堆砌。可加入独特的元素或符号，让封面具有辨识度，如为博客设计专属的标志或图案，或使用特殊的艺术字体，但字体除了那种字体资源分享，建议采用同一种字体，和网站字体也要契合。</p>
</li>
<li><p>适配性：充分考虑不同终端设备的展示效果，确保封面在电脑、平板、手机等各类屏幕上都能完整呈现，无变形或文字被遮挡的情况。</p>
</li>
<li><p>风格一致与多样性相结合：保持整个博客图文封面风格统一，无论是色调、字体，这可以培养读者的品牌认知与视觉记忆。当然，在大体统一的基础上，允许个别文章采用独特的设计，增添博客的视觉效果，不至于过于单调。偶尔穿插其他类型的封面，像代码运行的演示可以直接在封面展现。当然你也可以打造系列主题封面，根据博客内容系列设置主题，如不同分类采用不同设计，既多样又有连贯性。</p>
</li>
</ul>
<p>博客文章封面设计方式取决于博客定位、目标受众和内容特点，可选择统一风格（注重品牌建设、提供专业系统内容时更有利）、不统一风格（追求创意和多样性，吸引喜欢新鲜和个性化内容读者时更合适）或两者结合。</p>
<h2 id="五-标题的重要性"><a href="#五-标题的重要性" class="headerlink" title="五.标题的重要性"></a>五.标题的重要性</h2><p>标题是文章的 “第一印象”，需在<strong>吸引力与真实性</strong>之间找到平衡。标题不等于标题党，一定要保证真实性，不可过度夸张扯淡。</p>
<p>标题需<strong>第一时间点明文章核心</strong>，让读者快速判断是否符合需求，比如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">❌ “谈谈前端优化” → ✅ “5 个前端性能优化技巧，页面加载速度提升 50%”</span><br><span class="line">❌ “解决数据库问题” → ✅ “3 步排查 MySQL 慢查询问题，附实战案例”</span><br></pre></td></tr></table></figure>

<p>你也可以将<strong>核心关键词</strong>置于标题前三分之一的位置，兼顾搜索引擎抓取与用户阅读习惯，比如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">“Hexo 主题美化教程：Solitude 主题添加波浪动画效果”</span><br><span class="line">“FusionApp 无网加载方案：本地缓存与远程地址智能切换”</span><br></pre></td></tr></table></figure>

<p>使用 “揭秘”“必看”“干货”“避坑” 等词增强<strong>吸引</strong>力，或者通过问句设置<strong>悬念</strong>，比如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">“新手必看！5 个 Markdown 排版技巧让文章更专业”</span><br><span class="line">“避坑指南：我用 FusionApp 踩过的 3 个陷阱”</span><br><span class="line">“为什么你的技术博客没人看？这 3 个细节决定成败”</span><br><span class="line">“不用插件，如何让 Hexo 博客支持数学公式？”</span><br></pre></td></tr></table></figure>

<p>这里给大家一个<strong>黄金公式</strong>：<br><strong>黄金公式：核心关键词 + 价值承诺 + 情感驱动</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>核心关键词</th>
<th>价值承诺</th>
<th>情感驱动</th>
<th>完整标题</th>
</tr>
</thead>
<tbody><tr>
<td>技术教程</td>
<td>FusionApp无网加载</td>
<td>完整解决方案</td>
<td>实战干货</td>
<td>【实战干货】FusionApp无网加载完整解决方案（附代码）</td>
</tr>
<tr>
<td>经验分享</td>
<td>技术博客写作</td>
<td>从0到1打造个人品牌</td>
<td>新手必看</td>
<td>新手必看！技术博客写作全攻略：从0到1打造个人品牌</td>
</tr>
<tr>
<td>工具评测</td>
<td>数据库优化工具</td>
<td>性能提升30%+</td>
<td>实测推荐</td>
<td>实测推荐！5款数据库优化工具，让性能提升30%+</td>
</tr>
<tr>
<td>行业洞察</td>
<td>2025前端趋势</td>
<td>5大技术改变开发模式</td>
<td>深度解析</td>
<td>深度解析2025前端趋势：这5大技术将改变开发模式</td>
</tr>
</tbody></table>
<h2 id="六-排版要精致"><a href="#六-排版要精致" class="headerlink" title="六.排版要精致"></a>六.排版要精致</h2><p>字如其人，排版如斯。语文老师总提醒我们，你的作文内容好坏决定分数上限，字写得是否好看决定分数下限。很遗憾的是，技术平台上欣赏不到每位博主的真实书法，排版就成了很重要的替代，既体现写作基础能力的熟练度，也是<strong>个人软实力</strong>的体现，更是对受众的一种尊重。</p>
<p><strong>千字难抵一图</strong>。文字的陈述终究是略显“枯燥”的，特别是技术教程类文章，好的绘图不光能减少很多口舌描述，还能更快、更完整地帮助阅读受众理解博主的表达意图和内容。而且图文搭配也会充盈整个文章，变得更加丰富，表达力更好，对于媒体传播也会友好一些。</p>
<p>在技术写作上要保持持之以恒的兴趣和动力的确不易，<strong>不要因为暂时没有受众而沮丧</strong>，也不要因为工作忙碌时间而借口拖延，这些错误我都犯过。即使再忙也要找些内容来保持写作动作，一件事情坚持下来很不易，如果中间断开再重启会非常吃力。</p>
]]></content>
      <categories>
        <category>经验分享</category>
      </categories>
      <tags>
        <tag>经验分享</tag>
        <tag>博客运营</tag>
      </tags>
  </entry>
  <entry>
    <title>打造视觉亮点：Solitude 主题文章融入波浪效果</title>
    <url>/posts/5b9a.html</url>
    <content><![CDATA[<h2 id="一-修改header-pug"><a href="#一-修改header-pug" class="headerlink" title="一.修改header.pug"></a>一.修改header.pug</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">themes</span><br><span class="line">└── solitude</span><br><span class="line">    └── layout</span><br><span class="line">        └── includes</span><br><span class="line">            └── header.pug</span><br></pre></td></tr></table></figure>

<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- const not_cover = !(typeof page.not_cover ===&#x27;undefined&#x27; ? false : page.not_cover)</span></span><br><span class="line">header#page-header(class=is_post() &amp;&amp; not_cover ? &#x27;post-bg&#x27; : &#x27;not-top-img&#x27;)</span><br><span class="line">    include ./nav.pug</span><br><span class="line">    if is_post()</span><br><span class="line">        if !page.not_cover</span><br><span class="line">            include ./widgets/post/postMeta.pug</span><br><span class="line"><span class="addition">+           section.main-hero-waves-area.waves-area</span></span><br><span class="line"><span class="addition">+             svg.waves-svg(xmlns=&#x27;http://www.w3.org/2000/svg&#x27;, xlink=&#x27;http://www.w3.org/1999/xlink&#x27;, viewBox=&#x27;0 24 150 28&#x27;, preserveAspectRatio=&#x27;none&#x27;, shape-rendering=&#x27;auto&#x27;)</span></span><br><span class="line"><span class="addition">+               defs</span></span><br><span class="line"><span class="addition">+                 path#gentle-wave(d=&#x27;M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z&#x27;)</span></span><br><span class="line"><span class="addition">+               g.parallax</span></span><br><span class="line"><span class="addition">+                 use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;0&#x27;)</span></span><br><span class="line"><span class="addition">+                 use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;3&#x27;)</span></span><br><span class="line"><span class="addition">+                 use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;5&#x27;)</span></span><br><span class="line"><span class="addition">+                 use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;7&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>可以看出，其实就是<strong>在最后添加</strong>了以下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">section.main-hero-waves-area.waves-area</span><br><span class="line">  svg.waves-svg(xmlns=&#x27;http://www.w3.org/2000/svg&#x27;, xlink=&#x27;http://www.w3.org/1999/xlink&#x27;, viewBox=&#x27;0 24 150 28&#x27;, preserveAspectRatio=&#x27;none&#x27;, shape-rendering=&#x27;auto&#x27;)</span><br><span class="line">    defs</span><br><span class="line">      path#gentle-wave(d=&#x27;M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z&#x27;)</span><br><span class="line">    g.parallax</span><br><span class="line">      use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;0&#x27;)</span><br><span class="line">      use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;3&#x27;)</span><br><span class="line">      use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;5&#x27;)</span><br><span class="line">      use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;7&#x27;)</span><br></pre></td></tr></table></figure>
<p>值得注意的是，Pug 是一种依赖缩进来表示代码块结构的模板语言，复制粘贴的时候一定要按以上格式<strong>保证缩进正确</strong>。</p>
<h2 id="二-注册样式文件"><a href="#二-注册样式文件" class="headerlink" title="二.注册样式文件"></a>二.注册样式文件</h2><p>然后 将以下CSS样式复制进你新建的<strong>css文件</strong>，例如在博客根目录\source\css\baiyi.css。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">博客根目录/</span><br><span class="line">├── source/</span><br><span class="line">│   └── css/</span><br><span class="line">│       └── baiyi.css</span><br><span class="line">├── themes/</span><br><span class="line">├── _config.yml</span><br><span class="line">└── ...</span><br></pre></td></tr></table></figure>

<p>建议把自定义的资源文件放到<strong>博客根目录的source文件夹</strong>。这样做的好处是，无论你更换什么主题，这些资源文件都能被正确引用，不会受到主题的影响。而且Hexo会默认处理 source 文件夹下的内容，不需要额外的配置。所以，你可以把 baiyi.css 文件放到<strong>source&#x2F;css</strong>文件夹，然后在主题的配置文件里使用 <code>&lt;link rel=&quot;stylesheet&quot; href=&quot;/css/baiyi.css&quot;&gt; </code>来引用它。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 波浪css */</span></span><br><span class="line"><span class="selector-class">.main-hero-waves-area</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">11px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.waves-area</span> <span class="selector-class">.waves-svg</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* Animation */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: move-forever <span class="number">25s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.55</span>, <span class="number">0.5</span>, <span class="number">0.45</span>, <span class="number">0.5</span>) infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">2s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">7s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#f7f9febd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">10s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#f7f9fe82</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">4s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">13s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#f7f9fe36</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">5s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">20s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#f7f9fe</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 黑色模式背景 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">2s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">7s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#18171dc8</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">10s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#18171d80</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">4s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">13s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#18171d3e</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">5s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">20s</span>;</span><br><span class="line">  <span class="attribute">fill</span>: <span class="number">#18171d</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> move-forever &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(-<span class="number">90px</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">85px</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*Shrinking for mobile*/</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.waves-area</span> <span class="selector-class">.waves-svg</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">40px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="三-额外可选配置"><a href="#三-额外可选配置" class="headerlink" title="三.额外可选配置"></a>三.额外可选配置</h2><p>如果你想要<strong>仅在电脑端显示，而手机端不显示</strong>，你可以使用媒体查询，也就是用以下样式：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 仅在屏幕宽度大于 768px 时应用以下样式 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">769px</span>) &#123;</span><br><span class="line">  <span class="comment">/* 波浪css */</span></span><br><span class="line">  <span class="selector-class">.main-hero-waves-area</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: -<span class="number">11px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">5</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.waves-area</span> <span class="selector-class">.waves-svg</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">5rem</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* Animation */</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: move-forever <span class="number">25s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.55</span>, <span class="number">0.5</span>, <span class="number">0.45</span>, <span class="number">0.5</span>) infinite;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="attribute">animation-delay</span>: -<span class="number">2s</span>;</span><br><span class="line">    <span class="attribute">animation-duration</span>: <span class="number">7s</span>;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#f7f9febd</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">    <span class="attribute">animation-delay</span>: -<span class="number">3s</span>;</span><br><span class="line">    <span class="attribute">animation-duration</span>: <span class="number">10s</span>;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#f7f9fe82</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">    <span class="attribute">animation-delay</span>: -<span class="number">4s</span>;</span><br><span class="line">    <span class="attribute">animation-duration</span>: <span class="number">13s</span>;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#f7f9fe36</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>) &#123;</span><br><span class="line">    <span class="attribute">animation-delay</span>: -<span class="number">5s</span>;</span><br><span class="line">    <span class="attribute">animation-duration</span>: <span class="number">20s</span>;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#f7f9fe</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* 黑色模式背景 */</span></span><br><span class="line">  <span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="attribute">animation-delay</span>: -<span class="number">2s</span>;</span><br><span class="line">    <span class="attribute">animation-duration</span>: <span class="number">7s</span>;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#18171dc8</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">    <span class="attribute">animation-delay</span>: -<span class="number">3s</span>;</span><br><span class="line">    <span class="attribute">animation-duration</span>: <span class="number">10s</span>;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#18171d80</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">    <span class="attribute">animation-delay</span>: -<span class="number">4s</span>;</span><br><span class="line">    <span class="attribute">animation-duration</span>: <span class="number">13s</span>;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#18171d3e</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; <span class="selector-tag">use</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>) &#123;</span><br><span class="line">    <span class="attribute">animation-delay</span>: -<span class="number">5s</span>;</span><br><span class="line">    <span class="attribute">animation-duration</span>: <span class="number">20s</span>;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#18171d</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">@keyframes</span> move-forever &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(-<span class="number">90px</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">85px</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/*Shrinking for mobile*/</span></span><br><span class="line">  <span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.waves-area</span> <span class="selector-class">.waves-svg</span> &#123;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">      <span class="attribute">min-height</span>: <span class="number">40px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="四-引入样式文件"><a href="#四-引入样式文件" class="headerlink" title="四.引入样式文件"></a>四.引入样式文件</h2><p>最后一步，在主题的<b>_config.yml</b>文件中引入css文件</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># --------------------------- start ---------------------------</span></span><br><span class="line"><span class="comment"># Extend</span></span><br><span class="line"><span class="comment"># 扩展</span></span><br><span class="line"><span class="attr">extends:</span></span><br><span class="line">  <span class="comment"># Insert in head</span></span><br><span class="line">  <span class="comment"># 插入到 head</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">  <span class="comment"># 自定义css</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/baiyi.css&quot;&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment"># Insert in body</span></span><br><span class="line">  <span class="comment"># 插入到 body</span></span><br><span class="line">  <span class="attr">body:</span></span><br><span class="line">  <span class="comment">#  - &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/pace/1.2.4/pace.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment"># --------------------------- end ---------------------------</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>主题美化</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>CSS</tag>
        <tag>主题美化</tag>
        <tag>solitude</tag>
      </tags>
  </entry>
  <entry>
    <title>给你的博客新增精美的情侣纪念日页面</title>
    <url>/posts/4aa52aa9.html</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>折腾一下午手搓出来的，拿走吱一声。<strong>喜欢的话在下面演示地址留个走心的祝福吧~</strong></p>
<div class="tab-item-content active" id="link-3">
    <a class="tag-link" href="https://baiyi.ink/love/" target="_blank">
        <div class="tag-link-tips">
            演示地址
        </div>
        <div class="tag-link-bottom">
            <div class="tag-link-left">
                <i class="solitude fas fa-heart"></i>
            </div>
            <div class="tag-link-right">
                <div class="tag-link-title">
                    情侣空间
                </div>
                <div class="tag-link-sitename">
                    本站同款情侣纪念日
                </div>
            </div>
            <i class="solitude fas fa-chevron-right"></i>
        </div>
    </a>
</div>

<h2 id="一-CSS样式"><a href="#一-CSS样式" class="headerlink" title="一.CSS样式"></a>一.CSS样式</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.bg-wrap</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bg-img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.middle</span><span class="selector-class">.Blurkg</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.img-male</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatarArea</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">120px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatarFrame</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.aiv_touxiang</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">object-fit</span>: cover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.shadow-blur</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">28px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.93</span>);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1px</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">text-shadow</span>: none;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.42</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> heartbeat &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.love-icon</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">animation</span>: heartbeat <span class="number">1.5s</span> ease-in-out infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.img-female</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.baiyi-love</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.baiyi-text</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">25px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#time-display</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#time-display</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">25px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#time-display</span> n &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.row</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">gap</span>: <span class="number">10px</span>; <span class="comment">/* 减小卡片之间的间距 */</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>; <span class="comment">/* 减小整体的内边距 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.time_card</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">50%</span> - <span class="number">10px</span>); <span class="comment">/* 根据新的间距调整宽度 */</span></span><br><span class="line">    <span class="attribute">min-width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.time_card</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.05</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left_info</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left_info</span> <span class="selector-tag">svg</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#ff6b6b</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.day_title</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.2rem</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.time_m</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.source</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.format</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 767px 以下媒体查询 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">767px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.middle</span><span class="selector-class">.Blurkg</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.avatarArea</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">90px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">90px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.shadow-blur</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.love-icon</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>: -<span class="number">10px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.row</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">8px</span>;</span><br><span class="line">        <span class="attribute">gap</span>: <span class="number">8px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.time_card</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">15px</span>;</span><br><span class="line">        <span class="attribute">min-width</span>: <span class="number">130px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">50%</span> - <span class="number">8px</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.left_info</span> <span class="selector-tag">svg</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.day_title</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">0.8rem</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.time_m</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">0.7rem</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.baiyi-text</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#time-display</span> n &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 360 - 380px 媒体查询 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width</span>: <span class="number">360px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">380px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.middle</span><span class="selector-class">.Blurkg</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">7px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.avatarArea</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">68px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">68px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.shadow-blur</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">9px</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">1px</span> <span class="number">9px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">17px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.love-icon</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">38px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">38px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.row</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">        <span class="attribute">gap</span>: <span class="number">4px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.time_card</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">11px</span>;</span><br><span class="line">        <span class="attribute">min-width</span>: <span class="number">122px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">50%</span> - <span class="number">4px</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.left_info</span> <span class="selector-tag">svg</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">15px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">15px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.day_title</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">0.68rem</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.time_m</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">0.58rem</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.baiyi-text</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#time-display</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#time-display</span> n &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">19px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#time-display</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">19px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 360px 左右媒体查询 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">360px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.middle</span><span class="selector-class">.Blurkg</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">8px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.avatarArea</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">70px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">70px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.shadow-blur</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">10px</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">1px</span> <span class="number">10px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.love-icon</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">40px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.row</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">6px</span>;</span><br><span class="line">        <span class="attribute">gap</span>: <span class="number">6px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.time_card</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">12px</span>;</span><br><span class="line">        <span class="attribute">min-width</span>: <span class="number">125px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">50%</span> - <span class="number">6px</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.left_info</span> <span class="selector-tag">svg</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">16px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">16px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.day_title</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">0.7rem</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.time_m</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">0.6rem</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.baiyi-text</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#time-display</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#time-display</span> n &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#time-display</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 348px 左右媒体查询 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">348px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.middle</span><span class="selector-class">.Blurkg</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">6px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.avatarArea</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">65px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">65px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.shadow-blur</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">9px</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">1px</span> <span class="number">9px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">18px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.love-icon</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">35px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">35px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.row</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">6px</span>;</span><br><span class="line">        <span class="attribute">gap</span>: <span class="number">6px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.time_card</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">        <span class="attribute">min-width</span>: <span class="number">120px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">50%</span> - <span class="number">6px</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.left_info</span> <span class="selector-tag">svg</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">14px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">14px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.day_title</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">0.65rem</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.time_m</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">0.55rem</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.baiyi-text</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#time-display</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#time-display</span> n &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#time-display</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 320px 及以下媒体查询 */</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">320px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.middle</span><span class="selector-class">.Blurkg</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.avatarArea</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.shadow-blur</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">8px</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">1px</span> <span class="number">8px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.love-icon</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.row</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">        <span class="attribute">gap</span>: <span class="number">5px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.time_card</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">8px</span>;</span><br><span class="line">        <span class="attribute">min-width</span>: <span class="number">110px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">50%</span> - <span class="number">5px</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.left_info</span> <span class="selector-tag">svg</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">12px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">12px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.day_title</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">0.6rem</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.time_m</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">0.5rem</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.baiyi-text</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#time-display</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#time-display</span> n &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-id">#time-display</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="二-HTML结构"><a href="#二-HTML结构" class="headerlink" title="二.HTML结构"></a>二.HTML结构</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bg-wrap central limg&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bg-img&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;middle Blurkg&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;img-male&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;avatarArea&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">draggable</span>=<span class="string">&quot;false&quot;</span><span class="attr">class</span>=<span class="string">&quot;avatarFrame lazy entered loaded&quot;</span><span class="attr">data-src</span>=<span class="string">&quot;/img/sucai/头像挂件.png&quot;</span><span class="attr">style</span>=<span class="string">&quot;transform: scale(1.6);top: 2px;left: 2px;&quot;</span><span class="attr">data-ll-status</span>=<span class="string">&quot;loaded&quot;</span><span class="attr">src</span>=<span class="string">&quot;/img/sucai/头像挂件.png&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;aiv_touxiang entered loaded&quot;</span><span class="attr">src</span>=<span class="string">&quot;http://q2.qlogo.cn/headimg_dl?dst_uin=2766521276<span class="symbol">&amp;amp;</span>spec=640&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;shadow-blur&quot;</span>&gt;</span>Qiu.<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;love-icon&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">draggable</span>=<span class="string">&quot;false&quot;</span><span class="attr">src</span>=<span class="string">&quot;/img/sucai/like.svg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;img-female&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;avatarArea&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">draggable</span>=<span class="string">&quot;false&quot;</span><span class="attr">class</span>=<span class="string">&quot;avatarFrame lazy entered loaded&quot;</span><span class="attr">data-src</span>=<span class="string">&quot;/img/sucai/头像挂件.png&quot;</span><span class="attr">style</span>=<span class="string">&quot;transform: scale(1.6);top: 2px;left: 2px;&quot;</span><span class="attr">data-ll-status</span>=<span class="string">&quot;loaded&quot;</span><span class="attr">src</span>=<span class="string">&quot;/img/sucai/头像挂件.png&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;aiv_touxiang entered loaded&quot;</span><span class="attr">src</span>=<span class="string">&quot;http://q2.qlogo.cn/headimg_dl?dst_uin=1986315605<span class="symbol">&amp;amp;</span>spec=640&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;shadow-blur&quot;</span>&gt;</span>Liang<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;baiyi-love&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;baiyi-text&quot;</span>&gt;</span>这是我们一起走过的<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;time-display&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row central&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_card col-lg-6 col-md-6 col-sm-12 col-sm-x-12 shadow-blur aos-init aos-animate&quot;</span><span class="attr">aos</span>=<span class="string">&quot;flip-up&quot;</span><span class="attr">aos-duration</span>=<span class="string">&quot;500&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;day_cont&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left_info&quot;</span><span class="attr">data-title</span>=<span class="string">&quot;周年纪念日&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">svg</span> <span class="attr">t</span>=<span class="string">&quot;1715052607396&quot;</span><span class="attr">style</span>=<span class="string">&quot;margin-right:0.5rem!important;&quot;</span><span class="attr">class</span>=<span class="string">&quot;icon&quot;</span><span class="attr">viewBox</span>=<span class="string">&quot;0 0 1024 1024&quot;</span><span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span><span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span><span class="attr">p-id</span>=<span class="string">&quot;9366&quot;</span><span class="attr">width</span>=<span class="string">&quot;100&quot;</span><span class="attr">height</span>=<span class="string">&quot;100&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M810 249.5c-38.6-38.6-83.5-68.8-133.5-90-51.8-21.9-106.8-33-163.5-33s-111.7 11.1-163.5 33c-50 21.2-94.9 51.4-133.5 90-38.6 38.6-68.8 83.5-90 133.5-21.9 51.8-33 106.8-33 163.5s11.1 111.7 33 163.5c21.2 50 51.4 94.9 90 133.5s83.5 68.8 133.5 90c51.8 21.9 106.8 33 163.5 33s111.7-11.1 163.5-33c50-21.2 94.9-51.4 133.5-90S878.8 760 900 710c21.9-51.8 33-106.8 33-163.5S921.9 434.8 900 383c-21.2-50-51.5-94.9-90-133.5z m-297 657c-198.5 0-360-161.5-360-360s161.5-360 360-360 360 161.5 360 360-161.5 360-360 360zM357 96.5c-42.3-49.6-141-53.3-208.1 4s-77.3 153.9-35 203.5L357 96.5zM877.2 100.5C810 43.2 711.3 47 669 96.5L912.2 304c42.3-49.6 32.1-146.2-35-203.5z&quot;</span><span class="attr">p-id</span>=<span class="string">&quot;9367&quot;</span><span class="attr">fill</span>=<span class="string">&quot;#ffffff&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M667.1 558.6H543V351c0-17.9-14.5-32.4-32.4-32.4-15.2 0-27.6 12.3-27.6 27.6v272.4h182.2c17.1 0 30.9-13.8 30.9-30.9 0-16.1-13-29.1-29-29.1z&quot;</span><span class="attr">p-id</span>=<span class="string">&quot;9368&quot;</span><span class="attr">fill</span>=<span class="string">&quot;#ffffff&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;day_title&quot;</span><span class="attr">id</span>=<span class="string">&quot;anniversaryTitle&quot;</span>&gt;</span>周年纪念日<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_m&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">b</span> <span class="attr">class</span>=<span class="string">&quot;source&quot;</span><span class="attr">id</span>=<span class="string">&quot;anniversaryDate&quot;</span>&gt;</span>2024-08-19<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;format&quot;</span><span class="attr">id</span>=<span class="string">&quot;countdownDisplay&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_card col-lg-6 col-md-6 col-sm-12 col-sm-x-12 shadow-blur aos-init aos-animate&quot;</span><span class="attr">aos</span>=<span class="string">&quot;flip-up&quot;</span><span class="attr">aos-duration</span>=<span class="string">&quot;500&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;day_cont&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left_info&quot;</span><span class="attr">data-title</span>=<span class="string">&quot;第一次相遇&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">svg</span> <span class="attr">t</span>=<span class="string">&quot;1715052082901&quot;</span><span class="attr">style</span>=<span class="string">&quot;margin-right:0.5rem!important;&quot;</span><span class="attr">class</span>=<span class="string">&quot;icon&quot;</span><span class="attr">viewBox</span>=<span class="string">&quot;0 0 1024 1024&quot;</span><span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span><span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span><span class="attr">p-id</span>=<span class="string">&quot;4508&quot;</span><span class="attr">width</span>=<span class="string">&quot;100&quot;</span><span class="attr">height</span>=<span class="string">&quot;100&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M470.4 204.8l44.8 44.8 44.8-44.8c99.2-99.2 262.4-99.2 361.6 0 48 48 73.6 112 73.6 179.2 0 19.2-12.8 32-32 32s-32-12.8-32-32c0-51.2-19.2-99.2-57.6-134.4-73.6-73.6-195.2-73.6-272 0l-67.2 67.2c-12.8 12.8-32 12.8-44.8 0l-67.2-67.2c-73.6-73.6-195.2-73.6-272 0-73.6 73.6-73.6 195.2 0 272L512 883.2c12.8 12.8 12.8 32 0 44.8s-32 12.8-44.8 0L105.6 566.4c-99.2-99.2-99.2-262.4 0-361.6 102.4-102.4 262.4-102.4 364.8 0z m176 710.4L425.6 694.4c-57.6-57.6-57.6-147.2 0-204.8 57.6-57.6 147.2-57.6 204.8 0l57.6 57.6 57.6-57.6c57.6-57.6 147.2-57.6 204.8 0 57.6 57.6 57.6 147.2 0 204.8L729.6 915.2c-9.6 9.6-25.6 16-38.4 16-19.2 0-32-6.4-44.8-16z m256-265.6c32-32 32-83.2 0-112-32-32-83.2-32-112 0l-80 80c-12.8 12.8-32 12.8-44.8 0l-80-80c-32-32-83.2-32-112 0-32 32-32 83.2 0 112L688 864l214.4-214.4z&quot;</span><span class="attr">p-id</span>=<span class="string">&quot;4509&quot;</span><span class="attr">fill</span>=<span class="string">&quot;#ffffff&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;day_title&quot;</span><span class="attr">id</span>=<span class="string">&quot;firstMeetTitle&quot;</span>&gt;</span>相遇的那天<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_m&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">b</span> <span class="attr">class</span>=<span class="string">&quot;source&quot;</span><span class="attr">id</span>=<span class="string">&quot;firstMeetDate&quot;</span>&gt;</span>2024-06-30<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;format&quot;</span><span class="attr">id</span>=<span class="string">&quot;firstMeetCountdown&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row central&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_card col-lg-6 col-md-6 col-sm-12 col-sm-x-12 shadow-blur aos-init aos-animate&quot;</span> <span class="attr">aos</span>=<span class="string">&quot;flip-up&quot;</span> <span class="attr">aos-duration</span>=<span class="string">&quot;500&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;day_cont&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left_info&quot;</span> <span class="attr">data-title</span>=<span class="string">&quot;邱总的生日&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">svg</span> <span class="attr">t</span>=<span class="string">&quot;1715052082901&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-right:0.5rem!important;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 1024 1024&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">p-id</span>=<span class="string">&quot;4508&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M470.4 204.8l44.8 44.8 44.8-44.8c99.2-99.2 262.4-99.2 361.6 0 48 48 73.6 112 73.6 179.2 0 19.2-12.8 32-32 32s-32-12.8-32-32c0-51.2-19.2-99.2-57.6-134.4-73.6-73.6-195.2-73.6-272 0l-67.2 67.2c-12.8 12.8-32 12.8-44.8 0l-67.2-67.2c-73.6-73.6-195.2-73.6-272 0-73.6 73.6-73.6 195.2 0 272L512 883.2c12.8 12.8 12.8 32 0 44.8s-32 12.8-44.8 0L105.6 566.4c-99.2-99.2-99.2-262.4 0-361.6 102.4-102.4 262.4-102.4 364.8 0z m176 710.4L425.6 694.4c-57.6-57.6-57.6-147.2 0-204.8 57.6-57.6 147.2-57.6 204.8 0l57.6 57.6 57.6-57.6c57.6-57.6 147.2-57.6 204.8 0 57.6 57.6 57.6 147.2 0 204.8L729.6 915.2c-9.6 9.6-25.6 16-38.4 16-19.2 0-32-6.4-44.8-16z m256-265.6c32-32 32-83.2 0-112-32-32-83.2-32-112 0l-80 80c-12.8 12.8-32 12.8-44.8 0l-80-80c-32-32-83.2-32-112 0-32 32-32 83.2 0 112L688 864l214.4-214.4z&quot;</span> <span class="attr">p-id</span>=<span class="string">&quot;4509&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;#ffffff&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;day_title&quot;</span>&gt;</span>邱总的生日<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_m&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">b</span> <span class="attr">class</span>=<span class="string">&quot;source&quot;</span>&gt;</span>2004-01-15<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;format&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                          </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_card col-lg-6 col-md-6 col-sm-12 col-sm-x-12 shadow-blur aos-init aos-animate&quot;</span><span class="attr">aos</span>=<span class="string">&quot;flip-up&quot;</span><span class="attr">aos-duration</span>=<span class="string">&quot;500&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;day_cont&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left_info&quot;</span><span class="attr">data-title</span>=<span class="string">&quot;妍妍的生日&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">svg</span> <span class="attr">t</span>=<span class="string">&quot;1715052082901&quot;</span><span class="attr">style</span>=<span class="string">&quot;margin-right:0.5rem!important;&quot;</span><span class="attr">class</span>=<span class="string">&quot;icon&quot;</span><span class="attr">viewBox</span>=<span class="string">&quot;0 0 1024 1024&quot;</span><span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span><span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span><span class="attr">p-id</span>=<span class="string">&quot;4508&quot;</span><span class="attr">width</span>=<span class="string">&quot;100&quot;</span><span class="attr">height</span>=<span class="string">&quot;100&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M470.4 204.8l44.8 44.8 44.8-44.8c99.2-99.2 262.4-99.2 361.6 0 48 48 73.6 112 73.6 179.2 0 19.2-12.8 32-32 32s-32-12.8-32-32c0-51.2-19.2-99.2-57.6-134.4-73.6-73.6-195.2-73.6-272 0l-67.2 67.2c-12.8 12.8-32 12.8-44.8 0l-67.2-67.2c-73.6-73.6-195.2-73.6-272 0-73.6 73.6-73.6 195.2 0 272L512 883.2c12.8 12.8 12.8 32 0 44.8s-32 12.8-44.8 0L105.6 566.4c-99.2-99.2-99.2-262.4 0-361.6 102.4-102.4 262.4-102.4 364.8 0z m176 710.4L425.6 694.4c-57.6-57.6-57.6-147.2 0-204.8 57.6-57.6 147.2-57.6 204.8 0l57.6 57.6 57.6-57.6c57.6-57.6 147.2-57.6 204.8 0 57.6 57.6 57.6 147.2 0 204.8L729.6 915.2c-9.6 9.6-25.6 16-38.4 16-19.2 0-32-6.4-44.8-16z m256-265.6c32-32 32-83.2 0-112-32-32-83.2-32-112 0l-80 80c-12.8 12.8-32 12.8-44.8 0l-80-80c-32-32-83.2-32-112 0-32 32-32 83.2 0 112L688 864l214.4-214.4z&quot;</span><span class="attr">p-id</span>=<span class="string">&quot;4509&quot;</span><span class="attr">fill</span>=<span class="string">&quot;#ffffff&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;day_title&quot;</span>&gt;</span>妍妍的生日<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_m&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">b</span> <span class="attr">class</span>=<span class="string">&quot;source&quot;</span>&gt;</span>1999-10-04<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;format&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="三-JavaScript核心"><a href="#三-JavaScript核心" class="headerlink" title="三.JavaScript核心"></a>三.JavaScript核心</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Author：白衣</span></span><br><span class="line"><span class="comment">// 将日期字符串转换为ISO 8601格式</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">formatToISO8601</span>(<span class="params">dateStr</span>) &#123;</span><br><span class="line">	<span class="keyword">var</span> parts = dateStr.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">	<span class="keyword">var</span> dateParts = parts[<span class="number">0</span>].<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>);</span><br><span class="line">	<span class="keyword">var</span> timeParts = parts[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&#x27;:&#x27;</span>);</span><br><span class="line">	<span class="keyword">return</span> dateParts[<span class="number">0</span>] + <span class="string">&#x27;-&#x27;</span> + (dateParts[<span class="number">1</span>].<span class="property">length</span> === <span class="number">1</span> ? <span class="string">&#x27;0&#x27;</span> : <span class="string">&#x27;&#x27;</span>) + dateParts[<span class="number">1</span>] + <span class="string">&#x27;-&#x27;</span> + (dateParts[<span class="number">2</span>].<span class="property">length</span> === <span class="number">1</span> ? <span class="string">&#x27;0&#x27;</span> : <span class="string">&#x27;&#x27;</span>) + dateParts[<span class="number">2</span>] + <span class="string">&#x27;T&#x27;</span> + timeParts[<span class="number">0</span>] + <span class="string">&#x27;:&#x27;</span> + timeParts[<span class="number">1</span>] + <span class="string">&#x27;:&#x27;</span> + timeParts[<span class="number">2</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置起始时间</span></span><br><span class="line"><span class="keyword">var</span> startDateStr = <span class="string">&#x27;2024-8-19 21:34:00&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> startDate = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="title function_">formatToISO8601</span>(startDateStr));</span><br><span class="line"><span class="comment">// 获取时间显示元素</span></span><br><span class="line"><span class="keyword">var</span> timeDisplay = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;time-display&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新时间显示的函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateTime</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">// 获取当前时间</span></span><br><span class="line">	<span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">	<span class="comment">// 计算时间差</span></span><br><span class="line">	<span class="keyword">var</span> timeDiff = now - startDate;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 计算天数、小时、分钟和秒</span></span><br><span class="line">	<span class="keyword">var</span> days = <span class="title class_">Math</span>.<span class="title function_">floor</span>(timeDiff / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>));</span><br><span class="line">	<span class="keyword">var</span> hours = <span class="title class_">Math</span>.<span class="title function_">floor</span>((timeDiff % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>)) / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>));</span><br><span class="line">	<span class="keyword">var</span> minutes = <span class="title class_">Math</span>.<span class="title function_">floor</span>((timeDiff % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)) / (<span class="number">1000</span> * <span class="number">60</span>));</span><br><span class="line">	<span class="keyword">var</span> seconds = <span class="title class_">Math</span>.<span class="title function_">floor</span>((timeDiff % (<span class="number">1000</span> * <span class="number">60</span>)) / <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 格式化时间显示</span></span><br><span class="line">	timeDisplay.<span class="property">innerHTML</span> = <span class="string">`&lt;n class=&quot;num&quot;&gt;<span class="subst">$&#123;days&#125;</span>&lt;/n&gt;&lt;span class=&quot;chinese&quot;&gt;天 &lt;/span&gt;`</span> +</span><br><span class="line">		<span class="string">`&lt;n class=&quot;num&quot;&gt;<span class="subst">$&#123;(<span class="string">&#x27;0&#x27;</span> + hours).slice(-<span class="number">2</span>)&#125;</span>&lt;/n&gt;&lt;span class=&quot;chinese&quot;&gt;时 &lt;/span&gt;`</span> +</span><br><span class="line">		<span class="string">`&lt;n class=&quot;num&quot;&gt;<span class="subst">$&#123;(<span class="string">&#x27;0&#x27;</span> + minutes).slice(-<span class="number">2</span>)&#125;</span>&lt;/n&gt;&lt;span class=&quot;chinese&quot;&gt;分 &lt;/span&gt;`</span> +</span><br><span class="line">		<span class="string">`&lt;n class=&quot;num&quot;&gt;<span class="subst">$&#123;(<span class="string">&#x27;0&#x27;</span> + seconds).slice(-<span class="number">2</span>)&#125;</span>&lt;/n&gt;&lt;span class=&quot;chinese&quot;&gt;秒&lt;/span&gt;`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始调用更新时间函数</span></span><br><span class="line"><span class="title function_">updateTime</span>();</span><br><span class="line"><span class="comment">// 每隔1秒调用一次更新时间函数</span></span><br><span class="line"><span class="built_in">setInterval</span>(updateTime, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 周年纪念日</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> anniversaryDateElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;anniversaryDate&#x27;</span>);</span><br><span class="line">	<span class="keyword">const</span> countdownElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;countdownDisplay&#x27;</span>);</span><br><span class="line">	<span class="keyword">if</span> (anniversaryDateElement) &#123;</span><br><span class="line">		<span class="keyword">const</span> anniversaryStr = anniversaryDateElement.<span class="property">textContent</span>;</span><br><span class="line">		<span class="keyword">const</span> [year, month, day] = anniversaryStr.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>).<span class="title function_">map</span>(<span class="title class_">Number</span>);</span><br><span class="line">		<span class="keyword">const</span> nextAnniversary = <span class="keyword">new</span> <span class="title class_">Date</span>(year + <span class="number">1</span>, month - <span class="number">1</span>, day);</span><br><span class="line">		<span class="keyword">const</span> currentDate = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">		<span class="keyword">const</span> timeDiff = nextAnniversary - currentDate;</span><br><span class="line">		<span class="keyword">const</span> daysDiff = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(timeDiff / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>));</span><br><span class="line">		countdownElement.<span class="property">textContent</span> = <span class="string">`还有 <span class="subst">$&#123;daysDiff&#125;</span> 天`</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 我们相遇的那天</span></span><br><span class="line"><span class="comment">//location.toString().indexOf(&quot;baiyi&quot;) &lt;= -1? document.location.href = &quot;.&quot; : null;</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> firstMeetDateElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;firstMeetDate&#x27;</span>);</span><br><span class="line">	<span class="keyword">const</span> countdownElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;firstMeetCountdown&#x27;</span>);</span><br><span class="line">	<span class="keyword">if</span> (firstMeetDateElement) &#123;</span><br><span class="line">		<span class="keyword">const</span> meetDateStr = firstMeetDateElement.<span class="property">textContent</span>;</span><br><span class="line">		<span class="keyword">const</span> [year, month, day] = meetDateStr.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>).<span class="title function_">map</span>(<span class="title class_">Number</span>);</span><br><span class="line">		<span class="keyword">const</span> meetDate = <span class="keyword">new</span> <span class="title class_">Date</span>(year, month - <span class="number">1</span>, day);</span><br><span class="line">		<span class="keyword">const</span> currentDate = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">		<span class="keyword">const</span> timeDiff = currentDate - meetDate;</span><br><span class="line">		<span class="keyword">const</span> daysDiff = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(timeDiff / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>));</span><br><span class="line">		countdownElement.<span class="property">textContent</span> = <span class="string">`过了 <span class="subst">$&#123;daysDiff&#125;</span> 天`</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取所有生日日期元素</span></span><br><span class="line">        <span class="keyword">const</span> birthdayElements = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.source&#x27;</span>);</span><br><span class="line">        <span class="comment">// 获取所有显示倒计时的元素</span></span><br><span class="line">        <span class="keyword">const</span> countdownElements = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.format&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 遍历每个生日日期元素</span></span><br><span class="line">        birthdayElements.<span class="title function_">forEach</span>(<span class="function">(<span class="params">element, index</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 获取生日日期字符串</span></span><br><span class="line">            <span class="keyword">const</span> birthdayStr = element.<span class="property">textContent</span>;</span><br><span class="line">            <span class="comment">// 将生日日期字符串分割成年、月、日</span></span><br><span class="line">            <span class="keyword">const</span> [birthYear, birthMonth, birthDay] = birthdayStr.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>).<span class="title function_">map</span>(<span class="title class_">Number</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取当前日期</span></span><br><span class="line">            <span class="keyword">const</span> currentDate = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">            <span class="keyword">const</span> currentYear = currentDate.<span class="title function_">getFullYear</span>();</span><br><span class="line">            <span class="keyword">const</span> currentMonth = currentDate.<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">const</span> currentDay = currentDate.<span class="title function_">getDate</span>();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 计算今年的生日日期</span></span><br><span class="line">            <span class="keyword">let</span> thisYearBirthday = <span class="keyword">new</span> <span class="title class_">Date</span>(currentYear, birthMonth - <span class="number">1</span>, birthDay);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 如果今年的生日已经过了，计算下一年的生日日期</span></span><br><span class="line">            <span class="keyword">if</span> (thisYearBirthday &lt; currentDate) &#123;</span><br><span class="line">                thisYearBirthday = <span class="keyword">new</span> <span class="title class_">Date</span>(currentYear + <span class="number">1</span>, birthMonth - <span class="number">1</span>, birthDay);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 计算两个日期之间的时间差（毫秒）</span></span><br><span class="line">            <span class="keyword">const</span> timeDiff = thisYearBirthday - currentDate;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 将时间差转换为天数</span></span><br><span class="line">            <span class="keyword">const</span> daysDiff = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(timeDiff / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>));</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 显示倒计时信息</span></span><br><span class="line">            countdownElements[index].<span class="property">textContent</span> = <span class="string">`还有<span class="subst">$&#123;daysDiff&#125;</span>天`</span>;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="四-修改相关指引"><a href="#四-修改相关指引" class="headerlink" title="四.修改相关指引"></a>四.修改相关指引</h2><ul>
<li><strong>头像修改</strong></li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;aiv_touxiang entered loaded&quot;</span><span class="attr">src</span>=<span class="string">&quot;http://q2.qlogo.cn/headimg_dl?dst_uin=你的QQ号<span class="symbol">&amp;amp;</span>spec=640&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>纪念日修改</strong></li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">b</span> <span class="attr">class</span>=<span class="string">&quot;source&quot;</span>&gt;</span>2004-01-15<span class="tag">&lt;/<span class="name">b</span>&gt;</span> <span class="comment">&lt;!--直接改日期即可--&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>一起走过的多少天修改</strong></li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// Author：白衣</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 将日期字符串转换为ISO 8601格式</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">formatToISO8601</span>(<span class="params">dateStr</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">var</span> parts = dateStr.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">var</span> dateParts = parts[<span class="number">0</span>].<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">var</span> timeParts = parts[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&#x27;:&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">return</span> dateParts[<span class="number">0</span>] + <span class="string">&#x27;-&#x27;</span> + (dateParts[<span class="number">1</span>].<span class="property">length</span> === <span class="number">1</span> ? <span class="string">&#x27;0&#x27;</span> : <span class="string">&#x27;&#x27;</span>) + dateParts[<span class="number">1</span>] + <span class="string">&#x27;-&#x27;</span> + (dateParts[<span class="number">2</span>].<span class="property">length</span> === <span class="number">1</span> ? <span class="string">&#x27;0&#x27;</span> : <span class="string">&#x27;&#x27;</span>) + dateParts[<span class="number">2</span>] + <span class="string">&#x27;T&#x27;</span> + timeParts[<span class="number">0</span>] + <span class="string">&#x27;:&#x27;</span> + timeParts[<span class="number">1</span>] + <span class="string">&#x27;:&#x27;</span> + timeParts[<span class="number">2</span>];</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 设置起始时间</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> startDateStr = <span class="string">&#x27;2024-8-19 21:34:00&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 这里改成你们在一起的时间</span></span></span><br><span class="line"><span class="language-javascript">.</span></span><br><span class="line"><span class="language-javascript">.</span></span><br><span class="line"><span class="language-javascript">.</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="五-Hexo主题"><a href="#五-Hexo主题" class="headerlink" title="五.Hexo主题"></a>五.Hexo主题</h2><ul>
<li><strong>新建页面</strong></li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo new page &quot;love&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>修改index.md</strong></li>
</ul>
<p>把HTML部分复制进去，CSS、JS带标签插入头部和尾部，你也可以引入，随便你。我推荐直接内置<strong>插入</strong>md文件</p>
<p>下面是内置好了的，复制全部直接<strong>插入</strong>你的index.md就行了，记得修改相关信息</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 情侣空间</span><br><span class="line">date: 2025-03-07 13:08:54</span><br><span class="line">type: love</span><br><span class="line">desc: 情侣纪念日</span><br><span class="line"><span class="section">description: 小手一牵，岁岁年年</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line">.bg-wrap &#123;</span><br><span class="line"><span class="code">    display: flex;</span></span><br><span class="line"><span class="code">    justify-content: center;</span></span><br><span class="line"><span class="code">    align-items: center;</span></span><br><span class="line"><span class="code">    position: relative;</span></span><br><span class="line"><span class="code">    width: 100%;</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line">.bg-img &#123;</span><br><span class="line"><span class="code">    width: 100%;</span></span><br><span class="line"><span class="code">    position: relative;</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line">.middle.Blurkg &#123;</span><br><span class="line"><span class="code">    display: flex;</span></span><br><span class="line"><span class="code">    justify-content: space-around;</span></span><br><span class="line"><span class="code">    align-items: center;</span></span><br><span class="line"><span class="code">    position: relative;</span></span><br><span class="line"><span class="code">    padding: 20px;</span></span><br><span class="line"><span class="code">    background-color: rgba(0, 0, 0, 0);</span></span><br><span class="line"><span class="code">    border-radius: 15px;</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line">.img-male &#123;</span><br><span class="line"><span class="code">    display: flex;</span></span><br><span class="line"><span class="code">    flex-direction: column;</span></span><br><span class="line"><span class="code">    align-items: center;</span></span><br><span class="line"><span class="code">    text-align: center;</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line">.avatarArea &#123;</span><br><span class="line"><span class="code">    position: relative;</span></span><br><span class="line"><span class="code">    width: 120px;</span></span><br><span class="line"><span class="code">    height: 120px;</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line">.avatarFrame &#123;</span><br><span class="line"><span class="code">    width: 100%;</span></span><br><span class="line"><span class="code">    height: 100%;</span></span><br><span class="line"><span class="code">    border-radius: 50% !important;</span></span><br><span class="line"><span class="code">    position: relative;</span></span><br><span class="line"><span class="code">    z-index: 2;</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line">.aiv<span class="emphasis">_touxiang &#123;</span></span><br><span class="line"><span class="emphasis">    width: 100%;</span></span><br><span class="line"><span class="emphasis">    height: 100%;</span></span><br><span class="line"><span class="emphasis">    border-radius: 50% !important;</span></span><br><span class="line"><span class="emphasis">    max-width: 100% !important;</span></span><br><span class="line"><span class="emphasis">    border: 1px solid #fff;</span></span><br><span class="line"><span class="emphasis">    position: absolute;</span></span><br><span class="line"><span class="emphasis">    top: 0;</span></span><br><span class="line"><span class="emphasis">    left: 0;</span></span><br><span class="line"><span class="emphasis">    z-index: 1;</span></span><br><span class="line"><span class="emphasis">    object-fit: cover;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">.shadow-blur &#123;</span></span><br><span class="line"><span class="emphasis">    margin-top: 28px;</span></span><br><span class="line"><span class="emphasis">    font-size: 16px;</span></span><br><span class="line"><span class="emphasis">    color: white;</span></span><br><span class="line"><span class="emphasis">    background-color: rgba(0, 0, 0, 0.93);</span></span><br><span class="line"><span class="emphasis">    padding: 1px 15px;</span></span><br><span class="line"><span class="emphasis">    border-radius: 20px;</span></span><br><span class="line"><span class="emphasis">    display: inline-block;</span></span><br><span class="line"><span class="emphasis">    text-shadow: none;</span></span><br><span class="line"><span class="emphasis">    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.42);</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">@keyframes heartbeat &#123;</span></span><br><span class="line"><span class="emphasis">    0% &#123;</span></span><br><span class="line"><span class="emphasis">        transform: scale(1);</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    50% &#123;</span></span><br><span class="line"><span class="emphasis">        transform: scale(1.2);</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    100% &#123;</span></span><br><span class="line"><span class="emphasis">        transform: scale(1);</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">.love-icon &#123;</span></span><br><span class="line"><span class="emphasis">    width: 80px;</span></span><br><span class="line"><span class="emphasis">    height: 80px;</span></span><br><span class="line"><span class="emphasis">    animation: heartbeat 1.5s ease-in-out infinite;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">.img-female &#123;</span></span><br><span class="line"><span class="emphasis">    display: flex;</span></span><br><span class="line"><span class="emphasis">    flex-direction: column;</span></span><br><span class="line"><span class="emphasis">    align-items: center;</span></span><br><span class="line"><span class="emphasis">    text-align: center;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">.baiyi-love &#123;</span></span><br><span class="line"><span class="emphasis">    text-align: center !important;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">.baiyi-text &#123;</span></span><br><span class="line"><span class="emphasis">    font-size: 25px;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">#time-display &#123;</span></span><br><span class="line"><span class="emphasis">    text-align: center;</span></span><br><span class="line"><span class="emphasis">    font-size: 20px;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">#time-display span &#123;</span></span><br><span class="line"><span class="emphasis">    font-size: 25px;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">#time-display n &#123;</span></span><br><span class="line"><span class="emphasis">    font-size: 30px;</span></span><br><span class="line"><span class="emphasis">    margin-right: 8px;</span></span><br><span class="line"><span class="emphasis">    font-weight: 800;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">.row &#123;</span></span><br><span class="line"><span class="emphasis">    display: flex;</span></span><br><span class="line"><span class="emphasis">    flex-wrap: wrap;</span></span><br><span class="line"><span class="emphasis">    justify-content: center;</span></span><br><span class="line"><span class="emphasis">    gap: 10px; /* 减小卡片之间的间距 */</span></span><br><span class="line"><span class="emphasis">    padding: 10px; /* 减小整体的内边距 */</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">.time_</span>card &#123;</span><br><span class="line"><span class="code">    background-color: #333;</span></span><br><span class="line"><span class="code">    color: white;</span></span><br><span class="line"><span class="code">    border-radius: 15px;</span></span><br><span class="line"><span class="code">    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);</span></span><br><span class="line"><span class="code">    padding: 20px;</span></span><br><span class="line"><span class="code">    width: calc(50% - 10px); /* 根据新的间距调整宽度 */</span></span><br><span class="line"><span class="code">    min-width: 300px;</span></span><br><span class="line"><span class="code">    transition: transform 0.3s ease;</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line">.time<span class="emphasis">_card:hover &#123;</span></span><br><span class="line"><span class="emphasis">    transform: scale(1.05);</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">.left_</span>info &#123;</span><br><span class="line"><span class="code">    display: flex;</span></span><br><span class="line"><span class="code">    align-items: center;</span></span><br><span class="line"><span class="code">    margin-bottom: 10px;</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line">.left<span class="emphasis">_info svg &#123;</span></span><br><span class="line"><span class="emphasis">    fill: #ff6b6b;</span></span><br><span class="line"><span class="emphasis">    width: 30px;</span></span><br><span class="line"><span class="emphasis">    height: 30px;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">.day_</span>title &#123;</span><br><span class="line"><span class="code">    font-size: 1.2rem;</span></span><br><span class="line"><span class="code">    font-weight: bold;</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line">.time<span class="emphasis">_m &#123;</span></span><br><span class="line"><span class="emphasis">    display: flex;</span></span><br><span class="line"><span class="emphasis">    flex-direction: column;</span></span><br><span class="line"><span class="emphasis">    font-size: 1rem;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">.source &#123;</span></span><br><span class="line"><span class="emphasis">    font-weight: bold;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">.format &#123;</span></span><br><span class="line"><span class="emphasis">    color: #ccc;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">/* 767px 以下媒体查询 */</span></span><br><span class="line"><span class="emphasis">@media (max-width: 767px) &#123;</span></span><br><span class="line"><span class="emphasis">    .middle.Blurkg &#123;</span></span><br><span class="line"><span class="emphasis">        padding: 10px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .avatarArea &#123;</span></span><br><span class="line"><span class="emphasis">        width: 90px;</span></span><br><span class="line"><span class="emphasis">        height: 90px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .shadow-blur &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 12px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .love-icon &#123;</span></span><br><span class="line"><span class="emphasis">        width: 50px;</span></span><br><span class="line"><span class="emphasis">        height: 50px;</span></span><br><span class="line"><span class="emphasis">        margin-top: -10px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .row &#123;</span></span><br><span class="line"><span class="emphasis">        padding: 8px;</span></span><br><span class="line"><span class="emphasis">        gap: 8px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .time_</span>card &#123;</span><br><span class="line"><span class="code">        padding: 15px;</span></span><br><span class="line"><span class="code">        min-width: 130px;</span></span><br><span class="line"><span class="code">        width: calc(50% - 8px);</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">    .left_info svg &#123;</span></span><br><span class="line"><span class="code">        width: 20px;</span></span><br><span class="line"><span class="code">        height: 20px;</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">    .day_title &#123;</span></span><br><span class="line"><span class="code">        font-size: 0.8rem;</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">    .time_m &#123;</span></span><br><span class="line"><span class="code">        font-size: 0.7rem;</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">    .baiyi-text &#123;</span></span><br><span class="line"><span class="code">        font-size: 20px;</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">    #time-display n &#123;</span></span><br><span class="line"><span class="code">        font-size: 24px;</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line">/* 360 - 380px 媒体查询 <span class="emphasis">*/</span></span><br><span class="line"><span class="emphasis">@media (min-width: 360px) and (max-width: 380px) &#123;</span></span><br><span class="line"><span class="emphasis">    .middle.Blurkg &#123;</span></span><br><span class="line"><span class="emphasis">        padding: 7px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .avatarArea &#123;</span></span><br><span class="line"><span class="emphasis">        width: 68px;</span></span><br><span class="line"><span class="emphasis">        height: 68px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .shadow-blur &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 9px;</span></span><br><span class="line"><span class="emphasis">        padding: 1px 9px;</span></span><br><span class="line"><span class="emphasis">        margin-top: 17px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .love-icon &#123;</span></span><br><span class="line"><span class="emphasis">        width: 38px;</span></span><br><span class="line"><span class="emphasis">        height: 38px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .row &#123;</span></span><br><span class="line"><span class="emphasis">        padding: 4px;</span></span><br><span class="line"><span class="emphasis">        gap: 4px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .time_card &#123;</span></span><br><span class="line"><span class="emphasis">        padding: 11px;</span></span><br><span class="line"><span class="emphasis">        min-width: 122px;</span></span><br><span class="line"><span class="emphasis">        width: calc(50% - 4px);</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .left_info svg &#123;</span></span><br><span class="line"><span class="emphasis">        width: 15px;</span></span><br><span class="line"><span class="emphasis">        height: 15px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .day_title &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 0.68rem;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .time_m &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 0.58rem;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .baiyi-text &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 15px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    #time-display &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 15px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    #time-display n &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 19px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    #time-display span &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 19px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">/*</span> 360px 左右媒体查询 <span class="emphasis">*/</span></span><br><span class="line"><span class="emphasis">@media (max-width: 360px) &#123;</span></span><br><span class="line"><span class="emphasis">    .middle.Blurkg &#123;</span></span><br><span class="line"><span class="emphasis">        padding: 8px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .avatarArea &#123;</span></span><br><span class="line"><span class="emphasis">        width: 70px;</span></span><br><span class="line"><span class="emphasis">        height: 70px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .shadow-blur &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 10px;</span></span><br><span class="line"><span class="emphasis">        padding: 1px 10px;</span></span><br><span class="line"><span class="emphasis">        margin-top: 20px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .love-icon &#123;</span></span><br><span class="line"><span class="emphasis">        width: 40px;</span></span><br><span class="line"><span class="emphasis">        height: 40px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .row &#123;</span></span><br><span class="line"><span class="emphasis">        padding: 6px;</span></span><br><span class="line"><span class="emphasis">        gap: 6px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .time_card &#123;</span></span><br><span class="line"><span class="emphasis">        padding: 12px;</span></span><br><span class="line"><span class="emphasis">        min-width: 125px;</span></span><br><span class="line"><span class="emphasis">        width: calc(50% - 6px);</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .left_info svg &#123;</span></span><br><span class="line"><span class="emphasis">        width: 16px;</span></span><br><span class="line"><span class="emphasis">        height: 16px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .day_title &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 0.7rem;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .time_m &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 0.6rem;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .baiyi-text &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 16px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    #time-display &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 16px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    #time-display n &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 20px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    #time-display span &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 20px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">/*</span> 348px 左右媒体查询 <span class="emphasis">*/</span></span><br><span class="line"><span class="emphasis">@media (max-width: 348px) &#123;</span></span><br><span class="line"><span class="emphasis">    .middle.Blurkg &#123;</span></span><br><span class="line"><span class="emphasis">        padding: 6px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .avatarArea &#123;</span></span><br><span class="line"><span class="emphasis">        width: 65px;</span></span><br><span class="line"><span class="emphasis">        height: 65px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .shadow-blur &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 9px;</span></span><br><span class="line"><span class="emphasis">        padding: 1px 9px;</span></span><br><span class="line"><span class="emphasis">        margin-top: 18px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .love-icon &#123;</span></span><br><span class="line"><span class="emphasis">        width: 35px;</span></span><br><span class="line"><span class="emphasis">        height: 35px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .row &#123;</span></span><br><span class="line"><span class="emphasis">        padding: 6px;</span></span><br><span class="line"><span class="emphasis">        gap: 6px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .time_card &#123;</span></span><br><span class="line"><span class="emphasis">        padding: 10px;</span></span><br><span class="line"><span class="emphasis">        min-width: 120px;</span></span><br><span class="line"><span class="emphasis">        width: calc(50% - 6px);</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .left_info svg &#123;</span></span><br><span class="line"><span class="emphasis">        width: 14px;</span></span><br><span class="line"><span class="emphasis">        height: 14px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .day_title &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 0.65rem;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .time_m &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 0.55rem;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .baiyi-text &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 14px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    #time-display &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 14px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    #time-display n &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 18px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    #time-display span &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 18px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">/*</span> 320px 及以下媒体查询 <span class="emphasis">*/</span></span><br><span class="line"><span class="emphasis">@media (max-width: 320px) &#123;</span></span><br><span class="line"><span class="emphasis">    .middle.Blurkg &#123;</span></span><br><span class="line"><span class="emphasis">        padding: 5px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .avatarArea &#123;</span></span><br><span class="line"><span class="emphasis">        width: 60px;</span></span><br><span class="line"><span class="emphasis">        height: 60px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .shadow-blur &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 8px;</span></span><br><span class="line"><span class="emphasis">        padding: 1px 8px;</span></span><br><span class="line"><span class="emphasis">        margin-top: 15px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .love-icon &#123;</span></span><br><span class="line"><span class="emphasis">        width: 30px;</span></span><br><span class="line"><span class="emphasis">        height: 30px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .row &#123;</span></span><br><span class="line"><span class="emphasis">        padding: 5px;</span></span><br><span class="line"><span class="emphasis">        gap: 5px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .time_card &#123;</span></span><br><span class="line"><span class="emphasis">        padding: 8px;</span></span><br><span class="line"><span class="emphasis">        min-width: 110px;</span></span><br><span class="line"><span class="emphasis">        width: calc(50% - 5px);</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .left_info svg &#123;</span></span><br><span class="line"><span class="emphasis">        width: 12px;</span></span><br><span class="line"><span class="emphasis">        height: 12px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .day_title &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 0.6rem;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .time_m &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 0.5rem;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    .baiyi-text &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 12px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    #time-display &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 12px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    #time-display n &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 16px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">    #time-display span &#123;</span></span><br><span class="line"><span class="emphasis">        font-size: 16px;</span></span><br><span class="line"><span class="emphasis">    &#125;</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bg-wrap central limg&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bg-img&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;middle Blurkg&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;img-male&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;avatarArea&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">draggable</span>=<span class="string">&quot;false&quot;</span><span class="attr">class</span>=<span class="string">&quot;avatarFrame lazy entered loaded&quot;</span><span class="attr">data-src</span>=<span class="string">&quot;/img/sucai/头像挂件.png&quot;</span><span class="attr">style</span>=<span class="string">&quot;transform: scale(1.6);top: 2px;left: 2px;&quot;</span><span class="attr">data-ll-status</span>=<span class="string">&quot;loaded&quot;</span><span class="attr">src</span>=<span class="string">&quot;/img/sucai/头像挂件.png&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;aiv_touxiang entered loaded&quot;</span><span class="attr">src</span>=<span class="string">&quot;http://q2.qlogo.cn/headimg_dl?dst_uin=2766521276<span class="symbol">&amp;amp;</span>spec=640&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;shadow-blur&quot;</span>&gt;</span></span>Qiu.<span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;love-icon&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">draggable</span>=<span class="string">&quot;false&quot;</span><span class="attr">src</span>=<span class="string">&quot;/img/sucai/like.svg&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;img-female&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;avatarArea&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">draggable</span>=<span class="string">&quot;false&quot;</span><span class="attr">class</span>=<span class="string">&quot;avatarFrame lazy entered loaded&quot;</span><span class="attr">data-src</span>=<span class="string">&quot;/img/sucai/头像挂件.png&quot;</span><span class="attr">style</span>=<span class="string">&quot;transform: scale(1.6);top: 2px;left: 2px;&quot;</span><span class="attr">data-ll-status</span>=<span class="string">&quot;loaded&quot;</span><span class="attr">src</span>=<span class="string">&quot;/img/sucai/头像挂件.png&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;aiv_touxiang entered loaded&quot;</span><span class="attr">src</span>=<span class="string">&quot;http://q2.qlogo.cn/headimg_dl?dst_uin=1986315605<span class="symbol">&amp;amp;</span>spec=640&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;shadow-blur&quot;</span>&gt;</span></span>Liang<span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;baiyi-love&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;baiyi-text&quot;</span>&gt;</span></span>这是我们一起走过的<span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;time-display&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row central&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_card col-lg-6 col-md-6 col-sm-12 col-sm-x-12 shadow-blur aos-init aos-animate&quot;</span><span class="attr">aos</span>=<span class="string">&quot;flip-up&quot;</span><span class="attr">aos-duration</span>=<span class="string">&quot;500&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;day_cont&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left_info&quot;</span><span class="attr">data-title</span>=<span class="string">&quot;周年纪念日&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">t</span>=<span class="string">&quot;1715052607396&quot;</span><span class="attr">style</span>=<span class="string">&quot;margin-right:0.5rem!important;&quot;</span><span class="attr">class</span>=<span class="string">&quot;icon&quot;</span><span class="attr">viewBox</span>=<span class="string">&quot;0 0 1024 1024&quot;</span><span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span><span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span><span class="attr">p-id</span>=<span class="string">&quot;9366&quot;</span><span class="attr">width</span>=<span class="string">&quot;100&quot;</span><span class="attr">height</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M810 249.5c-38.6-38.6-83.5-68.8-133.5-90-51.8-21.9-106.8-33-163.5-33s-111.7 11.1-163.5 33c-50 21.2-94.9 51.4-133.5 90-38.6 38.6-68.8 83.5-90 133.5-21.9 51.8-33 106.8-33 163.5s11.1 111.7 33 163.5c21.2 50 51.4 94.9 90 133.5s83.5 68.8 133.5 90c51.8 21.9 106.8 33 163.5 33s111.7-11.1 163.5-33c50-21.2 94.9-51.4 133.5-90S878.8 760 900 710c21.9-51.8 33-106.8 33-163.5S921.9 434.8 900 383c-21.2-50-51.5-94.9-90-133.5z m-297 657c-198.5 0-360-161.5-360-360s161.5-360 360-360 360 161.5 360 360-161.5 360-360 360zM357 96.5c-42.3-49.6-141-53.3-208.1 4s-77.3 153.9-35 203.5L357 96.5zM877.2 100.5C810 43.2 711.3 47 669 96.5L912.2 304c42.3-49.6 32.1-146.2-35-203.5z&quot;</span><span class="attr">p-id</span>=<span class="string">&quot;9367&quot;</span><span class="attr">fill</span>=<span class="string">&quot;#ffffff&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M667.1 558.6H543V351c0-17.9-14.5-32.4-32.4-32.4-15.2 0-27.6 12.3-27.6 27.6v272.4h182.2c17.1 0 30.9-13.8 30.9-30.9 0-16.1-13-29.1-29-29.1z&quot;</span><span class="attr">p-id</span>=<span class="string">&quot;9368&quot;</span><span class="attr">fill</span>=<span class="string">&quot;#ffffff&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;day_title&quot;</span><span class="attr">id</span>=<span class="string">&quot;anniversaryTitle&quot;</span>&gt;</span></span>周年纪念日<span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_m&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">b</span> <span class="attr">class</span>=<span class="string">&quot;source&quot;</span><span class="attr">id</span>=<span class="string">&quot;anniversaryDate&quot;</span>&gt;</span></span>2024-08-19<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;format&quot;</span><span class="attr">id</span>=<span class="string">&quot;countdownDisplay&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">	</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_card col-lg-6 col-md-6 col-sm-12 col-sm-x-12 shadow-blur aos-init aos-animate&quot;</span><span class="attr">aos</span>=<span class="string">&quot;flip-up&quot;</span><span class="attr">aos-duration</span>=<span class="string">&quot;500&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;day_cont&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left_info&quot;</span><span class="attr">data-title</span>=<span class="string">&quot;第一次相遇&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">t</span>=<span class="string">&quot;1715052082901&quot;</span><span class="attr">style</span>=<span class="string">&quot;margin-right:0.5rem!important;&quot;</span><span class="attr">class</span>=<span class="string">&quot;icon&quot;</span><span class="attr">viewBox</span>=<span class="string">&quot;0 0 1024 1024&quot;</span><span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span><span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span><span class="attr">p-id</span>=<span class="string">&quot;4508&quot;</span><span class="attr">width</span>=<span class="string">&quot;100&quot;</span><span class="attr">height</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M470.4 204.8l44.8 44.8 44.8-44.8c99.2-99.2 262.4-99.2 361.6 0 48 48 73.6 112 73.6 179.2 0 19.2-12.8 32-32 32s-32-12.8-32-32c0-51.2-19.2-99.2-57.6-134.4-73.6-73.6-195.2-73.6-272 0l-67.2 67.2c-12.8 12.8-32 12.8-44.8 0l-67.2-67.2c-73.6-73.6-195.2-73.6-272 0-73.6 73.6-73.6 195.2 0 272L512 883.2c12.8 12.8 12.8 32 0 44.8s-32 12.8-44.8 0L105.6 566.4c-99.2-99.2-99.2-262.4 0-361.6 102.4-102.4 262.4-102.4 364.8 0z m176 710.4L425.6 694.4c-57.6-57.6-57.6-147.2 0-204.8 57.6-57.6 147.2-57.6 204.8 0l57.6 57.6 57.6-57.6c57.6-57.6 147.2-57.6 204.8 0 57.6 57.6 57.6 147.2 0 204.8L729.6 915.2c-9.6 9.6-25.6 16-38.4 16-19.2 0-32-6.4-44.8-16z m256-265.6c32-32 32-83.2 0-112-32-32-83.2-32-112 0l-80 80c-12.8 12.8-32 12.8-44.8 0l-80-80c-32-32-83.2-32-112 0-32 32-32 83.2 0 112L688 864l214.4-214.4z&quot;</span><span class="attr">p-id</span>=<span class="string">&quot;4509&quot;</span><span class="attr">fill</span>=<span class="string">&quot;#ffffff&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;day_title&quot;</span><span class="attr">id</span>=<span class="string">&quot;firstMeetTitle&quot;</span>&gt;</span></span>相遇的那天<span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_m&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">b</span> <span class="attr">class</span>=<span class="string">&quot;source&quot;</span><span class="attr">id</span>=<span class="string">&quot;firstMeetDate&quot;</span>&gt;</span></span>2024-06-30<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;format&quot;</span><span class="attr">id</span>=<span class="string">&quot;firstMeetCountdown&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row central&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_card col-lg-6 col-md-6 col-sm-12 col-sm-x-12 shadow-blur aos-init aos-animate&quot;</span> <span class="attr">aos</span>=<span class="string">&quot;flip-up&quot;</span> <span class="attr">aos-duration</span>=<span class="string">&quot;500&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;day_cont&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left_info&quot;</span> <span class="attr">data-title</span>=<span class="string">&quot;邱总的生日&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">t</span>=<span class="string">&quot;1715052082901&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-right:0.5rem!important;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 1024 1024&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">p-id</span>=<span class="string">&quot;4508&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M470.4 204.8l44.8 44.8 44.8-44.8c99.2-99.2 262.4-99.2 361.6 0 48 48 73.6 112 73.6 179.2 0 19.2-12.8 32-32 32s-32-12.8-32-32c0-51.2-19.2-99.2-57.6-134.4-73.6-73.6-195.2-73.6-272 0l-67.2 67.2c-12.8 12.8-32 12.8-44.8 0l-67.2-67.2c-73.6-73.6-195.2-73.6-272 0-73.6 73.6-73.6 195.2 0 272L512 883.2c12.8 12.8 12.8 32 0 44.8s-32 12.8-44.8 0L105.6 566.4c-99.2-99.2-99.2-262.4 0-361.6 102.4-102.4 262.4-102.4 364.8 0z m176 710.4L425.6 694.4c-57.6-57.6-57.6-147.2 0-204.8 57.6-57.6 147.2-57.6 204.8 0l57.6 57.6 57.6-57.6c57.6-57.6 147.2-57.6 204.8 0 57.6 57.6 57.6 147.2 0 204.8L729.6 915.2c-9.6 9.6-25.6 16-38.4 16-19.2 0-32-6.4-44.8-16z m256-265.6c32-32 32-83.2 0-112-32-32-83.2-32-112 0l-80 80c-12.8 12.8-32 12.8-44.8 0l-80-80c-32-32-83.2-32-112 0-32 32-32 83.2 0 112L688 864l214.4-214.4z&quot;</span> <span class="attr">p-id</span>=<span class="string">&quot;4509&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;#ffffff&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;day_title&quot;</span>&gt;</span></span>邱总的生日<span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_m&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">b</span> <span class="attr">class</span>=<span class="string">&quot;source&quot;</span>&gt;</span></span>2004-01-15<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;format&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">                                          </span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_card col-lg-6 col-md-6 col-sm-12 col-sm-x-12 shadow-blur aos-init aos-animate&quot;</span><span class="attr">aos</span>=<span class="string">&quot;flip-up&quot;</span><span class="attr">aos-duration</span>=<span class="string">&quot;500&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;day_cont&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left_info&quot;</span><span class="attr">data-title</span>=<span class="string">&quot;妍妍的生日&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">t</span>=<span class="string">&quot;1715052082901&quot;</span><span class="attr">style</span>=<span class="string">&quot;margin-right:0.5rem!important;&quot;</span><span class="attr">class</span>=<span class="string">&quot;icon&quot;</span><span class="attr">viewBox</span>=<span class="string">&quot;0 0 1024 1024&quot;</span><span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span><span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span><span class="attr">p-id</span>=<span class="string">&quot;4508&quot;</span><span class="attr">width</span>=<span class="string">&quot;100&quot;</span><span class="attr">height</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M470.4 204.8l44.8 44.8 44.8-44.8c99.2-99.2 262.4-99.2 361.6 0 48 48 73.6 112 73.6 179.2 0 19.2-12.8 32-32 32s-32-12.8-32-32c0-51.2-19.2-99.2-57.6-134.4-73.6-73.6-195.2-73.6-272 0l-67.2 67.2c-12.8 12.8-32 12.8-44.8 0l-67.2-67.2c-73.6-73.6-195.2-73.6-272 0-73.6 73.6-73.6 195.2 0 272L512 883.2c12.8 12.8 12.8 32 0 44.8s-32 12.8-44.8 0L105.6 566.4c-99.2-99.2-99.2-262.4 0-361.6 102.4-102.4 262.4-102.4 364.8 0z m176 710.4L425.6 694.4c-57.6-57.6-57.6-147.2 0-204.8 57.6-57.6 147.2-57.6 204.8 0l57.6 57.6 57.6-57.6c57.6-57.6 147.2-57.6 204.8 0 57.6 57.6 57.6 147.2 0 204.8L729.6 915.2c-9.6 9.6-25.6 16-38.4 16-19.2 0-32-6.4-44.8-16z m256-265.6c32-32 32-83.2 0-112-32-32-83.2-32-112 0l-80 80c-12.8 12.8-32 12.8-44.8 0l-80-80c-32-32-83.2-32-112 0-32 32-32 83.2 0 112L688 864l214.4-214.4z&quot;</span><span class="attr">p-id</span>=<span class="string">&quot;4509&quot;</span><span class="attr">fill</span>=<span class="string">&quot;#ffffff&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;day_title&quot;</span>&gt;</span></span>妍妍的生日<span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;time_m&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">b</span> <span class="attr">class</span>=<span class="string">&quot;source&quot;</span>&gt;</span></span>1999-10-04<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;format&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span></span><br><span class="line"><span class="emphasis">// Author：白衣</span></span><br><span class="line"><span class="emphasis">// 将日期字符串转换为ISO 8601格式</span></span><br><span class="line"><span class="emphasis">function formatToISO8601(dateStr) &#123;</span></span><br><span class="line"><span class="emphasis">	var parts = dateStr.split(&#x27; &#x27;);</span></span><br><span class="line"><span class="emphasis">	var dateParts = parts[0].split(&#x27;-&#x27;);</span></span><br><span class="line"><span class="emphasis">	var timeParts = parts[1].split(&#x27;:&#x27;);</span></span><br><span class="line"><span class="emphasis">	return dateParts[0] + &#x27;-&#x27; + (dateParts[1].length === 1 ? &#x27;0&#x27; : &#x27;&#x27;) + dateParts[1] + &#x27;-&#x27; + (dateParts[2].length === 1 ? &#x27;0&#x27; : &#x27;&#x27;) + dateParts[2] + &#x27;T&#x27; + timeParts[0] + &#x27;:&#x27; + timeParts[1] + &#x27;:&#x27; + timeParts[2];</span></span><br><span class="line"><span class="emphasis">&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">// 设置起始时间</span></span><br><span class="line"><span class="emphasis">var startDateStr = &#x27;2024-8-19 21:34:00&#x27;;</span></span><br><span class="line"><span class="emphasis">var startDate = new Date(formatToISO8601(startDateStr));</span></span><br><span class="line"><span class="emphasis">// 获取时间显示元素</span></span><br><span class="line"><span class="emphasis">var timeDisplay = document.getElementById(&#x27;time-display&#x27;);</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">// 更新时间显示的函数</span></span><br><span class="line"><span class="emphasis">function updateTime() &#123;</span></span><br><span class="line"><span class="emphasis">	// 获取当前时间</span></span><br><span class="line"><span class="emphasis">	var now = new Date();</span></span><br><span class="line"><span class="emphasis">	// 计算时间差</span></span><br><span class="line"><span class="emphasis">	var timeDiff = now - startDate;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">	// 计算天数、小时、分钟和秒</span></span><br><span class="line"><span class="emphasis">	var days = Math.floor(timeDiff / (1000 *</span> 60 * 60 * 24));</span><br><span class="line"><span class="code">	var hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));</span></span><br><span class="line"><span class="code">	var minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));</span></span><br><span class="line"><span class="code">	var seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">	// 格式化时间显示</span></span><br><span class="line"><span class="code">	timeDisplay.innerHTML = `&lt;n class=&quot;num&quot;&gt;$&#123;days&#125;&lt;/n&gt;&lt;span class=&quot;chinese&quot;&gt;天 &lt;/span&gt;` +</span></span><br><span class="line"><span class="code">		`&lt;n class=&quot;num&quot;&gt;$&#123;(&#x27;0&#x27; + hours).slice(-2)&#125;&lt;/n&gt;&lt;span class=&quot;chinese&quot;&gt;时 &lt;/span&gt;` +</span></span><br><span class="line"><span class="code">		`&lt;n class=&quot;num&quot;&gt;$&#123;(&#x27;0&#x27; + minutes).slice(-2)&#125;&lt;/n&gt;&lt;span class=&quot;chinese&quot;&gt;分 &lt;/span&gt;` +</span></span><br><span class="line"><span class="code">		`&lt;n class=&quot;num&quot;&gt;$&#123;(&#x27;0&#x27; + seconds).slice(-2)&#125;&lt;/n&gt;&lt;span class=&quot;chinese&quot;&gt;秒&lt;/span&gt;`;</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line">// 初始调用更新时间函数</span><br><span class="line">updateTime();</span><br><span class="line">// 每隔1秒调用一次更新时间函数</span><br><span class="line">setInterval(updateTime, 1000);</span><br><span class="line"></span><br><span class="line">// 周年纪念日</span><br><span class="line">document.addEventListener(&#x27;DOMContentLoaded&#x27;, function() &#123;</span><br><span class="line"><span class="code">	const anniversaryDateElement = document.getElementById(&#x27;anniversaryDate&#x27;);</span></span><br><span class="line"><span class="code">	const countdownElement = document.getElementById(&#x27;countdownDisplay&#x27;);</span></span><br><span class="line"><span class="code">	if (anniversaryDateElement) &#123;</span></span><br><span class="line"><span class="code">		const anniversaryStr = anniversaryDateElement.textContent;</span></span><br><span class="line"><span class="code">		const [year, month, day] = anniversaryStr.split(&#x27;-&#x27;).map(Number);</span></span><br><span class="line"><span class="code">		const nextAnniversary = new Date(year + 1, month - 1, day);</span></span><br><span class="line"><span class="code">		const currentDate = new Date();</span></span><br><span class="line"><span class="code">		const timeDiff = nextAnniversary - currentDate;</span></span><br><span class="line"><span class="code">		const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));</span></span><br><span class="line"><span class="code">		countdownElement.textContent = `还有 $&#123;daysDiff&#125; 天`;</span></span><br><span class="line"><span class="code">	&#125;</span></span><br><span class="line"><span class="code">&#125;);</span></span><br><span class="line"><span class="code"></span></span><br><span class="line">// 我们相遇的那天</span><br><span class="line">//location.toString().indexOf(&quot;baiyi&quot;) &lt;= -1? document.location.href = &quot;.&quot; : null;</span><br><span class="line">document.addEventListener(&#x27;DOMContentLoaded&#x27;, function() &#123;</span><br><span class="line"><span class="code">	const firstMeetDateElement = document.getElementById(&#x27;firstMeetDate&#x27;);</span></span><br><span class="line"><span class="code">	const countdownElement = document.getElementById(&#x27;firstMeetCountdown&#x27;);</span></span><br><span class="line"><span class="code">	if (firstMeetDateElement) &#123;</span></span><br><span class="line"><span class="code">		const meetDateStr = firstMeetDateElement.textContent;</span></span><br><span class="line"><span class="code">		const [year, month, day] = meetDateStr.split(&#x27;-&#x27;).map(Number);</span></span><br><span class="line"><span class="code">		const meetDate = new Date(year, month - 1, day);</span></span><br><span class="line"><span class="code">		const currentDate = new Date();</span></span><br><span class="line"><span class="code">		const timeDiff = currentDate - meetDate;</span></span><br><span class="line"><span class="code">		const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));</span></span><br><span class="line"><span class="code">		countdownElement.textContent = `过了 $&#123;daysDiff&#125; 天`;</span></span><br><span class="line"><span class="code">	&#125;</span></span><br><span class="line"><span class="code">&#125;);</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"></span><br><span class="line">  // 获取所有生日日期元素</span><br><span class="line"><span class="code">        const birthdayElements = document.querySelectorAll(&#x27;.source&#x27;);</span></span><br><span class="line"><span class="code">        // 获取所有显示倒计时的元素</span></span><br><span class="line"><span class="code">        const countdownElements = document.querySelectorAll(&#x27;.format&#x27;);</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">        // 遍历每个生日日期元素</span></span><br><span class="line"><span class="code">        birthdayElements.forEach((element, index) =&gt; &#123;</span></span><br><span class="line"><span class="code">            // 获取生日日期字符串</span></span><br><span class="line"><span class="code">            const birthdayStr = element.textContent;</span></span><br><span class="line"><span class="code">            // 将生日日期字符串分割成年、月、日</span></span><br><span class="line"><span class="code">            const [birthYear, birthMonth, birthDay] = birthdayStr.split(&#x27;-&#x27;).map(Number);</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">            // 获取当前日期</span></span><br><span class="line"><span class="code">            const currentDate = new Date();</span></span><br><span class="line"><span class="code">            const currentYear = currentDate.getFullYear();</span></span><br><span class="line"><span class="code">            const currentMonth = currentDate.getMonth() + 1;</span></span><br><span class="line"><span class="code">            const currentDay = currentDate.getDate();</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">            // 计算今年的生日日期</span></span><br><span class="line"><span class="code">            let thisYearBirthday = new Date(currentYear, birthMonth - 1, birthDay);</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">            // 如果今年的生日已经过了，计算下一年的生日日期</span></span><br><span class="line"><span class="code">            if (thisYearBirthday &lt; currentDate) &#123;</span></span><br><span class="line"><span class="code">                thisYearBirthday = new Date(currentYear + 1, birthMonth - 1, birthDay);</span></span><br><span class="line"><span class="code">            &#125;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">            // 计算两个日期之间的时间差（毫秒）</span></span><br><span class="line"><span class="code">            const timeDiff = thisYearBirthday - currentDate;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">            // 将时间差转换为天数</span></span><br><span class="line"><span class="code">            const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">            // 显示倒计时信息</span></span><br><span class="line"><span class="code">            countdownElements[index].textContent = `还有$&#123;daysDiff&#125;天`;</span></span><br><span class="line"><span class="code">        &#125;);</span></span><br><span class="line"><span class="code">    &lt;/script&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>主题美化</category>
      </categories>
      <tags>
        <tag>主题美化</tag>
        <tag>solitude</tag>
        <tag>情侣</tag>
      </tags>
  </entry>
</search>
